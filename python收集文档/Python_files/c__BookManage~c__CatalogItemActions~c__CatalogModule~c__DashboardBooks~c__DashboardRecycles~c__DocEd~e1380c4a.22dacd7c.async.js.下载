/*! For license information please see c__BookManage~c__CatalogItemActions~c__CatalogModule~c__DashboardBooks~c__DashboardRecycles~c__DocEd~e1380c4a.22dacd7c.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[8,970],{1734:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-meh",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm0 20c-50.81 0-92 41.19-92 92s41.19 92 92 92 92-41.19 92-92-41.19-92-92-92Zm17 115c5.523 0 10 4.477 10 10s-4.477 10-10 10h-34c-5.523 0-10-4.477-10-10s4.477-10 10-10h34ZM96 96c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12Zm64 0c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12Z",fill:"currentColor",fillRule:"nonzero"}))},3316:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(160),i=r.n(a),c=r(3531),u=r(3337),l=r(154),s=r(57),f=r(792),p=r(3380),h=r(3391),d=r(3326);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(){g=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new D(n||[]);return o(i,"_invoke",{value:L(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",m="completed",v={};function b(){}function w(){}function _(){}var O={};l(O,i,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(C([])));E&&E!==r&&n.call(E,i)&&(O=E);var k=_.prototype=b.prototype=Object.create(O);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==y(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=p;return function(a,i){if(o===d)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?m:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(y(t)+" is not iterable")}return w.prototype=_,o(k,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},j(x.prototype),l(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(k),l(k,u,"Generator"),l(k,i,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function b(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){b(a,n,o,i,c,"next",e)}function c(e){b(a,n,o,i,c,"throw",e)}i(void 0)}))}}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function O(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}var E=d.memberSelectorType.GROUP,k=d.memberSelectorType.BOOK,j=d.memberSelectorType.SIMPLE_WITH_ROLE,x=d.memberSelectorType.SIMPLE,L=d.memberSelectorType.DOC,T=d.memberSelectorType.LIST,P=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),O(this,"serializeUserPostBody",(function(t){return e.serializeUserPostBody(t)})),O(this,"enableDepthAll",(function(){return!1})),O(this,"enableDepSelect",(function(){var e=window.appData.isYuque;return t.type===x||!e&&[E,k,j].includes(t.type)})),O(this,"adpatUIListData",function(){var e=w(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O(this,"adpatUINavData",function(){var e=w(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O(this,"getRoles",(function(e){return Object(p.c)(e)})),O(this,"isDepartment",(function(t){return e.isDepartment(t)})),O(this,"isUser",(function(t){return e.isUser(t)})),O(this,"getRealUsers",(function(e){return e})),O(this,"getAddRoles",(function(){var e=t.getRoles(t.type),r=t.getSupportRoles();return e.filter((function(e){return r.includes(e.value)}))})),O(this,"getInviteAddRoles",w(g().mark((function e(){var r,n,a,i,c,u,l;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.appData.isYuque,a=t.getRoles(t.type),i=t.getSupportRoles(),c=s.a.isOwner(t.organization),u=a.filter((function(e){return i.includes(e.value)})),!t.organization||!t.organization.id){e.next=9;break}return e.next=8,s.a.canIndirectAddOrgMember(t.organization);case 8:l=e.sent;case 9:return u=n&&null!==(r=t.organization)&&void 0!==r&&r.id?(u=u.map((function(e){return v(v({},e),{},{roleTip:t.type===k?__("仅空间内获得链接的人可获得权限"):__("仅空间内获得链接的人可成为"),allow_outsider:f.ALLOW_OUTSIDER.NORMAL,disabled:!1,unique:"".concat(e.key,"-NOT-ALLOW_OUTSIDER")})}))).concat(u.map((function(e){return v(v({},e),{},{roleTip:t.type===k?__("所有获得链接的人可获得权限"):__("所有获得链接的人可成为"),allow_outsider:f.ALLOW_OUTSIDER.ALLOW,disabled:!l,disabled_text:c?o.a.createElement(o.a.Fragment,null,__("空间管理设置已关闭空间外人员添加权限，请先前往开启。"),o.a.createElement("a",{target:"_blank",href:"/r/organizations/dashboard/settings?type=permission"},__("立即开启"))):o.a.createElement(o.a.Fragment,null,__("管理员已关闭空间外人员添加权限，请联系管理员开启。"),o.a.createElement("a",{target:"_blank",href:"https://www.yuque.com/yuque/rvzzxz/csb5nu"},__("查看帮助"))),unique:"".concat(e.key,"-ALLOW_OUTSIDER")})}))):u.map((function(e){return v(v({},e),{},{roleTip:t.type===k?__("访问链接即可获得权限"):__("通过链接邀请成为"),allow_outsider:f.ALLOW_OUTSIDER.NORMAL,disabled:!1,unique:"".concat(e.key,"-NOT-ALLOW_OUTSIDER")})})),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})))),O(this,"getUserCount",(function(e){var t=0;return e.forEach((function(e){e.user_count?t+=e.user_count:t+=1})),t})),this.options=r,this.type=r.type,this.list=r.list,this.doc=r.doc,this.book=r.book,this.group=r.group,this.organization=r.organization,this.target=r[this.type],this.typeName=Object(c.a)(this.target?this.target.type:this.type),this.type===E&&this.target&&l.a.isPublication(this.target)&&(this.typeName=__("知识小组")),r.members&&r.members.length&&this.setUid(r.members),this.members=r.members||[],[j,x].includes(this.type)&&(this.me=r.me),this.selected=[],this.enable=!0,this.validRoles=this.getAddRoles(),this.inviteValidRoles=this.getInviteAddRoles()}var t,r,n,a;return t=e,r=[{key:"check",value:(a=w(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.warn("not implement");case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"getIconUrl",value:function(){return null}},{key:"getIconName",value:function(){return null}},{key:"setUid",value:function(e){if(e)return Array.isArray(e)?Object(u.format)(e):Object(u.formatOne)(e)}},{key:"serialize",value:function(e){var t=v(v({},e),{},{users:this.adpatUIListData(this.setUid(e.users)),navs:this.adpatUINavData(this.setUid(e.parent||e.parents))});return this.enableDepthAll()&&(void 0!==e.user_count&&(t.user_count=e.user_count),e.depthUsers&&(t.depthUsers=this.adpatUIListData(this.setUid(e.depthUsers)))),t}},{key:"getSupportRoles",value:function(){var e=[],t=p.a[this.type];return this.type===E?e=[t.member,t.readonly]:this.type===k||this.type===L?e=[t.edit,t.readonly]:this.type===T&&(e=[t.member]),this.options.supportRoles||e}},{key:"getMembers",value:function(e){return e?this.members.filter((function(t){return t.role===e})):this.members}},{key:"getMemberByUser",value:function(e){return this.members?this.members.find((function(t){return Object(h.b)(t.user,e)})):null}},{key:"isOwner",value:function(){return!1}},{key:"isMember",value:function(){return!1}},{key:"isMemberOwner",value:function(){return!1}}],n=[{key:"serializeUserPostBody",value:function(e){var t=["id","user_id","role","login","workid","work_id","name","provider_type","provider_userid"];if(Array.isArray(e))return e.map((function(e){return i()(e,t)})).map((function(e){return e.workid=e.workid||e.work_id,e}));var r=i()(e,t);return r.workid=e.workid||e.work_id,r}}],r&&_(t.prototype,r),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();O(P,"isDepartment",(function(e){return e.type&&"department"===e.type.toLowerCase()})),O(P,"isUser",(function(e){return!e.type||"user"===e.type.toLowerCase()})),t.a=P},3326:function(e,t){e.exports={memberSelectorType:{GROUP:"group",BOOK:"book",DOC:"doc",SIMPLE_WITH_ROLE:"simpleWithRole",SIMPLE:"simple",LIST:"list",ORGANIZATION:"organization"}}},3331:function(e,t,r){"use strict";r(2935);var n=r(1239);r(3192);t.a=n.a},3337:function(e,t){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){u=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.formatOne=function(e){if(!e)return e;var t=e;return t.user&&(t=i(i({},e),e.user)),t.uid||(t.work_id?e.uid="".concat(t.work_id):t.id?e.uid="".concat(t.id):t.provider_type&&t.provider_userid&&(e.uid="".concat(t.provider_type,"_").concat(t.provider_userid))),e},t.format=function(e){var r,o=n(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;t.formatOne(a)}}catch(e){o.e(e)}finally{o.f()}return e}},3345:function(e,t,r){"use strict";t.a={shareChannels:"ShareChannels-module_shareChannels_gfpjT",shareDetailSettingPanel:"ShareChannels-module_shareDetailSettingPanel_RhPY6",collaborator:"ShareChannels-module_collaborator_2YM9N",inviteSelector:"ShareChannels-module_inviteSelector_UvnYT",bookPublicSetting:"ShareChannels-module_bookPublicSetting_skCSj",bookPublicTitle:"ShareChannels-module_bookPublicTitle_Nvtb5",title:"ShareChannels-module_title_FCiiD",backIcon:"ShareChannels-module_backIcon_Xa1gT",titleDesc:"ShareChannels-module_titleDesc_Qr9Q3",bookPublicSet:"ShareChannels-module_bookPublicSet_HaiHZ",contentArea:"ShareChannels-module_contentArea_WAxw-",copyLinkWrapper:"ShareChannels-module_copyLinkWrapper_zNH1v",linkTitleDesc:"ShareChannels-module_linkTitleDesc_RdIXM",linkContentArea:"ShareChannels-module_linkContentArea_+a59s",copyLink:"ShareChannels-module_copyLink_3mHuZ",inviteCopyBtn:"ShareChannels-module_inviteCopyBtn_ju+VP",moreConfigSettings:"ShareChannels-module_moreConfigSettings_b+fk7",moreConfigToggler:"ShareChannels-module_moreConfigToggler_caced",moreConfigsTip:"ShareChannels-module_moreConfigsTip_gtVy7",expandIcon:"ShareChannels-module_expandIcon_MQJP8",pwdBlock:"ShareChannels-module_pwdBlock_dU5pI",pwdLink:"ShareChannels-module_pwdLink_M9e3v",pwdBtn:"ShareChannels-module_pwdBtn_oJupk",passwordText:"ShareChannels-module_passwordText_gaCkx",resetBtn:"ShareChannels-module_resetBtn_aOPqB",resetIcon:"ShareChannels-module_resetIcon_rn-tx",selectorItem:"ShareChannels-module_selectorItem_l7C7L",notOwner:"ShareChannels-module_notOwner_oGq+h",selectorIcon:"ShareChannels-module_selectorIcon_4e0e0",disabledItem:"ShareChannels-module_disabledItem_1Ei-3",shareTime:"ShareChannels-module_shareTime_cjwGm",memberAbleIcon:"ShareChannels-module_memberAbleIcon_xR+WM",shareNotOwner:"ShareChannels-module_shareNotOwner_imImM",switchTitle:"ShareChannels-module_switchTitle_dS9uP",selectOption:"ShareChannels-module_selectOption_W3LKu",collaboratorContent:"ShareChannels-module_collaboratorContent_0fEPi",shareQrCodeContent:"ShareChannels-module_shareQrCodeContent_14F29",shareQrCodeArea:"ShareChannels-module_shareQrCodeArea_crX+x",shareQrCodeButton:"ShareChannels-module_shareQrCodeButton_xGFZ6"}},3346:function(e,t,r){"use strict";t.a={sharePanel:"styles-module_sharePanel_Sxg7e",main:"styles-module_main_yGeSJ",mainIntro:"styles-module_mainIntro_U4BmK",firstItem:"styles-module_firstItem_oD4je",inviteItem:"styles-module_inviteItem_NZWji",shareDescText:"styles-module_shareDescText_Aj+aY",itemTitle:"styles-module_itemTitle_HBJAz",memberBadge:"styles-module_memberBadge_tyo4x",memberAbleIcon:"styles-module_memberAbleIcon_Qqdnq",itemIcon:"styles-module_itemIcon_x0RNY",appointIcon:"styles-module_appointIcon_4sk+S",publicIcon:"styles-module_publicIcon_zEz8l",inviteIconLi:"styles-module_inviteIconLi_8F87a",dot:"styles-module_dot_Z8pRl",inviteIcon:"styles-module_inviteIcon_+3x-U",shareLinkSet:"styles-module_shareLinkSet_k942E",description:"styles-module_description_j9YFu",shareLinkShow:"styles-module_shareLinkShow_bMh8i",qrCode:"styles-module_qrCode_suE8x",shareButton:"styles-module_shareButton_L93gj",sharePublic:"styles-module_sharePublic_495Qd",shareQrCode:"styles-module_shareQrCode_xBxWb",shareQrCodeIcon:"styles-module_shareQrCodeIcon_uR90f",moreConfigs:"styles-module_moreConfigs_qgWYG",loadingIcon:"styles-module_loadingIcon_pQzuM",popover:"styles-module_popover_9iY7y"}},3373:function(e,t,r){"use strict";var n=r(81),o=r.n(n),a=(r(2928),r(1238)),i=r(58),c=r.n(i),u=r(86),l=r.n(u),s=r(0),f=r.n(s),p=r(2),h=r.n(p),d=r(5),y=r.n(d),m=r(87),v=r.n(m),g=(r(3193),["className"]);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=f.a.forwardRef((function(e,t){var r=e.className,n=l()(e,g);return f.a.createElement(a.a,c()({className:y()("larkui-breadcrumb",r),ref:t},n))}));_.propTypes=w(w({},a.a.BreadcrumbProps),{},{className:h.a.string}),v()(_,a.a),t.a=_},3380:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return p})),r.d(t,"b",(function(){return h}));var n=r(95),o=r(99),a=r(492),i=r(810),c=r.n(i);function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s={organization:n.default.ROLE,group:o.default.ROLE,book:a.default.ROLE,doc:a.default.ROLE,list:c.a.ROLE};function f(e){var t=s[e],r={};return"organization"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),"outsourcer"===r&&(n.label=__("外部联系人")),e[r]=n,e}),{}):"group"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),"readonly"===r&&(n.label=__("只读成员")),e[r]=n,e}),{}):"book"===e||"doc"===e?r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"readonly"===r&&(n.label=__("可阅读"),e[r]=n),"edit"===r&&(n.label=__("可编辑"),e[r]=n),e}),{}):"list"===e&&(r=Object.keys(t).reduce((function(e,r){var n={key:r,value:t[r]};return"owner"===r&&(n.label=__("管理员")),"member"===r&&(n.label=__("成员")),e[r]=n,e}),{})),r}function p(e){var t=f(e);return["owner","member","edit","readonly","outsourcer"].map((function(e){return t[e]})).filter((function(e){return!!e}))}function h(e,t){var r,n=f(e),o=u(Object.keys(n).map((function(e){return n[e]})));try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.value===t)return a}}catch(e){o.e(e)}finally{o.f()}return{}}},3382:function(e,t,r){"use strict";r(41);var n=r(10),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(469),l=r(3388),s=r(3389),f=r(3428),p=r(496),h=r.n(p),d=r(3338),y=r.n(d),m=r(51),v=r(57),g=r(3316);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(){O=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new D(n||[]);return o(i,"_invoke",{value:L(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function w(){}var _={};l(_,i,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(C([])));E&&E!==r&&n.call(E,i)&&(_=E);var k=w.prototype=v.prototype=Object.create(_);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==b(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=p;return function(a,i){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(b(t)+" is not iterable")}return g.prototype=w,o(k,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=l(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},j(x.prototype),l(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(k),l(k,u,"Generator"),l(k,i,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function S(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){S(a,n,o,i,c,"next",e)}function c(e){S(a,n,o,i,c,"throw",e)}i(void 0)}))}}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N(n.key),n)}}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var o=T(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}(this,r)}}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function P(e,t,r){return(t=N(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(a,e);var t,r,n,o=x(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),P(L(t=o.call(this,e)),"enableDepthAll",(function(){return!1})),P(L(t),"getIconUrl",(function(){var e=window.appData,t=e.isYuque,r=e.corp,n=e.organization,o={buc:"https://gw.alipayobjects.com/zos/bmw-prod/8d7f7670-2c26-4ba5-bb0f-fb124e7f9fc8.svg",dingtalk:"https://gw.alipayobjects.com/zos/bmw-prod/4c033358-95df-4e2a-b468-89fe697fc03d.svg",wechat:"https://gw.alipayobjects.com/zos/bmw-prod/8f2f3dae-cc7c-455c-9579-ed042085da7d.svg"};return t?r?o[r.type]:n&&n.logo:o.buc})),P(L(t),"getInitData",E(O().mark((function e(){var r,n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.mine.department({self:!0});case 2:if((n=e.sent)&&0!==n.length){e.next=9;break}return e.next=6,t.getTopData();case 6:r=e.sent,e.next=10;break;case 9:r=t.getData(n[n.length-1]);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))),P(L(t),"fetchCache",function(){var e=E(O().mark((function e(r,n){return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cacheFetch[r]){e.next=5;break}return e.next=4,n();case 4:t.cacheFetch[r]=e.sent;case 5:return e.abrupt("return",h()(t.cacheFetch[r]));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),P(L(t),"getData",E(O().mark((function e(){var r,n,o,a,i,c,u,l=arguments;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},o=(r=l.length>0&&void 0!==l[0]?l[0]:{}).id,!r.getTop){e.next=9;break}return e.next=6,t.getTopData();case 6:return a=e.sent,n.users=t.adpatUIListData(a),e.abrupt("return",n);case 9:if(!(t.enableDepthAll()&&t.isDepartment(r))&&!t.cacheDepthRes[o]){e.next=15;break}return e.next=13,t.getDataWithDepth(r);case 13:return i=e.sent,e.abrupt("return",i);case 15:return c={id:o},e.next=18,t.fetchCache(o,E(O().mark((function e(){var t;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.users.department(c);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))));case 18:return(u=e.sent).parents&&u.parents.forEach((function(e){e&&(t.cacheParent[e.id]=e)})),n=t.serialize(u),t.cacheDeps[o]=n,e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))),P(L(t),"getDataWithDepth",E(O().mark((function e(){var r,n,o,a,i,c,u,l=arguments;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(r=l.length>0&&void 0!==l[0]?l[0]:{}).id,o={id:n,depth:"all"},a=h()(t.cacheDepthRes),a[n]){e.next=12;break}return e.next=8,m.a.users.department(o);case 8:i=e.sent,t.cacheDepthRes=h()(_(_({},t.cacheDepthRes),i)),e.next=13;break;case 12:i=h()(a);case 13:return t.includeUserCount(i),(c=Object.keys(i)).forEach((function(e){var r=i[e].parent;r&&(t.cacheParent[e]=r)})),c.forEach((function(e){var r=i[e];r.parent=t.cacheParent[e],t.cacheDeps[e]=t.serialize(r)})),u=t.cacheDeps[n],r.name&&(u._name=r._name||r.name,u.name="".concat(u._name," (").concat(u.user_count,")")),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e)})))),P(L(t),"adpatUIListData",(function(e){return e.map((function(e){var r=t.cacheDeps[e.id];t.setUid(e);var n={uid:e.uid,id:e.id,avatar_url:e.avatar_url,name:e.name,_name:e._name||e.name,user_id:e.user_id,work_id:e.work_id,login:e.login,type:e.type||"User",provider_type:e.provider_type,provider_userid:e.provider_userid,iconName:e.iconName,isTop:e.isTop,lastName:e.lastName};return r&&"user_count"in r&&(n.user_count=r.user_count,n.name="".concat(n._name," (").concat(n.user_count,")")),!e.isTop&&t.isDepartment(e)?n.sub=e:e.manageDepartment&&(n.sub=e.manageDepartment),n}))})),P(L(t),"adpatUINavData",(function(e){if(e){var r=[];if(Array.isArray(e))r=e;else{r.push(e);!function e(n){if(n.parentDepId){var o=t.cacheParent[n.parentDepId];if(!o)return;Array.isArray(o)?r=o.concat(r):(r.unshift(o),e(o))}}(e)}return r.map((function(e){return e.manageDepartment?{uid:"nav_".concat(e.manageDepartment.id),id:e.manageDepartment.id,name:e.manageDepartment.name,type:"Department"}:{uid:"nav_".concat(e.id),id:e.id,name:e.name,type:"Department"}}))}})),P(L(t),"getTopData",E(O().mark((function e(){var t,r,n,o,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.mine.department({self:!0});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return t=e.t0,window.appData.isYuque||(o=[],0===(null===(r=window.appData.me)||void 0===r?void 0:r.zone_id)&&(o=[{id:"12503",name:__("阿里巴巴"),iconName:"organization",type:"Department"}]),1===(null===(n=window.appData.me)||void 0===n?void 0:n.zone_id)&&(o=[{id:"8430",name:__("蚂蚁金服"),iconName:"organization",type:"Department"},{id:"134318",name:__("网商银行"),iconName:"organization",type:"Department"}]),(a=t[0])&&(a.iconName="department",a.type="Department",o.push(a)),t=o),t=t.map((function(e){return e.isTop=!0,e.type="Department",e})),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))),P(L(t),"getAllDepUsers",function(){var e=E(O().mark((function e(r){var n,o,a,i,c,u,l;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,!(o=t.cacheDeps[n])){e.next=4;break}return e.abrupt("return",o);case 4:return e.next=6,m.a.user.searchAllDepUsers({id:n});case 6:for(a=e.sent,i=Object.keys(a.data),c=0,u=i;c<u.length;c++)l=u[c],t.cacheDeps[l]=a.data[l];return e.abrupt("return",a.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P(L(t),"getDepUsers",function(){var e=E(O().mark((function e(r){var n,o,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,!(o=t.cacheDeps[n])){e.next=4;break}return e.abrupt("return",o);case 4:return e.next=6,m.a.user.userServices.searchDepUsers({id:n});case 6:return a=e.sent,t.cacheDeps[n]=a.data,e.abrupt("return",a.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P(L(t),"getRealUsers",(function(e){return y()(e,"uid")})),t.cacheDeps={},t.cacheParent={},t.cacheFetch={},t.cacheDepthRes={},t.enable=!1,t}return t=a,r=[{key:"check",value:function(){v.a.enableAddressbook()&&!v.a.enableContacts()&&(this.enable=!0)}},{key:"includeUserCount",value:function(e){var t=this;Object.keys(this.cacheDeps).forEach((function(e){t.cacheDeps[e].user_count=0})),Object.keys(e).forEach((function(r){var n=e[r];if(!Array.isArray(n)){if(n.user_count=(n.user_count||0)+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.users.filter((function(e){return"user"===e.type}));if(!e.depthUsers||!e.depthUsers.length)return t.length;var r=e.depthUsers.reduce((function(e,t){return e[t.uid]=t,e}),{});return t.filter((function(e){return!r[e.uid]})).length}(n),n.parent){var o=e[n.parent.parentDepId]||t.cacheDeps[n.parent.parentDepId];o&&(o.user_count=(o.user_count||0)+n.user_count,o.depthUsers=(o.depthUsers||[]).concat(n.users.filter((function(e){return t.isUser(e)}))),e[n.parent.parentDepId]=o,t.cacheDeps[n.parent.parentDepId]=o)}t.cacheDeps[r]=n}}))}}],n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],r&&k(t.prototype,r),n&&k(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);P(D,"id","addrbook"),P(D,"title",__("组织架构")),P(D,"iconName","architecture");var C=D;function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function I(){I=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,i)&&(w=O);var S=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==A(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=p;return function(a,i){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=x(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(A(t)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function R(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function U(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){R(a,n,o,i,c,"next",e)}function c(e){R(a,n,o,i,c,"throw",e)}i(void 0)}))}}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y(n.key),n)}}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=B(e);if(t){var o=B(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}(this,r)}}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function q(e,t,r){return(t=Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(a,e);var t,r,n,o=M(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),q(G(e=o.call(this,t)),"getIconUrl",(function(){return e.organization.logo})),q(G(e),"getInitData",U(I().mark((function t(){var r;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),q(G(e),"getData",U(I().mark((function t(){var r,n;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cache){t.next=2;break}return t.abrupt("return",e.cache);case 2:return t.next=4,m.a.organizationUsers.find({organization_id:e.organization.id,user_role:2,status:1,offset:0,limit:500});case 4:return r=t.sent,n=e.serialize({users:r}),e.cache=n,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))),q(G(e),"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.organization=t.organization||window.appData.organization,e}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){this.organization&&this.organization.abilities&&this.organization.abilities.read||(this.enable=!1)}}])&&z(t.prototype,r),n&&z(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);q(W,"id","outsourcer"),q(W,"title",__("外部联系人")),q(W,"iconName","external-contacts");var V=W;function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Q(){Q=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,i)&&(w=O);var S=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==K(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=p;return function(a,i){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=x(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(K(t)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function H(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){H(a,n,o,i,c,"next",e)}function c(e){H(a,n,o,i,c,"throw",e)}i(void 0)}))}}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ne(n.key),n)}}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=te(e);if(t){var o=te(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}(this,r)}}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function re(e,t,r){return(t=ne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){var t=function(e,t){if("object"!==K(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===K(t)?t:String(t)}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(a,e);var t,r,n,o=X(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),re(ee(e=o.call(this,t)),"getIconUrl",(function(){return e.organization.logo})),re(ee(e),"getInitData",Z(Q().mark((function t(){var r;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),re(ee(e),"getData",Z(Q().mark((function t(){var r,n;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.cache){t.next=2;break}return t.abrupt("return",e.cache);case 2:return t.next=4,m.a.organizationUsers.find({organization_id:e.organization.id,user_role:"0,1",status:1,offset:0,limit:500});case 4:return r=t.sent,n=e.serialize({users:r}),e.cache=n,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))),re(ee(e),"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.organization=t.organization||window.appData.organization,e.cache=null,e}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){this.organization&&this.organization.abilities&&this.organization.abilities.read&&!v.a.enableContacts()||(this.enable=!1)}}])&&J(t.prototype,r),n&&J(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);re(oe,"id","orgMember"),re(oe,"title",__("空间成员"));var ae=oe,ie=r(154),ce=r(3380),ue=r(3326);function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function se(){se=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,i)&&(w=O);var S=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==le(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=p;return function(a,i){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=x(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(le(t)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function fe(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function pe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){fe(a,n,o,i,c,"next",e)}function c(e){fe(a,n,o,i,c,"throw",e)}i(void 0)}))}}function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,be(n.key),n)}}function de(e,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},de(e,t)}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ve(e);if(t){var o=ve(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return me(e)}(this,r)}}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}function ge(e,t,r){return(t=be(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e){var t=function(e,t){if("object"!==le(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===le(t)?t:String(t)}var we=ue.memberSelectorType.SIMPLE_WITH_ROLE,_e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(a,e);var t,r,n,o=ye(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),ge(me(e=o.call(this,t)),"getIconUrl",(function(){return e.group.avatar_url})),ge(me(e),"getIconName",(function(){return e.group.name})),ge(me(e),"getFilterRoles",(function(){var t=Object(ce.c)("group");return t.unshift(e.allRoleObj),t})),ge(me(e),"getInitData",pe(se().mark((function t(){var r;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))),ge(me(e),"getData",pe(se().mark((function t(){var r,n,o,a,i,c=arguments;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="role_".concat((r=c.length>0&&void 0!==c[0]?c[0]:{}).role),!e.cache[n]){t.next=4;break}return t.abrupt("return",e.cache[n]);case 4:return o={id:e.group.id,offset:0,limit:500},"role"in r&&(o.role=r.role),t.next=8,m.a.groups.users(o);case 8:return a=t.sent,i=e.serialize({users:a}),e.cache[n]=i,t.abrupt("return",i);case 12:case"end":return t.stop()}}),t)})))),ge(me(e),"adpatUIListData",(function(t){return t.map((function(t){var r=t.user;return e.setUid(t),{uid:t.uid,id:t.id,avatar_url:r.avatar_url,name:r.name,user_id:r.id,work_id:r.work_id,login:r.login,type:r.type,provider_type:r.provider_type,provider_userid:r.provider_userid}}))})),e.group=t.group||window.appData.group,e.cache={},e.allRoleObj={key:-1,label:__("全部")},e}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){this.group&&this.group.abilities&&this.group.abilities.read&&this.type!==we||(this.enable=!1)}}])&&he(t.prototype,r),n&&he(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);ge(_e,"id","groupuser"),ge(_e,"title",ie.a.isPublication(window.appData.group)?__("知识小组成员"):__("团队成员")),ge(_e,"iconName","nav-team1");var Oe=_e,Se=r(95),Ee=r(348);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Le(n.key),n)}}function xe(e,t,r){return(t=Le(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e){var t=function(e,t){if("object"!==ke(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ke(t)?t:String(t)}var Te=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xe(this,"getUploadProps",(function(){return{name:"file",action:r.action,headers:{"x-csrf-token":Object(Ee.a)(window,!0)},onChange:function(e){var t=this;if("done"===e.file.status){var r=e.file.response.data;n.a.success(__("通过 {mobiles} 手机号码成功邀请 {members} 位注册用户，还有 {temp_members} 位用户没有注册语雀",{mobiles:r.mobiles,members:r.members,temp_members:r.temp_members})),setTimeout((function(){window.location.href=t.goto}),3e3)}else"error"===e.file.status&&n.a.error(e.file.response.message||"".concat(e.file.name," file upload failed."))}}})),xe(this,"getBtnText",(function(){return r.btnText})),this.options=t,this.type=t.type,this.organization=t.organization,this.role=t.supportRoles&&t.supportRoles[0],this.target=t[this.type],this.enable=!1}var t,r,o;return t=e,o=[{key:"create",value:function(t){var r=new e(t);return r.check(),r.enable&&r.init(),r}}],(r=[{key:"init",value:function(){if("organization"===this.type){this.action="/api/organization_users/import?role=".concat(this.role,"&organization_id=").concat(this.organization.id);var e=this.role===Se.default.ROLE.outsourcer?"external":"all";this.goto="/r/organizations/dashboard/members?role=".concat(e),this.btnText=this.role===Se.default.ROLE.outsourcer?__("批量导入外部联系人"):__("批量导入空间成员")}}},{key:"check",value:function(){this.target&&this.target.enableAdvancedFeature&&(this.enable=!0)}}])&&je(t.prototype,r),o&&je(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();xe(Te,"id","import"),xe(Te,"title",__("导入"));var Pe=Te,Ne=r(420);function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Ce(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){We(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ue(){Ue=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,i)&&(w=O);var S=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==De(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=p;return function(a,i){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=x(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(De(t)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ze(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Fe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ze(a,n,o,i,c,"next",e)}function c(e){ze(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ve(n.key),n)}}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ye(e);if(t){var o=Ye(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qe(e)}(this,r)}}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}function We(e,t,r){return(t=Ve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ve(e){var t=function(e,t){if("object"!==De(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===De(t)?t:String(t)}var Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(a,e);var t,r,n,o=Be(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),We(qe(t=o.call(this,e)),"getIconUrl",(function(){var e=window.appData.organization;return e&&e.logo})),We(qe(t),"enableDepthAll",(function(){return!0})),We(qe(t),"getInitData",Fe(Ue().mark((function e(){var r,n,o,a,i,c,u,l,s,f,p;return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.appData.organization,e.next=3,m.a.mine.department({self:!0},{useOriginResp:!0});case 3:if(n=e.sent,o={id:0,name:r.name,type:"Department",parents:[],getTop:!0},n.length)for(o=n[0],null!==(a=n[0])&&void 0!==a&&a.dept_full_path&&(o.parents=null===(c=n[0])||void 0===c?void 0:c.dept_full_path),u=null===(i=o)||void 0===i?void 0:i.parents.findIndex((function(e){return e.id===o.id})),u>=0&&o.parents.splice(u,1),l=0;l<(null===(s=o)||void 0===s||null===(f=s.parents)||void 0===f?void 0:f.length);l++)o.parents[l].parents=o.parents.slice(0,l);return e.next=8,t.getData(o);case 8:return p=e.sent,e.abrupt("return",p);case 10:case"end":return e.stop()}}),e)})))),We(qe(t),"fetchCache",function(){var e=Fe(Ue().mark((function e(r,n){return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.cacheFetch[r]){e.next=5;break}return e.next=4,n();case 4:t.cacheFetch[r]=e.sent;case 5:return e.abrupt("return",h()(t.cacheFetch[r]));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),We(qe(t),"getDepUsers",function(){var e=Fe(Ue().mark((function e(r){var n,o,a,i;return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.id,o=r.organization_id,!(a=t.cacheDeps[n])){e.next=4;break}return e.abrupt("return",a);case 4:return e.next=6,m.a.departmentUser.find({department_id:n,organization_id:o,onlyMember:1});case 6:return i=e.sent,t.cacheDeps[n]=i.data,e.abrupt("return",i.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),We(qe(t),"getData",Fe(Ue().mark((function e(){var r,n,o,a,i,c,u,l,s,f=arguments;return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Re({},r=f.length>0&&void 0!==f[0]?f[0]:{}),r){e.next=4;break}return e.abrupt("return",[]);case 4:if(o=r.id,r.getTop&&(o=0),!t.cacheDeps[o]){e.next=8;break}return e.abrupt("return",t.cacheDeps[o]);case 8:return a=window.appData.organization,i=void 0===a?{}:a,e.next=11,m.a.departments.find({parent_id:o,depth:1,withMemberCount:1});case 11:if(c=e.sent,u=r.users){e.next=17;break}return e.next=16,m.a.departmentUser.find({department_id:o,organization_id:i.id,onlyMember:1});case 16:u=e.sent;case 17:return e.next=19,Promise.all(c.map(function(){var e=Fe(Ue().mark((function e(t){return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.type="Department",t.parents=r.parents.concat(r),void 0!==t.member_count&&(t._name=t.name,t.name="".concat(t.name),t.login="(".concat(__("{num} 人",{num:t.member_count}),")"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:l=Ce(u);try{for(l.s();!(s=l.n()).done;)s.value.type="User"}catch(e){l.e(e)}finally{l.f()}return n.users=c.concat(u),n.parents=r.parents.concat(r),n._name||void 0===n.member_count||(n._name=n.name,n.name="".concat(n.name,"(").concat(__("{num} 人",{num:n.member_count}),")")),((n=t.serialize(n)).member_count||0===o)&&(t.cacheDeps[o]=n),e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})))),We(qe(t),"adpatUIListData",(function(e){return e.map((function(e){t.setUid(e);var r=t.isUser(e)&&void 0!==e.status&&e.status!==Se.STATUS.joined;t.disableDepSelect&&t.isDepartment(e)&&(r=!0);var n={uid:t.isDepartment(e)?"nav_".concat(e.id):e.uid,id:e.id,avatar_url:t.isUser(e)?e.avatar||"//gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png?x-oss-process=image%2Fresize%2Cm_fill%2Cw_64%2Ch_64%2Fformat%2Cpng":Ne.avatar.department,name:e.name,_name:e._name,user_id:e.user_id,login:e.login,type:e.type||"User",iconName:e.iconName,isTop:e.isTop,disabled:r,parents:e.parents,_login:e.login,users:e.users,organization_id:e.organization_id,member_count:e.member_count};return!e.isTop&&t.isDepartment(e)?n.sub=e:e.manageDepartment&&(n.sub=e.manageDepartment),n}))})),We(qe(t),"adpatUINavData",(function(e){if(e){var r=[];if(Array.isArray(e))r=e;else{r.push(e);!function e(n){if(n.parentDepId){var o=t.cacheParent[n.parentDepId];if(!o)return;Array.isArray(o)?r=o.concat(r):(r.unshift(o),e(o))}}(e)}return r.map((function(e){return{uid:"nav_".concat(e.id),id:e.id,name:e._name||e.name,type:"Department",parents:e.parents}}))}})),We(qe(t),"getUserCount",(function(e){var r,n=0,o=Ce(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;t.isDepartment(a)?a.member_count&&(n+=a.member_count):n+=1}}catch(e){o.e(e)}finally{o.f()}return n})),We(qe(t),"getRealUsers",function(){var e=Fe(Ue().mark((function e(r){var n,o,a,i,c,u,l;return Ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=Ce(r),e.prev=2,o.s();case 4:if((a=o.n()).done){e.next=22;break}if(i=a.value,!t.isDepartment(i)){e.next=19;break}if(!i.depthUsers&&!i.users){e.next=11;break}n=n.concat(i.depthUsers||i.users),e.next=17;break;case 11:return c=i.id,u=i.organization_id,e.next=14,m.a.departmentUser.getAllSubDepartmentUsers({department_id:c,organization_id:u});case 14:l=e.sent,t.setUid(l),n=n.concat(l);case 17:e.next=20;break;case 19:n.push(i);case 20:e.next=4;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),o.e(e.t0);case 27:return e.prev=27,o.f(),e.finish(27);case 30:return e.abrupt("return",y()(n,"uid"));case 31:case"end":return e.stop()}}),e,null,[[2,24,27,30]])})));return function(t){return e.apply(this,arguments)}}()),t.cacheDeps={},t.cacheParent={},t.cacheFetch={},t.cacheDepthRes={},t.enable=!1,t.disableDepSelect=e.disableDepSelect,t}return t=a,n=[{key:"create",value:function(e){var t=new a(e);return t.check(),t}}],(r=[{key:"check",value:function(){v.a.enableContacts()&&(this.enable=!0)}}])&&Me(t.prototype,r),n&&Me(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g.a);We(Ke,"id","yuque_contacts"),We(Ke,"title",__("组织架构")),We(Ke,"iconName","architecture");var Qe=Ke,He=r(229),Ze=r(3390);function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function et(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Je(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Je(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var nt=ue.memberSelectorType.ORGANIZATION,ot=ue.memberSelectorType.GROUP,at=ue.memberSelectorType.BOOK,it=ue.memberSelectorType.DOC,ct=ue.memberSelectorType.SIMPLE_WITH_ROLE,ut=ue.memberSelectorType.LIST,lt=ue.memberSelectorType.SIMPLE;var st=a.a.forwardRef((function(e,t){var r=a.a.useRef(null),i=function(e,t){var r,i={type:e.type};e.organization&&(i.organization=e.organization),e.group&&(i.group=e.group),e.book&&(i.book=e.book),e.doc&&(i.doc=e.doc),e.list&&(i.list=e.list),e.role&&(i.supportRoles=[e.role]),e.members&&(i.members=e.members),e.disableDepSelect&&(i.disableDepSelect=e.disableDepSelect);var c,u=tt(Object(o.useState)(null),2),l=u[0],p=u[1],h=tt(Object(o.useState)(null),2),d=h[0],y=h[1],m=!window.appData.isYuque,v=e.group&&"User"===e.group.type,g=Object(o.useMemo)((function(){return e.type===nt?null:C.create(i)}),[i]),b=Object(o.useMemo)((function(){return e.type===nt?null:Qe.create(i)}),[i]),w=Object(o.useMemo)((function(){var t=Xe(Xe({},i),{},{dataSourceServices:[]});return g&&g.enable&&t.dataSourceServices.push(g),b&&b.enable&&t.dataSourceServices.push(b),e.type===ct&&(t.me=e.me),s.a.create(t)}),[i]),_=Object(o.useMemo)((function(){return f.a.create(i)}),[i]),O=Object(o.useMemo)((function(){return e.type===nt?null:V.create(i)}),[i]),S=Object(o.useMemo)((function(){return e.type===nt?null:ae.create(i)}),[i]),E=Object(o.useMemo)((function(){return e.type===ot||e.type===nt?null:Oe.create(i)}),[i]),k=Object(o.useMemo)((function(){return e.type!==nt?null:Pe.create(i)}),[i]),j=[],x=[];if(g&&g.enable&&(!e.disableSelectors||!e.disableSelectors.includes("addrbook"))){var L=null!=e.enableDepSelect?e.enableDepSelect:g.enableDepSelect();g.componentType="ListSelector",g.componentProps={id:C.id,title:C.title,iconName:C.iconName,getData:g.getData,getInitData:g.getInitData,getIconUrl:g.getIconUrl,getIconName:g.getIconName,enableDepthAll:g.enableDepthAll(),enableSelectNav:L,checkValid:w.checkValid,enableMemberTypeSwitch:!window.appData.isYuque},x.push(g)}if(!b||!b.enable||e.disableSelectors&&e.disableSelectors.includes("yuque_contacts_selector")||(b.componentType="ListSelector",b.componentProps={id:Qe.id,title:Qe.title,iconName:Qe.iconName,getData:b.getData,getInitData:b.getInitData,getIconUrl:b.getIconUrl,getIconName:b.getIconName,enableDepthAll:b.enableDepthAll(),checkValid:w.checkValid,disableNavTop:!0},x.push(b)),S&&S.enable&&(S.componentType="ListSelector",S.componentProps={id:ae.id,title:ae.title,getData:S.getData,getInitData:S.getInitData,getIconUrl:S.getIconUrl,getIconName:S.getIconName,checkValid:w.checkValid},x.push(S)),O&&O.enable&&(O.componentType="ListSelector",O.componentProps={id:V.id,title:V.title,iconName:V.iconName,getData:O.getData,getInitData:O.getInitData,getIconUrl:O.getIconUrl,getIconName:O.getIconName,checkValid:w.checkValid},x.push(O)),E&&E.enable&&!v&&(E.componentType="ListSelector",E.componentProps={id:Oe.id,title:Oe.title,iconName:Oe.iconName,getData:E.getData,getInitData:E.getInitData,getIconUrl:E.getIconUrl,getIconName:E.getIconName,getFilterRoles:E.getFilterRoles,checkValid:w.checkValid},x.push(E)),_&&_.enable&&(_.componentType="InviteSelector",_.componentProps={id:f.a.id,title:f.a.title,inviteSelectorType:e.type,inviteTarget:e[e.type],group:e.group,organization:e.organization,roleSelectorType:"radio",getJoinUrl:_.getUrl,getToken:_.getToken,updateToken:_.updateToken,deleteTokens:_.deleteTokens,roles:_.validRoles,inviteRoles:d,getCopyText:_.getCopyText,tipContent:l,actionTipText:"book"===e.type?__("访问链接即可获得权限："):null,moreSettingOptions:_.getMoreSettingOptions(),toggleTitle:function(e){t&&t.current&&t.current.toggleTitle(e)}},j.push(_)),w&&w.enable){var T;window.appData.organization&&(T=a.a.createElement(Ze.a,null));var P=e.roleSelector;w.componentType="SearchSelector",w.componentProps={id:s.a.id,title:s.a.title,searchUser:w.searchUser,getUserCount:w.getUserCount,checkValid:w.checkValid,onSubmit:w.submit,roles:w.validRoles,inviteRoles:d,quickSelectors:x,notFoundContent:T,actionTipText:"book"===e.type?__("权限："):null,roleSelector:P,getDefaultUsers:e.getDefaultUsers||w.searchUsersByIds,afterSubmit:e.afterSubmit},e.type===lt&&(w.componentProps.disableMeta=g.enableDepSelect(),w.componentProps.onSubmit=e.onSubmit),window.appData.isYuque||(w.componentProps.disableMeta=g.enableDepSelect()),e.type===ct&&(w.componentProps.title=e.title,w.componentProps.roles=e.roles,w.componentProps.onSubmit=e.onSubmit,e.initialValues&&(w.componentProps.initialValues=e.initialValues)),j.push(w)}return k&&k.enable&&(k.componentType="ImportSelector",k.componentProps={id:Pe.id,title:Pe.title,role:k.role,getUploadProps:k.getUploadProps,getBtnText:k.getBtnText},j.push(k)),Object(o.useEffect)((function(){_&&_.enable&&(window.appData.organization&&[ot,at,it].includes(e.type)&&_.orgDataReady().then((function(){p(a.a.createElement("div",null,a.a.createElement("span",null,_.getOrgTipText()),a.a.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/csb5nu",target:"_blank"},_.canPublic?__("关闭邀请空间外人员?"):__("邀请空间外成员?"))))})),_.getInviteAddRoles().then((function(e){y(e)})).catch((function(e){n.a.error(e.message)})))}),[]),null!==(r=e.organization)&&void 0!==r&&r.id||!Object(He.a)()||[lt,ct,ot].includes(e.type)?c=s.a.id:[at,it,nt,ut].includes(e.type)&&(c=f.a.id),{enableMemberTypeSwitch:m,selectors:j,quickSelectors:x,defaultTabKey:c,wideTabKey:s.a.id,addrbookSelectorBiz:g,searchSelectorBiz:w,inviteSelectorBiz:_,outsourcerSelectorBiz:O,orgMemberSelectorBiz:S,groupUserSelectorBiz:E,importSelectorBiz:k,yuqueContactsSelectorBiz:b}}(e,r),c=i.selectors,u=i.quickSelectors,p=i.defaultTabKey,h=i.wideTabKey,d=i.searchSelectorBiz;if(a.a.useImperativeHandle(t,(function(){return{searchSelectorBiz:d}}),[]),!c.length)return null;var y=c.map((function(e){var t=l.a[e.componentType];return t?(e.componentProps.quickSelectors&&(e.componentProps.quickSelectors=e.componentProps.quickSelectors.map((function(e){var t=l.a[e.componentType];return t?a.a.createElement(t,e.componentProps):null})).filter((function(e){return!!e}))),a.a.createElement(t,e.componentProps)):null})).filter((function(e){return!!e}));return a.a.createElement(l.a,{titleRef:r,selectors:y,getWidth:function(e){return e===h&&u&&u.length>0?720:420},defaultTabKey:p,onCancel:e.onCancel,onClose:e.onClose,visible:e.visible})}));st.defaultProps={disableSelectors:[]},st.propTypes={type:c.a.string,organization:c.a.object,role:c.a.oneOf([0,1,2]),onCancel:c.a.func,onClose:c.a.func,visible:c.a.bool,disableSelectors:c.a.array,disableDepSelect:c.a.bool};t.a=Object(u.d)((function(e){return{organization:e.organization,group:e.group,book:e.book,doc:e.doc,me:e.me}}),null,null,{forwardRef:!0})(st)},3388:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(2),i=r.n(a),c=(r(71),r(31)),u=(r(489),r(98)),l=r(57);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e){return"larkui-member-selector-container".concat(e?"-".concat(e):"")},h=o.a.forwardRef((function(e,t){var r=window.appData.organization,a=e.selectors,i=l.a.isOutsourcer(r),f=i?a.filter((function(e){return"invite"===e.props.id})):a,h=s(Object(n.useState)(!0),2),d=h[0],y=h[1],m=s(Object(n.useState)(i?"invite":e.defaultTabKey),2),v=m[0],g=m[1],b=s(Object(n.useState)(460),2),w=b[0],_=b[1],O=function(e){g(e.key)};Object(n.useEffect)((function(){_(e.getWidth(v)||460)}),[v]),o.a.useImperativeHandle(t,(function(){return{toggleTitle:function(e){y(e)}}}));return o.a.createElement(c.a,{wrapClassName:p(),visible:e.visible,width:w,title:o.a.createElement(o.a.Fragment,null,d?o.a.createElement("div",{className:p("select-by")},o.a.createElement(u.a,{onSelect:O,selectedKeys:[v],mode:"horizontal"},f.map((function(e){return o.a.createElement(u.a.Item,{key:e.props.id},__("{title}",{title:e.props.title}))})))):null),footer:null,maskClosable:!1,onCancel:e.onCancel,onClose:e.onClose,destroyOnClose:!0},f.filter((function(e){return e.props.id===v}))[0])}));h.defaultProps={selectors:[],getWidth:function(){},onCancel:function(){},onClose:function(){}},h.propTypes={selectors:i.a.arrayOf(i.a.node),getWidth:i.a.func,defaultTabKey:i.a.string,onCancel:i.a.func,onClose:i.a.func,visible:i.a.bool};var d=h,y=(r(131),r(43)),m=(r(142),r(28)),v=(r(42),r(9)),g=(r(1001),r(583)),b=(r(151),r(66)),w=(r(3192),r(3331)),_=r(1615),O=r(45),S=(r(581),r(301)),E=(r(209),r(34)),k=r(1210),j=r(714);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e){return"larkui-member-selector-role".concat(e?"-".concat(e):"")};function P(e){var t=e.roles,r=e.onChange,a=e.defaultRole||t&&t[0],i=x(Object(n.useState)(a),2),c=i[0],l=i[1];if(c){var s=function(e){l(e),r(e)};return"radio"===e.type?o.a.createElement("div",{className:T("role-select")},o.a.createElement(E.a,{size:"large",defaultValue:c.unique,onChange:function(e){var r=t.find((function(t){return t.unique===e}));s(r)}},null==t?void 0:t.map((function(e){return o.a.createElement(Option,{value:e.unique,disabled:e.disabled},o.a.createElement(b.a,{title:e.disabled?e.disabled_text:null,placement:"top",color:j.themeToken["@white"],overlayInnerStyle:{width:240,color:j.themeToken["@black"]}},o.a.createElement("span",{className:T("role-tip")},e.roleTip),o.a.createElement("span",{className:T("role-label")},e.label)))})))):o.a.createElement(S.a,{trigger:["click"],overlayClassName:T(),overlay:o.a.createElement(u.a,{selectedKeys:["".concat(c.key)]},null==t?void 0:t.map((function(e){return o.a.createElement(u.a.Item,{key:e.key,onClick:function(){s(e)}},o.a.createElement("span",null,o.a.createElement("span",null,e.label)))})))},o.a.createElement("span",null,c.label," ",o.a.createElement(k.default,null)))}}P.propTypes={type:i.a.oneOf(["dropdown","radio"]),defaultRole:i.a.object,roles:i.a.array.isRequired,onChange:i.a.func.isRequired};var N=P,D=(r(361),r(121)),C=r(1734),A=r(491),I=r.n(A),R=r(3393),U=r(420);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=function(e){var t=e.user,r=Object(n.useRef)(null);return o.a.createElement(R.a,{textRef:r,title:t.dep,placement:"bottom"},o.a.createElement("span",{className:"ellipsis-wrapper"},o.a.createElement("span",{ref:r,className:"ellipsis-text"},t.dep)))},G=function(e){return"larkui-member-selector-user-search".concat(e?"-".concat(e):"")},B=E.a.Option;var q=o.a.createElement("div",{className:G("notfound")},o.a.createElement(C.default,null),o.a.createElement("p",null,__("未搜索到相关结果"))),Y=function(e){return e.department||"Department"===e.type},W=function(e){return Y(e)?U.avatar.department:e.avatar_url||"//gw.alipayobjects.com/zos/rmsportal/wYnHWSXDmBhiEmuwXsym.png?x-oss-process=image%2Fresize%2Cm_fill%2Cw_64%2Ch_64%2Fformat%2Cpng"};function V(e){var t,r=e.users,a=e.selectedUsers,i=function(e){var t=z(Object(n.useState)(!1),2),r=t[0],o=t[1],a=z(Object(n.useState)(!1),2),i=a[0],c=a[1],u=e.getUsers,l=e.onChange,s=Object(n.useRef)(null),f=I()((function(e){return o(!0),c(!1),u(e).then((function(t){if(o(!1),e&&!(t&&t.length>0))return c(!0),clearTimeout(s.current),s.current=setTimeout((function(){c(!1)}),3e3),t})).catch((function(){o(!1)}))}),300);return{state:{loading:r,fetchEnd:i},handleChange:function(e){l(e)},handleSearch:function(e){f(e)}}}(e),c=i.state,u=i.handleChange,l=i.handleSearch,s=Object(n.useRef)(null),f=e.notFoundContent||q;return Object(n.useEffect)((function(){e.getRef&&e.getRef(s)}),[]),o.a.createElement("div",{className:G()},o.a.createElement(E.a,{ref:s,className:"normal"===e.userClassType?G("container-normal"):G("container"),value:e.value,showSearch:!0,autoFocus:!0,mode:"multiple",placeholder:e.placeholder,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,notFoundContent:!c.loading&&c.fetchEnd?f:null,onSearch:l,onChange:u,getPopupContainer:function(e){return e.parentNode},loading:c.loading,tagRender:e.isLiteSearchSelector?function(e){var t=e.value,r=e.closable,n=e.onClose,i=a.find((function(e){return Y(e)?e.uid===t:e.id===t||e.uid===t}));return i?o.a.createElement(D.a,{icon:Y(i)?o.a.createElement("div",{className:"larkicon larkicon-organization ".concat(G("tag-icon"))}):null,onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:r,onClose:n},i.name):null}:function(e){var t=Object(n.useRef)(null),r=e.value,i=e.closable,c=e.onClose,u=a.find((function(e){return Y(e)?e.uid===r:e.id===r||e.uid===r}));if(!u)return null;return o.a.createElement(D.a,{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:i,onClose:c,className:G("user-selector-tag"),closeIcon:o.a.createElement("span",{className:G("user-selector-tag-close-avatar-wrapper")},o.a.createElement(O.b,{name:"close",size:12,className:G("user-selector-tag-close-avatar")}))},o.a.createElement(w.a,{src:W(u),size:24,className:G("user-selector-tag-avatar")}),o.a.createElement("span",{className:G("user-selector-tag-label")},o.a.createElement(R.a,{textRef:t,title:u.name,placement:"bottom"},o.a.createElement("span",{className:"ellipsis-wrapper"},o.a.createElement("span",{ref:t,className:"ellipsis-text"},u.name)))))}},(t=window.appData.isYuque,null==r?void 0:r.map((function(r){var n=r.dep?G("isdep"):null;return o.a.createElement(B,{key:r.id||r.uid,value:r[e.keyField],label:r.name,className:G("menu-item")},o.a.createElement("span",{className:"".concat(G("user")," ").concat(n)},o.a.createElement(w.a,{className:G("icon"),src:W(r),name:r.name,size:32}),o.a.createElement("span",{className:G("title-wrap")},o.a.createElement("span",{className:G("title")},o.a.createElement("span",{className:G("name")},r.name),t&&r.login&&o.a.createElement("span",{className:G("login")},"(",r.login,")"),!t&&r.lastName&&o.a.createElement("span",{className:G("login")},"(",r.lastName,")")),r.dep&&o.a.createElement("span",{className:G("dep")},o.a.createElement(M,{user:r})))))})))))}V.defaultProps={keyField:"login"},V.propTypes={keyField:i.a.string,value:i.a.array.isRequired,users:i.a.array.isRequired,selectedUsers:i.a.array.isRequired,getUsers:i.a.func.isRequired,onChange:i.a.func.isRequired,getRef:i.a.func,placeholder:i.a.string,notFoundContent:i.a.node};var K=V,Q=(r(41),r(10)),H=r(198);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function J(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ne(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function $(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(){X=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,i)&&(w=O);var S=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Z(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=p;return function(a,i){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=x(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Z(t)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ee(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function te(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ee(a,n,o,i,c,"next",e)}function c(e){ee(a,n,o,i,c,"throw",e)}i(void 0)}))}}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){if(e){if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oe(e,t):void 0}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ae=function(){setTimeout((function(){window.location.reload()}),2e3)},ie="yq_only_staff";function ce(e){var t=e.roles,r=e.searchUser,o=e.checkValid,a=e.getUserCount,i=e.disableMeta,c=e.onSubmit,u=e.afterSubmit,l=void 0===u?ae:u,s=e.initialValues,f=e.onChange,p=e.getDefaultUsers,h=re(Object(n.useState)([]),2),d=h[0],y=h[1],m=re(Object(n.useState)([]),2),v=m[0],g=m[1],b=re(Object(n.useState)(0),2),w=b[0],_=b[1],O=null===H.a||void 0===H.a?void 0:H.a.get(ie),S=re(Object(n.useState)(null===O||O>0),2),E=S[0],k=S[1],j=Object(n.useRef)(t&&t[0]),x=Object(n.useRef)(null),L=Object(n.useRef)([]),T=function(e,t){return!(!e||!t)&&(e.uid&&t.uid?e.uid===t.uid:e.login&&t.login?e.login===t.login:!(!t.provider_userid||!e.provider_userid)&&(e.provider_userid===t.provider_userid&&e.provider_type===t.provider_type))},P=function(){var e=te(X().mark((function e(t){var r,n;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y([]),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,p(t);case 5:return n=e.sent,n=null===(r=n)||void 0===r?void 0:r.filter((function(e){return!v.some((function(t){return T(t,e)}))})),y(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=te(X().mark((function e(t){var n,o;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y([]),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r(t);case 5:return o=e.sent,o=null===(n=o)||void 0===n?void 0:n.filter((function(e){return!v.some((function(t){return T(t,e)}))})),y(o),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){return null==e?void 0:e.map((function(e){return[].concat($(d),$(v)).find((function(t){return t.uid===e}))}))},C=function(e){return null==e?void 0:e.filter((function(e){return e._valid}))},A=Object(n.useCallback)(I()((function(e){var t=e.status;t&&Q.a[t]?Q.a[t](e.message):Q.a.warn(e.message)}),300),[]),R=function(e){return null==e?void 0:e.map((function(e){if("_valid"in e)return e;var t=o(e);return t&&"success"===t.status?e._valid=!0:(e._valid=!1,A(t)),e}))};Object(n.useEffect)((function(){H.a.set(ie,E?1:0)}),[E]),Object(n.useEffect)((function(){function e(){return(e=te(X().mark((function e(){var t,r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(s);case 2:t=e.sent,r=null==(n=t)?void 0:n.map((function(e){return"_valid"in e||(e._valid=!0),e})),g(r),a&&_(a(C(r)));case 6:case"end":return e.stop()}var n}),e)})))).apply(this,arguments)}!s||null!=v&&v.length||function(){e.apply(this,arguments)}()}),[s]);var U=function(e){var t=R(e);g(t),i||_(a(C(t)))},z=function(){var e=te(X().mark((function e(t){var r;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(C(t));case 3:(r=e.sent)&&("success"===r.status?(A(r),setTimeout((function(){window.location.reload()}),2e3)):A(r)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Q.a.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=te(X().mark((function e(){var t;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(C(v),j.current,E);case 2:(t=e.sent)&&("success"===t.status?(A(t),l(t)):A(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{state:{users:d,selected:v,userCount:w,onlyStaff:E},getUsers:N,getRef:function(e){x.current=e.current},disableSubmit:function(){return 0===v.length},handleSelect:function(e){if(x.current){Array.isArray(e)||(e=[e]);var t,r=$(L.current),n=$(v),o=J(e);try{var a=function(){var e=t.value;r.every((function(t){return t.uid!==e.uid}))&&r.push(e),n.every((function(t){return t.uid!==e.uid}))&&n.push(e)};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}y(r),L.current=r,U(n)}},handleDeselect:function(e){if(x.current){Array.isArray(e)||(e=[e]);var t,r=$(v),n=J(e);try{var o=function(){var e=t.value,n=r.findIndex((function(t){return t.uid===e.uid}));n>-1&&r.splice(n,1)};for(n.s();!(t=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}U(r)}},handleChange:function(e){var t=R(D(e)),r=null==t?void 0:t.filter((function(e){return e._valid}));r.length===t.length?(g(t),i||_(a(C(t))),setTimeout((function(){y([])}),300)):g(r)},handleRoleChange:function(e){j.current=e},handleSubmit:F,handleFocus:function(){x.current.focus()},userHandleChange:function(e){var t=R(D(e)),r=null==t?void 0:t.filter((function(e){return e._valid}));(null==r?void 0:r.length)===(null==t?void 0:t.length)?(g(t),setTimeout((function(){y([])}),300),z(t)):g(r)},setOnlyStaff:k}}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var se=function(e){return"larkui-member-selector-search".concat(e?"-".concat(e):"")};function fe(e){return o.a.createElement("span",{className:e.className},__("已选择 {count} 人",{count:e.userCount}))}function pe(e){var t;if(e.roles&&1===e.roles.length)t=o.a.createElement("span",{className:se("role-text")},e.roles[0].label);else{var r=e.roleSelector;t=r?o.a.createElement(r,{roles:e.roles,defaultRole:e.defaultRole,onChange:e.onRoleChange}):o.a.createElement(N,{roles:e.roles,defaultRole:e.defaultRole,onChange:e.onRoleChange})}return o.a.createElement("span",{className:e.className},o.a.createElement("span",null,e.actionTipText||__("添加为：")),t)}function he(e){var t,r,a=e.selectors,i=e.onlyStaff,c=1===a.length,u=c?0:null,l=!window.appData.isYuque,s=ue(Object(n.useState)(u),2),f=s[0],p=s[1],h=null==f&&!c,d=function(e){c||p(e)};return o.a.createElement("div",{className:se("quick-selector-container")},h?o.a.createElement("div",{className:se("quick-selector-choose")},o.a.createElement("h2",{className:se("quick-selector-title")},__("快捷添加")),o.a.createElement("div",{className:se("quick-selector-list")},a.map((function(e,t){return o.a.createElement("div",{key:e.props.id,type:"flex",justify:"start",align:"middle",className:se("quick-selector-item"),onClick:function(){return d(t)}},o.a.createElement(b.a,{placement:"top",title:"outsourcer"===e.props.id&&o.a.createElement("div",null,__("外部联系人用于外部合作场景，管理员可将外部客户或合作伙伴添加为外部联系人。"),o.a.createElement("a",{className:se("outsourcer-tip-link"),href:"https://www.yuque.com/yuque/rvzzxz/uan0vd",target:"_blank"},__("查看详细介绍")))},e.props.iconName&&o.a.createElement(O.b,{className:se("selector-icon"),name:e.props.iconName,size:16}),!e.props.iconName&&e.props.getIconUrl&&o.a.createElement(w.a,{className:se("quick-selector-icon"),src:e.props.getIconUrl(),size:18}),o.a.createElement("span",{className:se("quick-selector-text")},__("从{title}添加",{title:e.props.title}))),o.a.createElement("div",null,o.a.createElement(O.b,{name:"arrow-right",size:16})))})))):(t=a[f],r=o.a.cloneElement(t,{className:se("quick-selector-main-list"),selected:e.selected,onSelect:e.onSelect,onDeselect:e.onDeselect,setOnlyStaff:e.setOnlyStaff,onlyStaff:e.onlyStaff}),o.a.createElement("div",null,o.a.createElement("h2",{className:se("quick-selector-subtitle")},!c&&o.a.createElement("span",{className:se("quick-selector-subicon"),onClick:function(){return d(null)}},o.a.createElement(_.default,null)),o.a.createElement("span",{onClick:function(){return d(null)}},__("从{title}添加",{title:t.props.title}))),o.a.createElement("div",{className:se("quick-selector-main")},r))),h&&l&&o.a.createElement("div",{className:se("member-type-switch-container")},o.a.createElement(g.a,{checked:i,size:"small",onChange:function(t){return null==e?void 0:e.setOnlyStaff(t)}})," ",o.a.createElement("span",null,__("仅添加集团正式员工"))))}function de(e){var t=ce(e),r=t.state,n=t.getRef,a=t.getUsers,i=t.disableSubmit,c=t.handleSelect,u=t.handleDeselect,l=t.handleChange,s=t.handleRoleChange,f=t.handleSubmit,p=t.handleFocus,h=t.setOnlyStaff,d=!!window.appData.organization;return o.a.createElement("div",{className:se()},o.a.createElement(y.a,null,o.a.createElement(m.a,{span:e.quickSelectors&&e.quickSelectors.length>0?12:24,className:se("selector"),onClick:p},o.a.createElement("div",{className:se("content")},o.a.createElement(K,{keyField:"uid",getRef:n,value:r.selected.filter((function(e){return e._valid})).map((function(e){return e.uid})),users:r.users,selectedUsers:r.selected,getUsers:a,onChange:l,notFoundContent:e.notFoundContent,placeholder:d?__("输入人员名字搜索添加，可搜空间成员或外部联系人"):__("输入人员名字搜索添加")})),o.a.createElement("div",{className:se("footer")},e.disableMeta?null:o.a.createElement(fe,{className:se("meta"),userCount:r.userCount}),e.roles&&e.roles.length>0?o.a.createElement(pe,{className:se("role"),defaultRole:e.roles[0],roles:e.roles,onRoleChange:s,actionTipText:e.actionTipText,roleSelector:e.roleSelector}):null,o.a.createElement("div",{className:se("footer-btn")},o.a.createElement(v.a,{type:"primary",onClick:f,disabled:i()},__("添加"))))),e.quickSelectors&&e.quickSelectors.length>0?o.a.createElement(m.a,{span:12},o.a.createElement(he,{selectors:e.quickSelectors,selected:r.selected,onSelect:c,onDeselect:u,setOnlyStaff:h,onlyStaff:r.onlyStaff})):null))}de.defaultProps={id:"search",title:"搜索",onSubmit:function(){},getDefaultUsers:function(){}},de.propTypes={id:i.a.string,title:i.a.string,getDefaultUsers:i.a.func,searchUser:i.a.func.isRequired,notFoundContent:i.a.node,onSubmit:i.a.func,actionTipText:i.a.oneOfType([i.a.string,i.a.node]),roleSelector:i.a.element};var ye=de,me=r(3430),ve=(r(1195),r(954)),ge=(r(552),r(186)),be=(r(258),r(135)),we=(r(3193),r(3373)),_e=r(5),Oe=r.n(_e);function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ee(e){return function(e){if(Array.isArray(e))return Ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||De(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(){ke=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,i)&&(w=O);var S=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Se(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=p;return function(a,i){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=x(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Se(t)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function je(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function xe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){je(a,n,o,i,c,"next",e)}function c(e){je(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Se(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||De(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){if(e){if("string"==typeof e)return Ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ce(e,t):void 0}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ae=function(e){return"larkui-member-selector-list".concat(e?"-".concat(e):"")};function Ie(e){return o.a.createElement("div",{className:Ae("breadcrumb")},o.a.createElement(we.a,null,!e.disableNavTop&&o.a.createElement(we.a.Item,{onClick:function(t){e.disabled||e.getData({getTop:!0})}},"全部"),e.navs&&e.navs.map((function(t,r){return o.a.createElement(we.a.Item,{key:t.id,onClick:function(r){return function(t,r){e.disabled||e.getData(r)}(0,t)},disabled:e.disabled},t.name)}))))}function Re(e){return o.a.createElement("span",{className:"".concat(Ae("item-icon")," icon-organization"),onClick:function(t){e.disabled||e.getData(e.sub)}},o.a.createElement("span",{className:"".concat(Ae("item-larkicon"))},o.a.createElement(O.b,{name:"lower-level",size:16})),o.a.createElement("span",null,__("下级")))}function Ue(e){var t=e.item,r=window.appData.isYuque;return t.isTop?o.a.createElement("div",{className:Ae("item"),onClick:function(){return e.getData(t)}},o.a.createElement(O.b,{name:"group-type-department",className:"".concat(Ae("larkicon")),size:16}),o.a.createElement("span",{className:Ae("item-name")},t.name)):o.a.createElement("div",{className:Ae("item")},o.a.createElement(ge.a,{className:Ae("checked"),value:t.uid,checked:t.checked||e.disabled,onChange:function(r){r.target.checked?e.onSelect(r,t):e.onDeselect(t)},disabled:t.disabled||e.disabled},t.loading?o.a.createElement(be.a,null):o.a.createElement("span",{className:Ae("user")},t.avatar_url&&o.a.createElement(w.a,{className:Ae("icon"),src:t.avatar_url,size:24}),o.a.createElement("span",null,o.a.createElement("span",{className:Ae("title")},o.a.createElement("span",{className:Ae("name")},t.name),r&&t.login&&o.a.createElement("span",{className:Ae("login")},!t.sub&&o.a.createElement(o.a.Fragment,null,"("),t.login,!t.sub&&o.a.createElement(o.a.Fragment,null,")")),!r&&t.lastName&&o.a.createElement("span",{className:Ae("login")},!t.sub&&o.a.createElement(o.a.Fragment,null,"("),t.lastName,!t.sub&&o.a.createElement(o.a.Fragment,null,")")))))),t.sub&&o.a.createElement("div",{className:Ae("item-action")},o.a.createElement(Re,{sub:t.sub,getData:e.getData,disabled:e.disabledSub})))}function ze(e){var t=Ne(Object(n.useState)(!1),2),r=t[0],o=t[1],a=Ne(Object(n.useState)([]),2),i=a[0],c=a[1],u=Ne(Object(n.useState)(!1),2),l=u[0],s=u[1],f=Ne(Object(n.useState)(e.enableSelectNav),1)[0],p=Ne(Object(n.useState)(!1),2),h=p[0],d=p[1],y=Ne(Object(n.useState)([]),2),m=y[0],v=y[1],g=e.onlyStaff,b=function(t){var r,n,o=t;return g&&null!==(r=o)&&void 0!==r&&r.length&&(o=o.filter((function(e){var t=e.work_id||e.workid;return!t||!t.startsWith("WB")}))),(null===(n=o)||void 0===n?void 0:n.map((function(t){var r=e.checkValid(t);return Te(Te({},t),{},{_valid:r&&"success"===r.status})})))||[]},w=function(t,r,n){var o=t.reduce((function(e,t){return e[t.uid]=t,e}),{});if(e.enableDepthAll&&n){var a,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=De(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(n);try{for(i.s();!(a=i.n()).done;){if(o[a.value.uid])return b(r).map((function(e){return Te(Te({},e),{},{checked:!0,disabled:!0})}))}}catch(e){i.e(e)}finally{i.f()}}return b(r).map((function(e){var r=t.find((function(t){return t.uid===e.uid}));return Te(Te({},e),{},{checked:r&&e._valid})}))}(e.selected,m,i),_=function(e){var t=e.some((function(e){return e.checked})),r=!e.some((function(e){return!(e.checked||h||!1===e._valid)}));return{allChecked:r,allDisabled:e.every((function(e){return e.disabled})),allIndeterminate:!r&&t}}(w),O=_.allChecked,S=_.allDisabled,E=_.allIndeterminate,k=function(e){return xe(ke().mark((function t(){var r,n,a,i,u,l=arguments;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o(!0),n=l.length,a=new Array(n),i=0;i<n;i++)a[i]=l[i];return t.next=4,e.apply(void 0,a);case 4:u=t.sent,a&&a[0]&&a[0].getTop?s(!1):(null===(r=u.users)||void 0===r?void 0:r.length)>0?s(!0):s(!1),c(u.navs),v(u.users),o(!1);case 9:case"end":return t.stop()}}),t)})))},j=k(e.getData),x=k(e.getInitData);Object(n.useEffect)((function(){x()}),[]);return{state:{list:w,navs:i,showAll:l,showNavSelect:f,loading:r,allChecked:O,allIndeterminate:E,allDisabled:S,navSelectChecked:h,enableMemberTypeSwitch:e.enableMemberTypeSwitch,onlyStaff:e.onlyStaff},getData:j,handleSelect:function(t,r){t.target.checked&&e.enableDepthAll&&r.sub?(v(Ee(m).map((function(e){return e.id===r.id?e.loading=!0:e.loading=!1,e}))),e.getData(r.sub).then((function(t){v(Ee(m).map((function(e){return e.loading=!1,e}))),r.name=t.name,e.onSelect(r)}))):e.onSelect(r)},handleAllSelect:function(t){t.target.checked?e.onSelect(w):e.onDeselect(w)},handleRoleChange:function(e){j({role:e.value})},handleNavSelect:function(t,r){t.target.checked?(d(!0),e.onSelect(r)):(d(!1),e.onDeselect(r))},handleMemberTypeChange:function(t){var r;null===(r=e.setOnlyStaff)||void 0===r||r.call(e,t)}}}function Fe(e){var t=ze(e),r=t.state,n=t.handleAllSelect,a=t.handleSelect,i=t.handleNavSelect,c=t.handleRoleChange,u=t.getData,l=t.handleMemberTypeChange,s=e.getFilterRoles&&e.getFilterRoles(),f=r.navs&&r.navs[r.navs.length-1];return o.a.createElement("div",{className:Oe()("".concat(e.className," ").concat(Ae()),Pe({},Ae("member-switch"),r.enableMemberTypeSwitch))},o.a.createElement("div",{className:Oe()(Pe({},Ae("member-switch-inner"),r.enableMemberTypeSwitch))},s&&o.a.createElement("div",{className:Ae("role-filter")},o.a.createElement(N,{roles:s,onChange:c})),r.navs&&r.navs.length?o.a.createElement(Ie,{getData:u,navs:r.navs,disabled:r.navSelectChecked,disableNavTop:e.disableNavTop}):null,r.showNavSelect&&f&&o.a.createElement("div",{className:Ae("select-dep")},o.a.createElement(ge.a,{onChange:function(e){return i(e,f)}},o.a.createElement("span",{className:Ae("select-dep-name")},__("选择{dep}所有成员",{dep:f.name})))),r.showAll&&!r.loading?o.a.createElement("div",{className:Ae("select-all")},o.a.createElement(ge.a,{onChange:function(e){return n(e)},indeterminate:r.allIndeterminate,checked:r.allChecked||r.navSelectChecked,disabled:r.allDisabled||r.navSelectChecked},__("全选"))):null,o.a.createElement(ve.a,{className:Ae("list"),justify:"block",dataSource:r.list,loading:r.loading,locale:{emptyText:"outsourcer"===e.id?o.a.createElement("div",{className:Ae("empty-view")},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*lzOXRp21hVEAAAAAAAAAAAAAARQnAQ"}),o.a.createElement("p",null,__("暂无外部联系人"))):o.a.createElement("div",null,__("暂无数据"))},renderItem:function(t){return o.a.createElement(Ue,{onSelect:a,onDeselect:e.onDeselect,item:t,getData:u,disabled:r.navSelectChecked||!1===t._valid,disabledSub:r.navSelectChecked})}})),r.enableMemberTypeSwitch&&o.a.createElement("div",{className:Ae("member-type-switch-container")},o.a.createElement(g.a,{checked:r.onlyStaff,disabled:r.loading,size:"small",onChange:l})," ",o.a.createElement("span",null,__("仅添加集团正式员工"))))}Fe.defaultProps={disableNavTop:!1,enableDepthAll:!1,enableSelectNav:!1},Fe.propTypes={id:i.a.number,getData:i.a.func,onSelect:i.a.func,onDeselect:i.a.func,checkValid:i.a.func,disableNavTop:i.a.bool,enableDepthAll:i.a.bool,enableSelectNav:i.a.bool};var Me=Fe,Ge=(r(381),r(183)),Be=r(1403),qe=function(e){return"larkui-member-selector-import".concat(e?"-".concat(e):"")};function Ye(e){var t=e.getUploadProps(),r=e.getBtnText();return o.a.createElement("div",{className:qe()},o.a.createElement("p",{className:qe("desc")},o.a.createElement("span",null,o.a.createElement("a",{href:e.templateUrl},__("下载模板文件（import_users.txt）")),__("填写人员信息，")),o.a.createElement("span",null,r)),o.a.createElement("div",null,o.a.createElement(Ge.a,t,o.a.createElement(v.a,null,o.a.createElement(Be.default,null)," ",__("选择文件并提交")))))}Ye.defaultProps={templateUrl:"https://cdn.nlark.com/import_users.txt"},Ye.propTypes={role:i.a.number.isRequired,getUploadProps:i.a.func.isRequired,getBtnText:i.a.func.isRequired,templateUrl:i.a.string};var We=Ye;function Ve(e){var t,r=ce(e),n=r.state,a=r.getRef,i=r.getUsers,c=r.userHandleChange;return o.a.createElement("div",null,o.a.createElement(K,{userClassType:e.userClassType,isLiteSearchSelector:e.isLiteSearchSelector,keyField:"uid",getRef:a,selectedUsers:n.selected,value:null===(t=n.selected)||void 0===t?void 0:t.filter((function(e){return e._valid})).map((function(e){return e.uid})),users:n.users,getUsers:i,onChange:c,notFoundContent:e.notFoundContent,placeholder:__("输入成员名字搜索添加")}))}Ve.defaultProps={onChange:function(){}},Ve.propTypes={userClassType:i.a.string,searchUser:i.a.func.isRequired,notFoundContent:i.a.node,onChange:i.a.func};var Ke=Ve;function Qe(e){return o.a.createElement(d,{ref:e.titleRef,selectors:e.selectors,getWidth:e.getWidth,defaultTabKey:e.defaultTabKey,onCancel:e.onCancel,onClose:e.onClose,visible:e.visible})}Qe.ListSelector=Me,Qe.SearchSelector=ye,Qe.InviteSelector=me.a,Qe.ImportSelector=We,Qe.LiteSearchSelector=Ke,Qe.propTypes={titleRef:i.a.object,selectors:i.a.array,defaultTabKey:i.a.string,getWidth:i.a.func,onCancel:i.a.func,onClose:i.a.func,visible:i.a.bool};t.a=Qe},3389:function(e,t,r){"use strict";var n=r(95),o=r(492),a=r(57),i=r(1723),c=r.n(i),u=r(51),l=r(3316),s=r(99);var f=r(3391),p=r(3326);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(){v=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new D(n||[]);return o(i,"_invoke",{value:L(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",d="suspendedYield",y="executing",m="completed",g={};function b(){}function w(){}function _(){}var O={};l(O,i,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(C([])));E&&E!==r&&n.call(E,i)&&(O=E);var k=_.prototype=b.prototype=Object.create(O);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==h(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=p;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?m:d,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(h(t)+" is not iterable")}return w.prototype=_,o(k,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},j(x.prototype),l(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(k),l(k,u,"Generator"),l(k,i,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=b(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function b(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_(a,n,o,i,c,"next",e)}function c(e){_(a,n,o,i,c,"throw",e)}i(void 0)}))}}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}(this,r)}}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function L(e,t,r){return(t=T(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}var P=p.memberSelectorType.GROUP,N=p.memberSelectorType.BOOK,D=p.memberSelectorType.DOC,C=p.memberSelectorType.SIMPLE_WITH_ROLE,A=p.memberSelectorType.LIST,I=p.memberSelectorType.SIMPLE,R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(p,e);var t,r,i,l=k(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),L(j(t=l.call(this,e)),"_getSubmitBaseParams",(function(){return t.type===P?{group_id:t.target_id}:t.type===N||t.type===D?{target_id:t.target_id,target_type:t.target_type,status:o.STATUS.joined}:t.type===A?{list_id:t.target_id}:{}})),L(j(t),"getRealUsers",function(){var e=O(v().mark((function e(r){var n,o,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataSourceServices){e.next=2;break}return e.abrupt("return",r);case 2:n=g(t.dataSourceServices),e.prev=3,n.s();case 5:if((o=n.n()).done){e.next=13;break}if(!(a=o.value).getRealUsers){e.next=11;break}return e.next=10,a.getRealUsers(r);case 10:r=e.sent;case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()),L(j(t),"getUserCount",(function(e){var r;if(t.dataSourceServices){var n,o=g(t.dataSourceServices);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.getUserCount){r=a.getUserCount(e);break}}}catch(e){o.e(e)}finally{o.f()}}return void 0===r&&null!=e&&e.length?e.length:r||0})),L(j(t),"submit",function(){var e=O(v().mark((function e(r,n,o){var a,i,u,l,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,window.appData.isYuque||(i=r.find(t.isDepartment))&&(r=r.filter((function(e){return!t.isDepartment(e)}))),e.next=4,t.getRealUsers(r);case 4:return r=e.sent,u=c()(m(m({},t._getSubmitBaseParams()),{},{users:t.serializeUserPostBody(r),department_id:null===(a=i)||void 0===a?void 0:a.id,onlyStaff:o})),n&&(u.role=n.value),e.next=9,t.createProxy(u);case 9:if(!((l=e.sent).success_count<=0&&l.errors&&l.errors.length>0)){e.next=12;break}return e.abrupt("return",{status:"error",message:__("[ {members} ] 添加失败; 错误原因: {message}",{members:l.errors.map((function(e){return e.name})).join(", "),message:l.message}),data:l});case 12:if(0!==l.success_count&&0!==l.length&&l.length&&l.success_count){e.next=16;break}if(s=o?__("已限制仅添加正式员工,请检查选择成员是否正式员工或者已经被添加"):__("选择的成员已被添加"),o){e.next=16;break}return e.abrupt("return",{status:"warn",message:s,data:l});case 16:return e.abrupt("return",{status:"success",message:__("成功添加了 {count} 位成员",{count:l.success_count||l.length||0}),data:l});case 17:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),L(j(t),"checkValid",(function(e){return t.isMember(e)?{status:"error",message:__("成员已存在")}:{status:"success",message:"ok"}})),L(j(t),"searchUser",function(){var e=O(v().mark((function e(r){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n={q:r}).include_unconfirmed_corp_account=!0,window.appData.organization&&(n.optional_properties="profile"),e.next=5,u.a.users.complete(n);case 5:return o=e.sent,e.abrupt("return",t.dealUsers(o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L(j(t),"searchUsersByIds",function(){var e=O(v().mark((function e(r){var n,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={ids:r},e.next=3,u.a.users.listByIds(n);case 3:return o=e.sent,e.abrupt("return",t.dealUsers(o));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L(j(t),"dealUsers",(function(e){return e=e.map((function(e){return t.setUid(e),e.type="User",e.profile&&e.profile.status===n.STATUS.joined&&(e.dep=e.profile.department||a.a.getMemberRoleName(e.profile.role),e.avatar_url=e.profile.orgAvatar||e.avatar||e.avatar_url),e}))})),t.dataSourceServices=e.dataSourceServices,t}return t=p,i=[{key:"create",value:function(e){var t=new p(e);return t.init(),t}}],(r=[{key:"init",value:function(){var e;this.type===P?(this.group.members&&(this.members=Object(f.a)(this.group)),this.target_id=this.group.id,this.target_type="Group",this.abilities=this.group.abilities,this.createProxy=u.a.groupUsers.create):this.type===N?(this.book.collaborators&&(this.members=Object(f.a)(this.book)),this.target_id=this.book.id,this.target_type="Book",this.abilities=this.book.abilities,this.createProxy=u.a.collaborations.create):this.type===D?(this.doc.collaborations&&(this.members=Object(f.a)(this.doc)),this.target_id=this.doc.id,this.target_type="Doc",this.createProxy=u.a.collaborations.create,this.abilities=this.doc.abilities):[C,I].includes(this.type)&&(this.members=[].concat(d(this.members),[this.me])),this.status="organization"===(e=this.type)?n.default.STATUS:"group"===e?s.default.STATUS:"book"===e||"doc"===e?o.default.STATUS:void 0}},{key:"isOwner",value:function(){return this.abilities.manage}},{key:"isMember",value:function(e){return!(!this.members||0===this.members.length)&&this.members.some((function(t){return Object(f.b)(t,e)}))}}])&&S(t.prototype,r),i&&S(t,i),Object.defineProperty(t,"prototype",{writable:!1}),p}(l.a);L(R,"id","search"),L(R,"title",__("搜索添加"));t.a=R},3390:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(45),i="OrgSearchNotFound-module_container_MlZtJ",c="OrgSearchNotFound-module_icon_oJoZx",u="OrgSearchNotFound-module_content_CgmVs",l="OrgSearchNotFound-module_goToContacts_mFsnK";t.a=function(e){var t,r=window.appData.organization;return o.a.createElement("div",{className:i},o.a.createElement("div",{className:c},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*lzOXRp21hVEAAAAAAAAAAAAAARQnAQ",width:80})),o.a.createElement("p",{className:u},__("空间内无相关搜索结果")),(null==r||null===(t=r.abilities)||void 0===t?void 0:t.destroy)&&o.a.createElement("a",{className:l,target:"_blank",href:"/r/organizations/dashboard/contacts"},__("管理空间通讯录"),o.a.createElement(a.b,{name:"arrow-right",size:16})))}},3391:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a}));var n=r(3337);function o(e,t){return!(!e||!t)&&(e.uid&&t.uid?e.uid===t.uid:e.login&&t.login?e.login===t.login:!(!t.provider_userid||!e.provider_userid)&&(e.provider_userid===t.provider_userid&&e.provider_type===t.provider_type))}function a(e){var t=e.members||e.collaborators||e.collaborations;return t?Object(n.format)(t.map((function(e){return e.user}))):[]}},3426:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r(0),o=r(1210),a=r(45),i=r(5),c=r.n(i),u="index-module_actions_vhNlZ",l="index-module_actionItem_gm0UP",s="index-module_actionTitle_N9iRs",f="index-module_actionTitleLast_KuIDA",p="index-module_actionMore_8wkrV",h="index-module_actionMoreIcon_5FA3+",d="index-module_actionTitleIcon_XFMgq",y="index-module_actionTitleIconLast_2BO7h";function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){var t=e.settings,r=e.onClick;return n.createElement("div",{className:u},t.map((function(e){return!e.hidden&&n.createElement("div",{className:l,key:e.type,onClick:function(){r(e.type,e.title)}},n.createElement("span",{className:e.noDetail?f:s},n.createElement(a.b,{name:e.icon,className:c()(d,v({},y,e.noDetail)),width:16}),e.title),!e.noDetail&&n.createElement("span",{className:p},e.defaultValue,n.createElement(o.default,{className:h,width:16,height:16})))})))}},3428:function(e,t,r){"use strict";var n=r(57),o=r(792),a=r(95),i=r(492),c=r(51);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new D(n||[]);return o(i,"_invoke",{value:L(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var d="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function b(){}function w(){}function _(){}var O={};f(O,i,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(C([])));E&&E!==r&&n.call(E,i)&&(O=E);var k=_.prototype=b.prototype=Object.create(O);function j(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var l=h(e[o],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==u(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,r,n){var o=d;return function(a,i){if(o===m)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var l=h(t,r,n);if("normal"===l.type){if(o=n.done?v:y,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=h(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(u(t)+" is not iterable")}return w.prototype=_,o(k,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,f(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},j(x.prototype),f(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(p(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(k),f(k,s,"Generator"),f(k,i,(function(){return this})),f(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function s(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(this,r)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function m(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(b,e);var t,r,u,y,v,g=h(b);function b(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b);for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return m(d(e=g.call.apply(g,[this].concat(r))),"getUrl",(function(t,r){if(e.joinToken=t||e.joinToken,e.joinToken){if("doc"===e.type){var n="".concat(window.location.origin,"/g/").concat(e.group.login,"/").concat(e.book.slug,"/").concat(e.doc.slug,"/collaborator/join?token=").concat(t.token,"&source=doc_collaborator"),o="/".concat(e.group.login,"/").concat(e.book.slug,"/").concat(e.doc.slug,"/edit");return r&&t.role===i.ROLE.edit?"".concat(n,"&goto=").concat(encodeURIComponent(o)):n}return"book"===e.type?"".concat(window.location.origin,"/g/").concat(e.group.login,"/").concat(e.book.slug,"/collaborator/join?token=").concat(t.token,"&source=book_collaborator"):"group"===e.type?"".concat(window.location.origin,"/groups/").concat(e.group.login,"/join?token=").concat(t.token,"&source=group_collaborator"):"organization"===e.type?"".concat(window.location.origin,"/r/organizations/").concat(e.organization.login,"/join?token=").concat(t.token,"&source=org"):"list"===e.type?"".concat(window.location.origin,"/r/list/").concat(e.list.id,"/join?token=").concat(t.token,"&source=list_collaborator"):null}})),m(d(e),"getCopyText",(function(t,r){return r===i.ROLE.edit?__("{url}# 邀请你共同编辑{typeName}《{targetName}》",{targetName:e.target.name||e.target.title,typeName:e.typeName,url:t}):__("{url}# 《{targetName}》",{targetName:e.target.name||e.target.title,url:t})})),m(d(e),"getOrgTipText",(function(){return e.organization?e.canPublic?"book"===e.type?__("获得链接的所有人（含空间外人员）可获得{type}的权限，空间外人员将自动成为{memberType}。",{type:e.typeName,memberType:n.a.isYuqueAddressBook()?__("空间成员"):__("空间外部联系人")}):__("获得链接的所有人（含空间外人员）可加入{type}，空间外人员将自动成为{memberType}。",{type:e.typeName,memberType:n.a.isYuqueAddressBook()?__("空间成员"):__("空间外部联系人")}):"book"===e.type?__("仅获得链接的空间成员可获得{type}的权限。",{type:e.typeName}):__("仅获得链接的空间成员可加入{type}。",{type:e.typeName}):""})),m(d(e),"getMoreSettingOptions",(function(){return e.organization&&e.organization.id?e.organization.isPremium&&n.a.isYuqueAddressBook()?[{value:a.ROLE.member,label:__("空间成员")},{value:a.ROLE.outsourcer,label:__("外部联系人")}]:e.organization.isPremium&&!n.a.isYuqueAddressBook()?[{value:a.ROLE.outsourcer,label:__("外部联系人")}]:[{value:a.ROLE.member,label:__("空间成员")}]:null})),m(d(e),"getToken",(function(t){var r=t.approve,n=t.force,i=t.role,c=t.allow_outsider,u=void 0===c?o.ALLOW_OUTSIDER.NORMAL:c,l=t.organization_user_role,s=void 0===l?a.ROLE.member:l;if(e.proxy){var f={id:e.target.id,allow_outsider:u,organization_user_role:s};return null!=r&&(f.approve=r),null!=n&&(f.force=n),null!=i&&(f.role=i),e.proxy.token(f).then((function(t){return e.joinToken=t,t}))}})),m(d(e),"updateToken",(function(t){var r=t.approve,n=t.role,i=t.allow_outsider,c=void 0===i?o.ALLOW_OUTSIDER.NORMAL:i,u=t.organization_user_role,l=void 0===u?a.ROLE.member:u;if(e.proxy){var s={id:e.target.id,allow_outsider:c,organization_user_role:l};return null!=r&&(s.approve=r),null!=n&&(s.role=n),e.proxy.updateToken(s).then((function(t){return e.joinToken=t,t}))}})),m(d(e),"deleteTokens",(function(){if(e.proxy)return e.proxy.deleteTokens({id:e.target.id}).then((function(e){return e}))})),e}return t=b,r=[{key:"init",value:function(){this.target&&(this.joinToken=this.target.joinToken),"organization"===this.type?this.proxy=c.a.organizations:"group"===this.type?this.proxy=c.a.groups:"book"===this.type?this.proxy=c.a.books:"doc"===this.type&&(this.proxy=c.a.docs)}},{key:"check",value:function(){this.target||(this.enable=!1)}},{key:"orgDataReady",value:(y=l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.organization){e.next=4;break}return e.next=3,n.a.canIndirectAddOrgMember(this.organization);case 3:this.canPublic=e.sent;case 4:case"end":return e.stop()}}),e,this)})),v=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=y.apply(e,t);function a(e){s(o,r,n,a,i,"next",e)}function i(e){s(o,r,n,a,i,"throw",e)}a(void 0)}))},function(){return v.apply(this,arguments)})}],u=[{key:"create",value:function(e){var t=new b(e);return t.check(),t.enable&&t.init(),t}}],r&&f(t.prototype,r),u&&f(t,u),Object.defineProperty(t,"prototype",{writable:!1}),b}(r(3316).a);m(g,"id","invite"),m(g,"title",__("邀请添加")),t.a=g},3430:function(e,t,r){"use strict";r(258);var n=r(135),o=(r(42),r(9)),a=(r(56),r(12)),i=(r(1195),r(954)),c=(r(41),r(10)),u=r(0),l=r.n(u),s=r(2),f=r.n(s),p=r(5),h=r.n(p),d=r(45),y=r(160),m=r.n(y),v=r(431),g=r.n(v),b=r(198),w=r(229),_=r(217),O=r(3426),S=(r(151),r(66)),E=(r(1001),r(583)),k=(r(209),r(34)),j=r(51),x=r(1616),L=r(1210),T=r(3323),P=r(792),N=r(3345);function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t=e.organization,r=e.panelType,n=e.panelTitle,o=e.state,a=e.moreSettingOptions,i=e.handleRoleTypeChange,c=e.handleMemberTypeChange,l=e.handleAllowOutsiderChange,s=e.handleCheckChange,f=e.onBack,p=D(u.useState(!1),2),d=p[0],y=p[1];u.useEffect((function(){!(!t||null==t||!t.id)&&j.a.organizations.getPermissions({id:t.id}).then((function(e){y(e.indirect_add_org_member)}))}),[t]);var m;return u.createElement("div",{className:N.a.shareDetailSettingPanel},u.createElement("div",{className:N.a.title,onClick:f},u.createElement(L.default,{className:N.a.backIcon,width:20,height:20}),(m=n,"needCheckSet"===r?__("审批确认"):m)),function(e){switch(e){case"groupMemberSet":return n=T.b.actions,f=T.b.desc,u.createElement(u.Fragment,null,u.createElement("p",{className:N.a.titleDesc},f),n.map((function(e){return u.createElement("div",{className:h()(N.a.contentArea,N.a.selectorItem),key:e.key,onClick:function(){i(e.value)}},u.createElement("span",null,e.label),o.roleType===e.value&&u.createElement(x.default,{className:N.a.selectorIcon,width:16,height:16}))})));case"collaborationSet":return function(){var e=T.e.actions,t=T.e[o.targetType.toUpperCase()];return u.createElement(u.Fragment,null,u.createElement("p",{className:N.a.titleDesc},t),e.map((function(e){return u.createElement("div",{className:h()(N.a.contentArea,N.a.selectorItem),key:e.key,onClick:function(){i(e.value)}},u.createElement("span",null,e.label),o.roleType===e.value&&u.createElement(x.default,{className:N.a.selectorIcon,width:16,height:16}))})))}();case"allowOutsiderSet":return function(){var e,r=["Book","Doc"].includes(o.targetType)?T.j.descBookDoc:T.j.descGroup,n=k.a.Option;1===(null==a?void 0:a.length)?e=u.createElement("span",null,a[0].label):(null==a?void 0:a.length)>1&&(e=u.createElement(k.a,{defaultValue:o.memberType,bordered:!1,onChange:c},null==a?void 0:a.map((function(e){return u.createElement(n,{value:e.value},e.label)}))));var i=u.createElement("div",{className:N.a.contentArea},u.createElement("span",{className:N.a.switchTitle},T.j.action),u.createElement(E.a,{disabled:!d,onChange:l,checked:o.allowOutsider===P.ALLOW_OUTSIDER.ALLOW}));return u.createElement(u.Fragment,null,u.createElement("p",{className:N.a.titleDesc},r),u.createElement(S.a,{title:d?"":T.j.tip(t),placement:"bottomRight",autoAdjustOverflow:!0},i),(null==a?void 0:a.length)&&o.allowOutsider===P.ALLOW_OUTSIDER.ALLOW&&u.createElement("div",{className:N.a.selectOption},__("空间外人员将自动成为"),e))}();case"needCheckSet":return r=["Book","Doc"].includes(o.targetType)?T.l.descBookDoc:T.l.descGroup,u.createElement(u.Fragment,null,u.createElement("p",{className:N.a.titleDesc},r),u.createElement("div",{className:N.a.contentArea},u.createElement("span",{className:N.a.switchTitle},T.l.action),u.createElement(E.a,{onChange:s,checked:o.approve===P.APPROVE.need})));default:return null}var r,n,f}(r))},I=r(3346),R=r(419),U=r(958),z=r.n(U),F=r(492),M=r(99),G=r(95),B=r(3326);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function Y(){Y=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,i)&&(w=O);var S=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==q(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=p;return function(a,i){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=x(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(q(t)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(S),l(S,u,"Generator"),l(S,i,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function W(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q(e,t,r,n,o){if("get"===e)try{return JSON.parse(b.a.get("joinToken"))["".concat(t,"-").concat(r,"-").concat(n)]}catch(e){return null}if("save"===e){var a=JSON.parse(b.a.get("joinToken"))||{},i=Object.keys(a);20!==i.length||"".concat(t,"-").concat(r,"-").concat(n)in a||delete a[i[0]],a["".concat(t,"-").concat(r,"-").concat(n)]=m()(o,["role","approve","allow_outsider","organization_user_role"]),b.a.set("joinToken",JSON.stringify(a))}}function H(e){var t,r,n=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.isEditing;if(t)return e.getJoinUrl(t,r)},o=g()(e.inviteSelectorType),a=null===(t=e.inviteTarget)||void 0===t?void 0:t.id,i=Q("get",o,a,e.inviteModalContent);r=e.inviteSelectorType===B.memberSelectorType.GROUP?M.ROLE.member:e.isEditing||"inviteModal"===e.inviteModalContent?F.ROLE.edit:F.ROLE.readonly;var u=V(l.a.useState(i?i.role:r),2),s=u[0],f=u[1],p=V(l.a.useState(i?i.allow_outsider:P.ALLOW_OUTSIDER.NORMAL),2),h=p[0],d=p[1],y=P.APPROVE.noneed,m=V(l.a.useState(i?i.approve:y),2),v=m[0],b=m[1],w=V(l.a.useState(),2),_=w[0],O=w[1],S=V(l.a.useState(!1),2),E=S[0],k=S[1],j=V(l.a.useState(i?i.organization_user_role:G.ROLE.member),2),x=j[0],L=j[1],T=l.a.useRef(!1),N=function(t){return k(!0),e.getToken({approve:v,force:t,role:s,allow_outsider:h,organization_user_role:x}).then((function(t){return b(t.approve),f(t.role),d(t.allow_outsider),L(t.organization_user_role),O(n(t)),Q("save",o,a,e.inviteModalContent,t),k(!1),t})).catch((function(e){k(!1),c.a.error(e.message)}))};l.a.useEffect((function(){N()}),[]);var D=function(){var t,r=(t=Y().mark((function t(){return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(!0),t.next=3,e.deleteTokens();case 3:return t.abrupt("return",N(!0).then((function(){setTimeout((function(){k(!1),c.a.success(__("重置邀请链接成功"))}),500)})).catch((function(){k(!1)})));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){W(a,n,o,i,c,"next",e)}function c(e){W(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return{state:{joinUrl:_,loading:E,targetType:o,roleType:s,allowOutsider:h,approve:v,memberType:x},onCopyUrl:function(t){var r=e.getCopyText(_,s);t.currentTarget&&t.currentTarget.setAttribute("data-url",r),z()(r,{format:"text/plain"}),c.a.success(__("链接已复制"))},onRefreshLink:D,onCheckChange:function(t){var r=t?P.APPROVE.need:P.APPROVE.noneed;e.updateToken({approve:r,role:s,allow_outsider:h,organization_user_role:x}).then((function(){b(r),Q("save",o,a,e.inviteModalContent,{allow_outsider:h,approve:r,organization_user_role:x,role:s}),T.current=!0})).catch((function(e){c.a.error(e.message)}))},onAllowOutsiderChange:function(t){var r=t?P.ALLOW_OUTSIDER.ALLOW:P.ALLOW_OUTSIDER.NORMAL;e.getToken({approve:v,role:s,allow_outsider:r,organization_user_role:x}).then((function(t){d(t.allow_outsider),O(n(t)),Q("save",o,a,e.inviteModalContent,t),T.current=!0})).catch((function(e){c.a.error(e.message)}))},onMemberTypeChange:function(t){e.getToken({approve:v,role:s,allow_outsider:h,organization_user_role:t}).then((function(t){L(t.organization_user_role),O(n(t)),Q("save",o,a,e.inviteModalContent,t),T.current=!0})).catch((function(e){c.a.error(e.message)}))},onRoleTypeChange:function(t){e.getToken({approve:v,role:t,allow_outsider:h,organization_user_role:x}).then((function(t){f(t.role),O(n(t)),Q("save",o,a,e.inviteModalContent,t),T.current=!0})).catch((function(e){c.a.error(e.message)}))},triggerFakeLoading:function(){T.current&&(k(!0),setTimeout((function(){k(!1)}),500),T.current=!1)}}}function Z(e){var t,r,c,u,s,f=e.moreSettingOptions,p=e.inviteModalContent,y=e.onBackShare,m=e.toggleTitle,v=e.toggleCollaboratorList,g=e.organization,b=e.group,S=e.inviteSelectorType,E=H(e),k=E.state,j=E.onCopyUrl,x=E.onRefreshLink,L=E.onCheckChange,T=E.onAllowOutsiderChange,D=E.onMemberTypeChange,C=E.onRoleTypeChange,U=E.triggerFakeLoading,z=V(l.a.useState(!1),2),G=z[0],q=z[1],Y=V(l.a.useState(""),2),W=Y[0],K=Y[1],Q=V(l.a.useState(""),2),Z=Q[0],J=Q[1],$=V(l.a.useState(!1),2),X=$[0],ee=$[1],te=l.a.useMemo((function(){var e=null!=g&&g.id?R.a.ORG:R.a.PERSON;return Object(w.a)()?e:R.a.INTERNAL}),[g]),re=[{type:"collaborationSet",title:__("协作权限"),defaultValue:k.roleType===F.ROLE.edit?__("可编辑"):__("可阅读"),icon:"icon-limits"},{type:"allowOutsiderSet",title:__("邀请空间外人员"),hidden:!(te===R.a.ORG&&S===B.memberSelectorType.BOOK),defaultValue:k.allowOutsider===P.ALLOW_OUTSIDER.NORMAL?__("关闭"):__("已开启"),icon:"icon-range"},{type:"needCheckSet",title:__("需要审批确认加入"),defaultValue:k.approve===P.APPROVE.need?__("已开启"):__("关闭"),icon:"icon-verify"},{type:"resetLinkSet",title:__("重置邀请链接"),noDetail:!0,icon:"antd-sync"}],ne=[{type:"groupMemberSet",title:__("人员角色"),defaultValue:k.roleType===M.ROLE.member?__("成员"):__("只读成员"),icon:"icon-limits"},{type:"allowOutsiderSet",title:__("邀请空间外人员"),hidden:Object(_.h)(b,g)||te===R.a.INTERNAL,defaultValue:k.allowOutsider===P.ALLOW_OUTSIDER.NORMAL?__("关闭"):__("已开启"),icon:"icon-range"},{type:"needCheckSet",title:__("需要审批确认加入"),defaultValue:k.approve===P.APPROVE.need?__("已开启"):__("关闭"),icon:"icon-approval"},{type:"resetLinkSet",title:__("重置邀请链接"),noDetail:!0,icon:"antd-sync"}],oe=Object(_.g)(b)?ne.filter((function(e){return"allowOutsiderSet"!==(null==e?void 0:e.type)})):ne,ae=function(e,t){"inviteModal"===p&&m(!1),"collaboratorPanel"===p&&v(!1),q(!0),K(e),J(t)};return l.a.createElement("div",{className:I.a.sharePanel},G?l.a.createElement(A,{organization:g,panelType:W,panelTitle:Z,state:k,moreSettingOptions:f,handleRoleTypeChange:C,handleMemberTypeChange:D,handleAllowOutsiderChange:T,handleCheckChange:L,onBack:function(){"inviteModal"===p&&m(!0),"collaboratorPanel"===p&&v(!0),q(!1),U()}}):l.a.createElement(l.a.Fragment,null,"inviteModal"===p&&(r=S===B.memberSelectorType.GROUP,c=Object(_.g)(b)?__("拿到链接的人可成为公开页成员、只读成员"):__("拿到链接的人可成为团队成员、只读成员"),u=r?__("通过链接邀请添加成员"):__("通过链接邀请参与协作"),s=r?c:__("拿到链接的人可获得编辑、阅读等权限"),l.a.createElement("div",{className:I.a.main},l.a.createElement("div",{className:I.a.mainIntro},l.a.createElement(i.a.Item,{className:I.a.inviteItem},l.a.createElement(i.a.Item.Meta,{avatar:l.a.createElement(d.b,{className:h()(I.a.itemIcon,I.a.appointIcon),name:"nav-invite",width:40}),title:u,description:s}))),l.a.createElement("div",{className:I.a.moreConfigs},l.a.createElement(n.a,{spinning:k.loading,delay:150},l.a.createElement("div",{className:I.a.shareLinkSet},l.a.createElement(a.a,{className:I.a.shareLinkShow,disabled:!0,placeholder:k.joinUrl}),l.a.createElement(o.a,{className:I.a.shareButton,onClick:function(e){k.loading||j(e)}},__("复制链接")))),l.a.createElement(O.a,{settings:r?oe:re,onClick:function(e,t){"resetLinkSet"===e?x():ae(e,t)}})))),"inviteSharePanel"===p&&(t=__("拿到链接的人可获得{linkAbility}权限",{linkAbility:k.roleType===F.ROLE.edit?__("编辑"):__("阅读")}),l.a.createElement("div",{className:N.a.shareDetailSettingPanel},l.a.createElement("div",{className:N.a.title,onClick:function(){return y()}},l.a.createElement(d.b,{className:N.a.backIcon,name:"arrow-down",width:20}),__("链接添加协作者")),l.a.createElement("p",{className:N.a.linkTitleDesc},t),l.a.createElement(n.a,{spinning:k.loading,delay:150},l.a.createElement("div",{className:N.a.linkContentArea},l.a.createElement(a.a,{className:N.a.copyLink,disabled:!0,placeholder:k.joinUrl}),l.a.createElement(o.a,{className:N.a.inviteCopyBtn,size:"large",type:"primary",onClick:function(e){k.loading||j(e)}},__("复制链接")))),l.a.createElement("div",{className:N.a.moreConfigSettings},l.a.createElement(O.a,{settings:re,onClick:function(e,t){"resetLinkSet"===e?x():ae(e,t)}})))),"collaboratorPanel"===p&&function(){var e=__("拿到链接的人可获得{linkAbility}权限",{linkAbility:k.roleType===F.ROLE.edit?__("编辑"):__("阅读")});return l.a.createElement("div",{className:h()(N.a.shareDetailSettingPanel,I.a.inviteSelector)},l.a.createElement("p",{className:N.a.linkTitleDesc,style:{marginTop:0}},e),l.a.createElement(n.a,{spinning:k.loading,delay:150},l.a.createElement("div",{className:N.a.linkContentArea},l.a.createElement(a.a,{className:N.a.copyLink,disabled:!0,placeholder:k.joinUrl}),l.a.createElement(o.a,{className:N.a.inviteCopyBtn,size:"large",type:"primary",onClick:function(e){k.loading||j(e)}},__("复制链接")))),l.a.createElement("div",{className:N.a.moreConfigToggler},l.a.createElement("span",{className:N.a.moreConfigsTip,onClick:function(){return ee((function(e){return!e}))}},__("高级设置"),l.a.createElement(d.b,{name:"arrow-down",className:N.a.expandIcon,"data-activated":X,size:16}))),X&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:N.a.moreConfigSettings},l.a.createElement(O.a,{settings:re,onClick:function(e,t){"resetLinkSet"===e?x():ae(e,t)}}))))}()))}Z.propTypes={getJoinUrl:f.a.func,getToken:f.a.func,updateToken:f.a.func,deleteTokens:f.a.func,getCopyText:f.a.func,inviteSelectorType:f.a.string,inviteModalContent:f.a.oneOf(["inviteModal","inviteSharePanel","collaboratorPanel"]),onBackShare:f.a.func,toggleCollaboratorList:f.a.func,toggleTitle:f.a.func,moreSettingOptions:f.a.array,organization:f.a.object,group:f.a.object,isEditing:f.a.bool,inviteTarget:f.a.object},Z.defaultProps={inviteModalContent:"inviteModal"};t.a=Z},3531:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){return e?(e=e.toLowerCase(),{organization:__("空间"),group:__("团队"),book:__("知识库"),doc:__("文档"),thread:__("话题"),sheet:__("表格"),resource:__("资源知识库"),design:__("图集"),column:__("专栏")}[e]||__("文档")):""}}}]);