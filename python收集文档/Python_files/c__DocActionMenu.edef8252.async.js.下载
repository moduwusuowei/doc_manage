/*! For license information please see c__DocActionMenu.edef8252.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1204,103,142,246,673],{1003:function(e,t,r){var n=r(568),o=r(213),a=r(262),i=r(76),c=r(190),u=r(263),l=r(265),s=r(365),f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(c(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||s(e)||a(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!n(e).length;for(var r in e)if(f.call(e,r))return!1;return!0}},1221:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-home",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M12.734 14.844H7.266a.703.703 0 1 0 0 1.406h5.468a.703.703 0 1 0 0-1.406Zm0-2.813H7.266a.703.703 0 1 0 0 1.406h5.468a.703.703 0 1 0 0-1.406Zm5.698-4.433-8.02-5.616A.698.698 0 0 0 10 1.855a.698.698 0 0 0-.412.127l-8.02 5.616a.702.702 0 1 0 .807 1.15l.125-.086v8.799a.703.703 0 1 0 1.406 0V7.678L10 3.41l6.094 4.268v9.783a.703.703 0 1 0 1.406 0V8.662l.125.088a.704.704 0 0 0 .807-1.152Zm-5.698 1.62H7.266a.703.703 0 1 0 0 1.407h5.468a.703.703 0 1 0 0-1.406Z",fill:"currentColor",fillRule:"nonzero"}))},1222:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-user",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M16.004 15.508a6.5 6.5 0 0 0-1.397-2.07 6.5 6.5 0 0 0-2.878-1.678 5.362 5.362 0 0 0 2.076-1.293 5.346 5.346 0 0 0 1.576-3.803 5.337 5.337 0 0 0-1.576-3.803 5.346 5.346 0 0 0-3.803-1.576 5.337 5.337 0 0 0-3.803 1.576 5.346 5.346 0 0 0-1.576 3.803c0 1.436.559 2.787 1.576 3.803a5.362 5.362 0 0 0 2.076 1.293 6.5 6.5 0 0 0-2.879 1.678 6.5 6.5 0 0 0-1.908 4.607.703.703 0 1 0 1.407 0c0-1.365.53-2.649 1.496-3.613a5.076 5.076 0 0 1 3.613-1.496c1.365 0 2.648.53 3.613 1.496a5.076 5.076 0 0 1 1.496 3.613.703.703 0 1 0 1.407 0 6.552 6.552 0 0 0-.516-2.537ZM10 10.637a3.977 3.977 0 0 1-3.973-3.973A3.977 3.977 0 0 1 10 2.691a3.977 3.977 0 0 1 3.973 3.973A3.976 3.976 0 0 1 10 10.637Z",fill:"currentColor",fillRule:"nonzero"}))},1240:function(e,t,r){"use strict";r(581);var n=r(301),o=(r(56),r(12)),a=(r(489),r(98)),i=r(0),c=r.n(i),u=r(2),l=r.n(u),s=r(1221),f=r(1323),d=r(1222),p=r(1213),m=r(1210),h=r(217);r(1336);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e){var t,r,u=e.isOfficial,l=e.isDesktop,v=e.newTemplateName,g=e.onSetNewTemplateName,b=e.onSetSelectedScope,w=e.group,_=e.organization,E=l?w&&Object(h.f)(w):w&&Object(h.f)(w)&&(null===(t=w.abilities)||void 0===t?void 0:t.read_private),O=!!_,S=y(Object(i.useState)(E||O||u?0:1),2),x=S[0],j=S[1];r=E?[{header:__("本知识库可用"),icon:c.a.createElement(s.default,{width:20,height:20}),desc:__("仅在本知识库中可以使用"),type:0},{header:__("本团队可用"),icon:c.a.createElement(f.default,{width:20,height:20}),desc:__("成员在团队中新建文档时均可使用"),type:2},{header:__("仅自己可用"),icon:c.a.createElement(d.default,{width:20,height:20}),desc:__("可以在你参与的所有知识库中使用"),type:3}]:[{header:__("本知识库可用"),icon:c.a.createElement(s.default,{width:20,height:20}),desc:__("仅在本知识库中可以使用"),type:0},{header:__("仅自己可用"),icon:c.a.createElement(d.default,{width:20,height:20}),desc:__("可以在你参与的所有知识库中使用"),type:3}];var k=[{header:__("官方模板"),icon:c.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*KnODQ5KXlh4AAAAAAAAAAABjAQAAAQ/original",alt:"语雀logo",height:20}),desc:__("所有知识库中都可以使用"),type:1}];u&&(r=k);var C=r[x];Object(i.useEffect)((function(){return b(r[x].type)}),[]);var L=c.a.createElement(a.a,null,r.map((function(e,t){var n=c.a.createElement("div",{"data-testid":"dropdown-item-".concat(e.type),className:"template-scope-menu-item"},c.a.createElement("div",{className:"template-scope-icon"},e.icon),c.a.createElement("div",{className:"template-scope-text"},c.a.createElement("h4",null,e.header),c.a.createElement("p",null,e.desc)),t===x&&c.a.createElement("div",{className:"template-scope-more-icon"},c.a.createElement(p.default,{width:20})));return c.a.createElement(a.a.Item,{key:e.header,onClick:function(){j(t),b(r[t].type)}},n)})));return c.a.createElement("div",{"data-testid":"creator-view",className:"template-creator-content"},c.a.createElement("p",null,__("模板名称")),c.a.createElement(o.a,{value:v||"",onChange:function(e){return g(e.target.value)},onFocus:function(e){return e.target.setSelectionRange(0,e.target.value.length)}}),c.a.createElement("p",null,__("可用范围")),c.a.createElement(n.a,{trigger:["click"],overlay:L},c.a.createElement("div",{"data-testid":"dropdown-trigger",className:"template-scope"},c.a.createElement("div",{className:"template-scope-icon"},C.icon),c.a.createElement("div",{className:"template-scope-text"},c.a.createElement("h4",null,C.header),c.a.createElement("p",null,C.desc)),c.a.createElement("div",{className:"template-scope-more-icon"},c.a.createElement(m.default,null)))))}g.defaultProps={isOfficial:!1},g.propTypes={newTemplateName:l.a.string,onSetNewTemplateName:l.a.func,onSetSelectedScope:l.a.func,isOfficial:l.a.bool,isDesktop:l.a.bool,group:l.a.object,organization:l.a.object},t.a=g},1323:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-team",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M17.057 12.45c.086-.446.13-.905.13-1.376A7.19 7.19 0 0 0 13 4.541a3.008 3.008 0 0 0-6 0 7.19 7.19 0 0 0-4.057 7.908 3.011 3.011 0 0 0-1.693 2.707 3.007 3.007 0 0 0 5.13 2.13 7.147 7.147 0 0 0 3.62.976c1.32 0 2.555-.356 3.62-.977a3.007 3.007 0 0 0 5.13-2.129c0-1.19-.691-2.218-1.693-2.707ZM10 3.163a1.601 1.601 0 1 1 0 3.203 1.601 1.601 0 0 1 0-3.203ZM4.258 16.758a1.601 1.601 0 1 1 0-3.203 1.601 1.601 0 0 1 0 3.203Zm8.476-1.602a3 3 0 0 0 .147.932 5.755 5.755 0 0 1-2.881.767 5.755 5.755 0 0 1-2.88-.767 3.01 3.01 0 0 0-2.8-3.94A5.784 5.784 0 0 1 7.25 5.986a3.01 3.01 0 0 0 5.498 0 5.784 5.784 0 0 1 2.932 6.162 3.01 3.01 0 0 0-2.948 3.008Zm3.008 1.602a1.601 1.601 0 1 1 0-3.203 1.601 1.601 0 0 1 0 3.203Z",fill:"currentColor",fillRule:"nonzero"}))},1336:function(e,t,r){},1625:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-close",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M34.41 34.499c3.906-3.905 10.238-3.905 14.143 0l79.903 79.902 79.903-79.902c3.905-3.905 10.237-3.905 14.142 0 3.905 3.905 3.905 10.237 0 14.142l-79.903 79.903 79.903 79.903c3.834 3.834 3.904 10.008.21 13.927l-.21.215c-3.905 3.906-10.237 3.906-14.142 0l-79.903-79.903-79.903 79.903c-3.905 3.906-10.237 3.906-14.142 0-3.906-3.905-3.906-10.237 0-14.142l79.902-79.903L34.41 48.641c-3.835-3.834-3.904-10.007-.21-13.927Z",fill:"currentColor",fillRule:"evenodd"}))},3415:function(e,t,r){"use strict";var n=r(80),o=r.n(n),a={_bookGrayscaleConfig:null,getDefaultDocumentFormat:function(e,t,r){return t=t||"",r=r||{},o.a.DOC_DEFAULT_FORMAT[e]||o.a.FORMAT.LAKE}};t.a=a},3487:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(0),o=r(965),a=r(216),i=function(e){var t=e.loader,r=n.useRef(null);return function(){return r.current?Promise.resolve(r.current):t().then((function(e){return r.current=e,r.current})).catch((function(e){return console.error(e.stack)}))}},c={modal:"styles-module_modal_8nT+9"};function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:C(e,r,c)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};f(E,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(N([])));S&&S!==r&&n.call(S,i)&&(E=S);var x=_.prototype=b.prototype=Object.create(E);function j(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var l=p(e[o],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==u(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=m;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(t,r,n);if("normal"===l.type){if(o=n.done?v:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(u(t)+" is not iterable")}return w.prototype=_,o(x,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,f(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},j(k.prototype),f(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(x),f(x,s,"Generator"),f(x,i,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){var t=e.loader,r=e.name,u=m(o.a.useModal(),2),s=u[0],d=u[1],h=i({loader:t}),y=function(){var e,t=(e=l().mark((function e(t,o){var i,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:if(i=e.sent){e.next=6;break}return console.error("SelectorComponent for ".concat(r," load failed")),e.abrupt("return");case 6:return u=new Promise((function(e){var r=s.info({}),u=function(){var e,n;r.destroy(),null==t||null===(e=t.onClose)||void 0===e||e.call(t),null==o||null===(n=o.afterClose)||void 0===n||n.call(o)},l=f(f({},t),{},{onSelect:function(t){e(t),u()},onClose:function(){e(void 0),u()}});r.update(f(f({className:c.modal,icon:null,centered:!0,cancelText:""},o),{},{content:n.createElement(a.a,null,n.createElement(i,l))}))})),e.next=9,u;case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){p(a,n,o,i,c,"next",e)}function c(e){p(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return{loadSelector:function(){return h()},showSelector:y,contextHolder:d}}},3498:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(3487),o=function(){return Promise.all([r.e(0),r.e(1),r.e(9),r.e(1319)]).then(r.bind(null,3762)).then((function(e){return e.default}))};function a(){var e=Object(n.a)({loader:o,name:"TemplateSelector"}),t=e.loadSelector,r=e.showSelector;return{loadTemplateSelector:t,showTemplateSelector:function(e){return r(e,{width:e.isDesktop?1100:1140,maskClosable:!0,centered:!0})},contextHolder:e.contextHolder}}},3541:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n,o=r(496),a=r.n(o);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var d=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.localUserSettings=t}var t,r,n;return t=e,(r=[{key:"getValue",value:function(){return this.localUserSettings}},{key:"update",value:function(e){this.localUserSettings=u(u({},this.localUserSettings),e)}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())(a()((null===(n=window.appData)||void 0===n?void 0:n.userSettings)||{}))},3548:function(e,t,r){var n=r(499);e.exports=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?n(e,void 0,t):[]}},3552:function(e,t,r){"use strict";r(151);var n=r(66),o=(r(42),r(9)),a=r(0),i=r(315),c=r(1625),u="index-module_container_YifTz",l="index-module_titleContainer_E19Ts",s="index-module_content_u6ksX",f="index-module_close_xIF4s",d=function(e){var t=e.onReadGuide,r=e.sign,d=e.visible,p=e.arrowPointAtCenter,m=e.placement;return a.createElement(n.a,{overlayClassName:u,arrowPointAtCenter:p,destroyTooltipOnHide:!0,autoAdjustOverflow:!0,getPopupContainer:function(){return document.querySelector("#dragBarContainer")},title:a.createElement("div",{className:l},a.createElement("div",{className:s},a.createElement(i.a,{variant:"caption",mt:4,mb:4},__("知识库全新升级，来看看吧"))),a.createElement(o.a,{onClick:t,icon:a.createElement(c.default,{width:14,height:14}),type:"text",className:f})),placement:m,visible:d,align:{targetOffset:[0,4]}},r)},p={FEATURES:[{area:"GROUP_PAGE",enable:!0,type:"custom",tip_id:"feature_group_introduce",tip:__("功能说明"),createdAt:"2022-09-20"},{area:"WIKI_PAGE",enable:!0,type:"custom",tip_id:"feature_org_wiki_introduce",tip:__("功能说明"),createdAt:"2022-09-20"},{area:"GROUP_PAGE",enable:!0,type:"custom",tip_id:"feature_group_introduce",tip:__("功能说明"),createdAt:"2022-10-27"},{area:"GARDEN_PAGE",enable:!0,type:"custom",tip_id:"feature_garden_introduce",tip:__("功能说明"),createdAt:"2022-11-17"},{area:"DASHBOARD_BOOK_MENU",type:"custom",enable:!0,tip_id:"desktop_online_book_entry_tip",customRender:d,placement:"right",containerSelector:'[data-feature-guide-container="desktop_online_book_entry_tip"]',readTrigger:["click"],createdAt:"2023-06-26",styleFix:function(e){e.style.position="absolute",e.style.transform="translateY(-21px)",e.style.left="50px",e.style.zIndex=4},closeGuide:function(e){e.target.closest(".larkui-feature-guide")&&(e.preventDefault(),e.stopPropagation())}},{area:"DASHBOARD_BOOK_MENU_COLLAPSED",type:"custom",enable:!0,tip_id:"desktop_online_book_entry_tip_isCollapsed",customRender:d,placement:"right",containerSelector:'[data-feature-guide-container="desktop_online_book_entry_tip_isCollapsed"]',readTrigger:["click"],createdAt:"2023-06-26",styleFix:function(e){e.style.position="absolute",e.style.left="17px",e.style.top="-30px",e.style.zIndex=4},closeGuide:function(e){e.target.closest(".larkui-feature-guide")&&(e.preventDefault(),e.stopPropagation())}}]},m=r(51),h=r(188),y=p.FEATURES,v={readLiteFeatureGuide:function(e){if("function"==typeof navigator.sendBeacon){var t=new URLSearchParams;t.set("ctoken",Object(h.a)(window)),t.set("type",e.tip_id),navigator.sendBeacon("/api/mine/read_guide?".concat(t.toString()))}else m.a.mine.readGuide({type:e.tip_id});var r=e.containerSelector&&document.querySelector(e.containerSelector);if(r){var n=r.querySelector(".larkui-feature-guide");if(!n)return;n.style.display="none"}},readMiniFeatureGuide:function(e,t){var r=e.tip_id;m.a.mine.readGuide({type:r}),t({type:"guide/readFeatureGuide",payload:{tip_id:r}})},findFeatureGuide:function(e){var t=e.tip_id,r=e.type;return y.find((function(e){return e.tip_id===t&&e.type===r}))},needDisplayGuide:function(e){if("#guide"===window.location.hash)return!0;var t=window.appData.readTip;return!t||!t[e]}};v.FEATURES=y;t.a=v},3594:function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));r(42);var n=r(9),o=(r(71),r(31)),a=(r(56),r(12)),i=(r(155),r(22)),c=r(0),u=r.n(c),l=r(2),s=r.n(l),f=r(302),d=r(951),p={nameVersion:"SaveAsVersion-module_nameVersion_VphI2"};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(){h=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:C(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};l(E,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(N([])));S&&S!==r&&n.call(S,i)&&(E=S);var x=_.prototype=b.prototype=Object.create(E);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==m(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(m(t)+" is not iterable")}return w.prototype=_,o(x,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},j(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(x),l(x,u,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function y(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){var t=e.version,r=v(i.a.useForm(),1)[0],n=function(){var n,o=(n=h().mark((function n(){var o,a;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.validateFields();case 3:return o=n.sent,n.next=6,e.docVersionProxy.name({id:t.id,name:o.name});case 6:a=n.sent,e.onCreated(a),e.onCancel(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){y(a,r,o,i,c,"next",e)}function c(e){y(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return o.apply(this,arguments)}}();return u.a.createElement(o.a,{"data-testid":"history-name-model",closable:!1,maskClosable:!1,onClose:e.onCancel,onCancel:e.onCancel,onOk:n,title:__("保存为版本"),getContainer:function(){var t;return(null===(t=e.getContainer)||void 0===t?void 0:t.call(e))||document.body},visible:!0},u.a.createElement(i.a,{"data-testid":"history-name-form",className:p.nameVersion,form:r,layout:"vertical"},u.a.createElement(i.a.Item,{label:__("版本名称"),name:"name",rules:[{required:!0,message:__("请输入版本名称")},{max:40,message:__("最多 40 个字符")}]},u.a.createElement(a.a,{placeholder:__("最多 40 个字符"),"data-testid":"version-name-input"}))))}function w(e){var t=v(Object(c.useState)(!1),2),r=t[0],o=t[1],a=Object(d.b)();return u.a.createElement(u.a.Fragment,null,a&&u.a.createElement(n.a,{"data-testid":"save-as-version",onClick:function(){o(!0)}},__("保存为版本")),r&&u.a.createElement(b,{getContainer:e.getContainer,version:e.version,onCreated:e.onCreated,docVersionProxy:e.docVersionProxy,onCancel:function(){o(!1)}}))}b.propTypes={version:s.a.object.isRequired,onCreated:s.a.func.isRequired,onCancel:s.a.func.isRequired,docVersionProxy:s.a.object.isRequired},w.propTypes={version:s.a.object.isRequired,onCreated:s.a.func.isRequired,docVersionProxy:s.a.object.isRequired};t.b=Object(f.b)(b,!1)},3613:function(e,t,r){"use strict";r(71);var n=r(31),o=(r(42),r(9)),a=(r(258),r(135)),i=(r(41),r(10)),c=r(0),u=r.n(c),l=r(2),s=r.n(l),f=r(62),d=r.n(f),p=r(1413),m=r(347),h=r(380),y=r(421),v=r(229),g=r(1319),b=r.n(g),w=r(216),_=r(251),E=r(24),O=r(1424),S=r(961),x="DocExport-module_docExport_zwx9b",j="DocExport-module_title_eGdGG",k="DocExport-module_entry_qjwYu",C="DocExport-module_setting_yai1Y",L="DocExport-module_settingTitle_IjcSw",P="DocExport-module_settingUpload_3ymtX";function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===T(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(){R=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new P(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(A([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==T(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=d;return function(a,i){if(o===m)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?h:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=h,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(T(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function F(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){F(a,n,o,i,c,"next",e)}function c(e){F(a,n,o,i,c,"throw",e)}i(void 0)}))}}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var B=Object(_.b)((function(){return Promise.all([r.e(12),r.e(23),r.e(1232)]).then(r.bind(null,4908))}),{suspense:!0}),U=S.a.STATUS,q=function(e){var t=e.bookId,r=e.exportParams,l=e.onCancel,s=e.wrapModal,f=void 0===s||s,g=function(e){var t=e.doc,r=e.bookId,n=e.exportParams,o=G(Object(c.useState)(t||null),2),a=o[0],i=o[1],l=G(Object(c.useState)(!1),2),s=l[0],f=l[1],p=G(Object(c.useState)(t?b.a.SUPPORTED_EXPORT_FORMATS[t.type]:[]),2),m=p[0],h=p[1],v=Object(c.useRef)();return Object(c.useEffect)((function(){var e=a&&("Mind"===a.type||"Board"===a.type),t=null,o=function(){var e=I(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.doc_id){e.next=11;break}return f(!0),e.next=5,y.a.docs.findOne({id:n.toc_node_url,book_id:r});case 5:t=e.sent,i(t),f(!1),h(b.a.SUPPORTED_EXPORT_FORMATS[t.type]),e.next=12;break;case 11:h([b.a.THIRD_PARTY_FORMAT.LAKE]);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(a){if(!e)return;t=document.createElement("div"),document.body.appendChild(t),d.a.render(u.a.createElement(B,{height:"100%",width:"100%",onLoad:function(e){v.current=e},content:a.content}),t)}else o();return function(){t&&(document.body.removeChild(t),t=null)}}),[a]),{state:{currentDoc:a,loading:s,formats:m},lakeBoardEngineRef:v}}(e),w=g.state,_=w.currentDoc,T=w.loading,A=w.formats,D=g.lakeBoardEngineRef,F=G(Object(c.useState)(),2),M=F[0],q=F[1],Y=G(Object(c.useState)(),2),V=Y[0],z=Y[1],H=G(Object(c.useState)(),2),K=H[0],W=H[1],Z=G(Object(c.useState)(U.INIT),2),$=Z[0],J=Z[1],X=G(Object(c.useState)(""),2),Q=X[0],ee=X[1],te=Object(c.useRef)(),re={markdown:[[{label:__("导出 LaTeX 公式图片"),name:"latexType",default:!0,value:1},{label:__("导出 LaTeX 公式为 Markdown 语法"),name:"latexType",value:2}],{label:__("导出保持语雀的锚点"),name:"enableAnchor",value:1},{label:__("导出保持语雀的换行"),name:"enableBreak",value:1}],pdf:[{label:__("导出文档大纲"),default:!0,name:"enableToc",value:1}]},ne=function(){var e=I(R().mark((function e(n){var o,a,i,c,u,l;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={type:n,force:0},te.current&&(a=te.current.getValue())&&(o.options=JSON.stringify(a)),c=66e4/(i=5e3),u=0;case 5:if(!(u<c)){e.next=33;break}if(e.prev=6,"lakebook"!==n){e.next=13;break}return e.next=10,y.a.books.exports(N(N({},o),{},{id:t,title:r.toc_node_title,toc_node_uuid:r.toc_node_uuid,toc_node_url:r.toc_node_url,with_children:!0}));case 10:l=e.sent,e.next=17;break;case 13:if(!_){e.next=17;break}return e.next=16,y.a.docs.exports(N(N({},o),{},{id:_.id}));case 16:l=e.sent;case 17:if("success"!==l.state){e.next=19;break}return e.abrupt("return",l);case 19:if("error"!==l.state){e.next=23;break}if(!l.error){e.next=22;break}return e.abrupt("return",l.error);case 22:return e.abrupt("return",{error:l.message});case 23:return e.next=25,Object(m.a)(i);case 25:u++,e.next=31;break;case 28:return e.prev=28,e.t0=e.catch(6),e.abrupt("return",{error:e.t0.message});case 31:e.next=5;break;case 33:throw new Error("处理超时，请重试...");case 34:case"end":return e.stop()}}),e,null,[[6,28]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=I(R().mark((function e(t){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_||b.a.SUPPORTED_EXPORT_FORMATS[_.type]){e.next=2;break}return e.abrupt("return");case 2:return q(t),J(U.PROCESSING),W(null),e.prev=5,e.next=8,ne(t);case 8:if(!(r=e.sent).error){e.next=13;break}return J(U.ERROR),ee(r.error),e.abrupt("return");case 13:q(t),J(U.SUCCESS),W(r.url),v.b.download(r.url),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),J(U.ERROR),ee(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t){return e.apply(this,arguments)}}(),ae=(_&&("Mind"===_.type||_.type),function(){var e=I(R().mark((function e(t,r){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D.current&&(null===(n=D.current)||void 0===n||n.export(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),ie=function(e){var t=_&&("Mind"===_.type||"Board"===_.type);!t||_.content?(z(b.a.THIRD_PARTY_FORMAT[e.toUpperCase()]),!t||e!==b.a.THIRD_PARTY_FORMAT.JPG.key&&e!==b.a.THIRD_PARTY_FORMAT.PNG.key?("Show"!==(null==_?void 0:_.type)||"pdf"!==e)&&re[e]?(q(e),J(U.SETTING)):oe(e):ae(e,{filename:_.title})):i.a.warn(__("画板为空，请编辑发布后导出"))},ce=null;return $===U.PROCESSING?ce=V?u.a.createElement("div",{className:C},u.a.createElement("h1",{className:L},__("导出 {type}",{type:V.name})),u.a.createElement(S.a.Processing,{tip:__("正在导出中...")})):null:$===U.SUCCESS?ce=V?u.a.createElement("div",{className:C},u.a.createElement("h1",{className:L},__("导出 {type}",{type:V.name})),u.a.createElement(S.a.Success,{tip:__("文件生成成功"),action:u.a.createElement(h.a,{href:E.g?null:K,desktopDisableHref:!0,target:"_blank",onClick:function(){v.b.download(K)}},__("点击下载"))})):null:$===U.ERROR?ce=u.a.createElement(S.a.Error,{tip:__("文件生成失败"),error:Q,action:u.a.createElement(o.a,{icon:u.a.createElement(p.default,null),size:"small",onClick:function(){oe(M)}},__("重新生成"))}):$===U.INIT&&(ce=u.a.createElement("div",{className:k},u.a.createElement("div",{className:j},__("导出文档")),u.a.createElement(a.a,{spinning:T},u.a.createElement(O.a,{mode:"export",types:A,onSelect:ie})))),ce=u.a.createElement("div",{className:x},ce,function(){if(!V||!_)return null;var e=re[V.key];return e?u.a.createElement("div",{className:C,style:{display:$===U.SETTING?"block":"none"}},u.a.createElement("h1",{className:L},__("{type} 导出配置",{type:V.name})),u.a.createElement(S.a.AdvanceSetting,{wrappedComponentRef:te,target:_,type:V,settings:e,actions:u.a.createElement(o.a,{type:"primary",className:P,onClick:function(){return oe(M)}},__("导出"))})):null}()),u.a.createElement("div",null,f?u.a.createElement(n.a,{title:null,onCancel:l,visible:!0,footer:null,width:640,maskClosable:!1},ce):ce)};q.defaultProps={exportParams:{}},q.propTypes={doc:s.a.object,exportParams:s.a.object,bookId:s.a.number.isRequired,onCancel:s.a.func.isRequired,wrapModal:s.a.bool};t.a=Object(w.b)(q,!0)},3625:function(e,t,r){"use strict";var n=r(0),o=r(3672),a=r(24);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(){c=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:C(e,r,c)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};f(E,u,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(N([])));S&&S!==r&&n.call(S,u)&&(E=S);var x=_.prototype=b.prototype=Object.create(E);function j(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,c,u){var l=p(e[o],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==i(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,u)}),(function(e){r("throw",e,c,u)})):t.resolve(f).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=m;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(t,r,n);if("normal"===l.type){if(o=n.done?v:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(i(t)+" is not iterable")}return w.prototype=_,o(x,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,f(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},j(k.prototype),f(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(x),f(x,s,"Generator"),f(x,u,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function u(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){u(a,n,o,i,c,"next",e)}function c(e){u(a,n,o,i,c,"throw",e)}i(void 0)}))}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=window.desktopAppData.isWin,p=new o.a({platform:d?"windows":"macOS"});t.a=function(e){var t=s(Object(n.useState)(""),2),r=t[0],o=t[1],i=function(){var t=l(c().mark((function t(){var r,n,i,u,l;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(r=window.YuqueDesktopAppJSBridge)||void 0===r||null===(n=r.ipcInvoke)||void 0===n?void 0:n.call(r,{channel:null===a.a||void 0===a.a||null===(i=a.a.SHORTCUT)||void 0===i?void 0:i.GET_SHORTCUT,options:{shortcutKey:e}});case 2:u=t.sent,l=p.shortcutToShowString(u),o(l);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=function(){},f=function(){var e=l(c().mark((function e(){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=window.YuqueDesktopAppJSBridge)||void 0===t||null===(r=t.ipcOn)||void 0===r?void 0:r.call(t,a.a.SHORTCUT.SHORTCUT_CHANGED,(function(e,t){var r=t.value,n=p.shortcutToShowString(r);o(n)}));case 2:u=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(a.a)return i(),f(),function(){var e;null===(e=u)||void 0===e||e()}}),[]),{shortcut:r}}},3638:function(e,t,r){"use strict";r(151);var n=r(66),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(62),l=r.n(u),s=r(1625);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){return a.a.createElement("span",{className:"larkui-feature-guide-sign",style:t,onClick:e,"data-testid":"feature-guide-sign"},a.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-outer"}),a.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-inner"}))}function g(e){var t=e.type,r=void 0===t?"lite":t,i=e.tip,c=e.enableMultiLines,u=e.guideSignContainerStyle,f=h(Object(o.useState)(!0),2),d=f[0],m=f[1];if(!d)return null;var y=document.querySelector(e.containerSelector);if(!y)return null;var g=function(){m(!1),e.onRead()},b=function(){var t=y.querySelector(".larkui-feature-guide");if(t)return t;(t=document.createElement("div")).classList.add("larkui-feature-guide");if(t.classList.add({lite:"larkui-feature-guide-lite",mini:"larkui-feature-guide-mini",custom:"larkui-feature-guide-custom"}[r]),t.setAttribute("data-testid","feature-guide"),["lite","custom"].includes(r)){y.style.position="relative";var n=y.getBoundingClientRect();switch(e.placement){case"right":t.style.left="".concat(n.width+2,"px");break;case"left":t.style.left="-14px";break;case"top":t.style.bottom="".concat((e.offsetY?parseInt(e.offsetY,10):0)+n.height,"px"),t.style.left="".concat(n.width/2-6,"px");break;default:t.style.left="".concat((n.width-12)/2,"px"),t.style.bottom=e.offsetY||"0"}e.styleFix&&e.styleFix(t)}var o=e.readTrigger||[],a=function t(r){r.target.closest(".larkui-feature-guide")&&(r.preventDefault(),r.stopPropagation()),m(!1),e.onRead(),o.forEach((function(r){y.removeEventListener(r,e.closeGuide||t)}))};return o.forEach((function(t){y.addEventListener(t,e.closeGuide||a)})),y.appendChild(t),t}(),w=v(g,u),_=c?"larkui-feature-guide-lite-close-multi-line":"larkui-feature-guide-lite-close";if("mini"===r)return l.a.createPortal(w,b);var E="center"!==e.placement&&"top"!==e.placement;return"custom"===r?l.a.createPortal(a.a.createElement(e.customRender,p(p({},e),{},{sign:w,visible:d,arrowPointAtCenter:E,portalDom:b,onReadGuide:g,setVisible:m})),b):"lite"===r?l.a.createPortal(a.a.createElement(n.a,{overlayClassName:"larkui-feature-guide-lite-tip",arrowPointAtCenter:E,autoAdjustOverflow:!1,defaultVisible:!0,title:a.a.createElement(a.a.Fragment,null,c?a.a.createElement("div",{className:"larkui-feature-guide-content",onClick:g},i):a.a.createElement("span",{className:"larkui-feature-guide-lite-content"},a.a.createElement("strong",null,i)),a.a.createElement("span",{onClick:g,className:_},a.a.createElement(s.default,{width:16,height:16}))),placement:e.placement,visible:d,align:{targetOffset:[0,4]}},w),b):void 0}g.Mini=function(){return a.a.createElement("span",{className:"larkui-feature-guide-mini","data-testid":"standalone-mini-guide"},v((function(){})))},g.defaultProps={enableMultiLines:!1},g.propTypes={type:c.a.oneOf(["lite","mini","custom"]),tip:c.a.oneOfType([c.a.string,c.a.node]),containerSelector:c.a.string.isRequired,readTrigger:c.a.array,placement:c.a.oneOf(["bottomRight","bottomLeft","bottom","right","left","top"]),offsetY:c.a.string,onRead:c.a.func.isRequired,guideSignContainerStyle:c.a.object,enableMultiLines:c.a.bool,customRender:c.a.element,styleFix:c.a.func,closeGuide:c.a.func};t.a=g},3640:function(e,t,r){!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},r=e.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var e,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,o=r.length,a={};n<o;n++)if((e=r[n])&&e[1]in t){for(n=0;n<e.length;n++)a[r[0][n]]=e[n];return a}return!1}(),a={change:o.fullscreenchange,error:o.fullscreenerror},i={request:function(e){var r=o.requestFullscreen;e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[r]():e[r](n?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){t[o.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,r){var n=a[e];n&&t.addEventListener(n,r,!1)},off:function(e,r){var n=a[e];n&&t.removeEventListener(n,r,!1)},raw:o};o?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[o.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[o.fullscreenEnabled])}}}),r?e.exports=i:window.screenfull=i):r?e.exports=!1:window.screenfull=!1}()},3643:function(e,t,r){"use strict";r(41);var n=r(10),o=r(0),a=r.n(o),i=r(2),c=r.n(i),u=r(3594);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(){s=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:C(e,r,c)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",h="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};f(E,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(N([])));S&&S!==r&&n.call(S,i)&&(E=S);var x=_.prototype=b.prototype=Object.create(E);function j(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=p(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==l(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=m;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=p(t,r,n);if("normal"===l.type){if(o=n.done?v:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(l(t)+" is not iterable")}return w.prototype=_,o(x,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,f(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},j(k.prototype),f(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(x),f(x,u,"Generator"),f(x,i,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function f(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e){var t=e.doc,r=e.docDomain,i=e.type,c=d(Object(o.useState)(null),2),l=c[0],p=c[1],m=d(Object(o.useState)(!1),2),h=m[0],y=m[1],v=function(){var o,a=(o=s().mark((function o(){var a,c;return s().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.docVersionProxy.find({doc_id:t.id,doc_type:r,draft:"published"===i?0:1,limit:1});case 2:1===(a=o.sent).length?p(a[0]):(c="published"===i?__("文档尚未发布"):__("暂无历史记录，请先保存文档"),n.a.warning(c)),y(!1);case 5:case"end":return o.stop()}}),o)})),function(){var e=this,t=arguments;return new Promise((function(r,n){var a=o.apply(e,t);function i(e){f(a,r,n,i,c,"next",e)}function c(e){f(a,r,n,i,c,"throw",e)}i(void 0)}))});return function(){return a.apply(this,arguments)}}();return Object(o.useEffect)((function(){v()}),[]),h||!l?null:a.a.createElement(u.b,{version:l,docVersionProxy:e.docVersionProxy,onCancel:e.onCancel,onCreated:e.onCreated||function(e){n.a.success(__("保存版本成功，点击查看 {link}",{link:a.a.createElement("a",{href:"/r/doc_versions/".concat(e.id),target:"_blank","data-testid":"version-link"},e.name)}))}})}m.propTypes={doc:c.a.object.isRequired,docDomain:c.a.string.isRequired,type:c.a.oneOf(["draft","published"]),onCancel:c.a.func.isRequired,onCreated:c.a.func,docVersionProxy:c.a.object.isRequired},t.a=m},3649:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(469),i=r(3552),c=r(302),u=r(3638);t.a=Object(c.b)(Object(a.d)((function(e){return{guide:e.guide}}))((function(e){var t=e.guide,r=e.tip_id;return Object(n.useEffect)((function(){var e=i.a.findFeatureGuide({tip_id:r,type:"lite"});e&&i.a.readLiteFeatureGuide(e)}),[]),o.a.createElement("div",{className:e.className||"",style:e.style,"data-testid":"guide_".concat(r),onClick:function(){var t=i.a.findFeatureGuide({tip_id:r,type:"mini"});i.a.readMiniFeatureGuide(t,e.dispatch)}},e.children,("#guide"===window.location.hash||!t.readTip[r])&&o.a.createElement(u.a.Mini,null))})),!1)},3669:function(e,t,r){"use strict";r(71);var n=r(31),o=(r(42),r(9)),a=(r(41),r(10)),i=r(0),c=r.n(i),u=r(2),l=r.n(u),s=r(216),f=r(146),d=r(1220),p=r(1240);r(1336);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function h(){h=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:C(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",y="executing",v="completed",g={};function b(){}function w(){}function _(){}var E={};l(E,i,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(N([])));S&&S!==r&&n.call(S,i)&&(E=S);var x=_.prototype=b.prototype=Object.create(E);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==m(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?v:p,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(m(t)+" is not iterable")}return w.prototype=_,o(x,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,l(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},j(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(x),l(x,u,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function y(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){var t=v(Object(i.useState)(e.doc.title),2),r=t[0],u=t[1],l=v(Object(i.useState)(-1),2),s=l[0],m=l[1],g=function(){var t,n=(t=h().mark((function t(){var n,o,i,u,l,p,m;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.book,o=e.doc,i=e.docletType,u=e.onOpenTemplateSelector,l=e.inEdit,s===f.TYPE.BOOK?(p=n.id,m=f.TARGET_TYPE.BOOK):s===f.TYPE.PERSONAL?(p=window.appData.me.id,m=f.TARGET_TYPE.USER):(p=n.user_id,m=f.TARGET_TYPE.USER),Object(d.e)(p,m,s,i,r,o.id,l).then((function(){var t=c.a.createElement("span",null,__("模板已创建")," ",c.a.createElement("a",{onClick:u},__("查看全部模板")));a.a.success(t),e.onCancel()})).catch((function(e){console.error(e)}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){y(a,n,o,i,c,"next",e)}function c(e){y(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),b=e.group,w=e.organization,_=e.isDesktop;return c.a.createElement(n.a,{className:"modal-without-padding",visible:e.visible,style:{top:78},width:"368px",onCancel:e.onCancel,title:e.modalTitle,footer:c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,{onClick:e.onCancel},__("取消")),c.a.createElement(o.a,{type:"primary",onClick:g},__("确定")))},c.a.createElement(p.a,{newTemplateName:r,onSetNewTemplateName:u,onSetSelectedScope:m,group:b,organization:w,isDesktop:_}))}b.propTypes={visible:l.a.bool,onCancel:l.a.func,modalTitle:l.a.string,docletType:l.a.string,doc:l.a.object,book:l.a.object,group:l.a.object,organization:l.a.object,isDesktop:l.a.bool,onOpenTemplateSelector:l.a.func,templateProxy:l.a.object,docProxy:l.a.object,inEdit:l.a.bool},t.a=Object(s.b)(b,!0)},3680:function(e,t,r){"use strict";r(71);var n=r(31),o=(r(41),r(10)),a=r(0),i=r.n(a),c=r(65),u=r.n(c),l=r(3640),s=r.n(l),f=r(80),d=r.n(f),p=r(32),m=r(491),h=r.n(m),y=r(1220),v=r(3498),g=r(240),b=r(3541),w=r(1197),_=r(3415),E=r(113),O=r(787),S=r(24);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function j(){j=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:C(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function g(){}function b(){}var w={};l(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(N([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=b.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==x(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===m)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?h:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=h,n.method="throw",n.arg=l.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(x(t)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),l(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),l(O,u,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){P(a,n,o,i,c,"next",e)}function c(e){P(a,n,o,i,c,"throw",e)}i(void 0)}))}}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var D=u()("doc:useDocAction"),R=window.appData,F=R.isYuqueMobileApp,I=R.userSettings,G=function(e,t,r){if(window.__engine&&window.__engine.execCommand)return window.__engine[e](t,r)},M=h()((function(e){G("execCommand","defaultFontsize",e),G("execCommand","clearDefaultFontsize")}),200),B=h()((function(e){G("execCommand","paragraphSpacing",e)})),U=h()((function(e){G("execCommand","autoSpacing",!!e)}));t.a=function(e){var t=e.book,c=e.doc,u=e.commandParams,l=e.dispatch,f=e.onCommandsExecuted,m=e.onSelectTemplate,x=e.onCreateDoc,k=e.history,L=e.spaMode,P=Object(w.a)(t),N=A(Object(a.useState)(null),2),R=N[0],q=N[1],Y=A(Object(a.useState)(!1),2),V=Y[0],z=Y[1],H=A(Object(a.useState)(!1),2),K=H[0],W=H[1],Z=A(Object(a.useState)("false"!==(null==I?void 0:I.recordDocSetting)),2),$=Z[0],J=Z[1];Object(a.useEffect)((function(){Promise.all([r.e(4),r.e(5),r.e(6),r.e(0),r.e(1264)]).then(r.bind(null,3684))}),[]);var X=function(){return G("queryCommandValue","defaultFontsize",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},Q=A(Object(a.useState)(G("queryCommandValue","typography")),2),ee=Q[0],te=Q[1],re=A(Object(a.useState)(X(!1)),2),ne=re[0],oe=re[1],ae=A(Object(a.useState)(G("queryCommandValue","paragraphSpacing")),2),ie=ae[0],ce=ae[1],ue=A(Object(a.useState)(!!G("queryCommandValue","autoSpacing")),2),le=ue[0],se=ue[1],fe=Object(a.useCallback)(h()((function(e,t,r,n){if(!e)return!1;var o=["default"===t?0:1];15!==r?o.push(r):o.push(15),o.push(n?1:0);var a=o.join(",");b.a.update({docsSetting:a}),l({type:"proxy.web/mine.updateUserSettings",payload:{data:{key:"docsSetting",value:a}}})}),500),[]),de=Object(a.useCallback)(h()((function(e,t,r,n){b.a.update({recordDocSetting:e}),l({type:"proxy.web/mine.updateUserSettings",payload:{data:{key:"recordDocSetting",value:e}}}).then((function(){fe(e,t,r,n)}))}),500),[]),pe=Object(a.useCallback)((function(e){oe(e),M(e),fe($,ie,e,le)}),[$,ie,ne,le]),me=Object(a.useCallback)((function(e){ce(e),B(e),fe($,e,ne,le)}),[$,ie,ne,le]),he=Object(a.useCallback)((function(e){se(!!e),U(!!e),fe($,ie,ne,!!e)}),[$,ie,ne,le]),ye=Object(a.useCallback)((function(e){J(e),de(e,ie,ne,le)}),[$,ie,ne,le]),ve=function(){q(null)},ge=function(){var e=T(j().mark((function e(){var r,n,a,i,c,l,s,f,d,m,h,y,v,g=arguments;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=C(C({},r=g.length>0&&void 0!==g[0]?g[0]:{}),u),n=r.slug||O.a.createSlug(),r.slug=n,r.book_id=t.id,r.format||(r.format=_.a.getDefaultDocumentFormat(r.type)),a=null,e.prev=7,!L||!k){e.next=26;break}return e.next=11,O.a.createDoc(r,void 0,{useOriginResp:!0});case 11:if(i=e.sent,c=i.data,l=i.toc,D("doc created",{cmd:R,doc:c}),s="/".concat(t.namespace,"/").concat(c.slug,"/edit"),f=s,"doc_toc"===r.create_from&&((d=new URLSearchParams(window.location.search)).set("toc_node_uuid",r.toc_node_uuid),f="".concat(s,"?").concat(d.toString())),P.current.id!==t.id){e.next=23;break}if("markdown"===c.format?(m=new URL(s,window.location.origin),a=a||window,"doc_toc"===r.create_from&&m.searchParams.set("toc_node_uuid",r.toc_node_uuid),a.location.href=m.href):k.push(f),!x){e.next=23;break}return x(c,l),e.abrupt("return");case 23:ve(),e.next=40;break;case 26:if(L){e.next=40;break}return e.next=29,O.a.createDoc(r);case 29:if(h=e.sent,D("doc created",{cmd:R,doc:h}),y="/".concat(t.namespace,"/").concat(h.slug,"/edit"),v=new URL(y,window.location.origin),a=a||window,"doc_toc"===r.create_from&&v.searchParams.set("toc_node_uuid",r.toc_node_uuid),ve(),!x){e.next=39;break}return x(h),e.abrupt("return");case 39:a.location.href=v.href;case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(7),"limit_exceeded"===e.t0.code?o.a.error(e.t0.message):e.t0.code!==p.LIMIT_RULE_CODE.max_doc_note_number&&a&&a.close();case 45:return e.prev=45,a=null,e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[7,42,45,48]])})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=__("确认删除 {title}？",{title:c.title});n.a.confirm({title:e,content:__(""),onOk:function(){l({type:"proxy.web/docs.destroy",payload:{data:{id:c.id}}}).then((function(e){f({cmd:E.a.DOC.delete.cmd,result:e})}))}})},we=Object(v.a)(),_e=we.loadTemplateSelector,Ee=we.showTemplateSelector,Oe=we.contextHolder,Se=function(){var e=T(j().mark((function e(){var r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee({book:t});case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",ve());case 5:return e.abrupt("return",Object(y.d)(t,r,u));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(n,a){var i=u;switch(D("exec",{cmd:n,params:i}),q(n),n){case E.a.DOC.delete.cmd:be();break;case E.a.DOC.print.cmd:window.print();break;case E.a.DOC.enter_read_mode.cmd:case E.a.DOC.publish_enter_read_mode.cmd:window.__readyToPublish({enterReadMode:!0});break;case E.a.DOC.open_in_browser.cmd:window.YuqueDesktopAppJSBridge.openExternalLink("".concat(window.location.origin,"/").concat(t.namespace,"/").concat(c.slug));break;case E.a.DOC.fullscreen.cmd:case E.a.DOC.exit_fullscreen.cmd:s.a.enabled?s.a.toggle():o.a.error(__("你的浏览器不支持全屏功能"));break;case E.a.DOC.raw.cmd:window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/html");break;case E.a.DOC.view_markdown.cmd:window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/markdown");break;case E.a.DOC.presentation.cmd:window.open("".concat(window.location.pathname.replace(/\/+$/,""),"/present"));break;case E.a.DOC.create_doc.cmd:ge({type:"Doc",format:d.a.FORMAT.LAKE,title:i.title,slug:i.slug});break;case E.a.NOTE.create_note.cmd:var p,h;if(window.appData.isDesktopApp)null===(p=window.YuqueDesktopAppJSBridge)||void 0===p||null===(h=p.ipcSend)||void 0===h||h.call(p,{channel:S.a.MINI_WINDOW.OPEN_WINDOW});else Promise.all([r.e(4),r.e(5),r.e(6),r.e(0),r.e(1264)]).then(r.bind(null,3684)).then((function(e){e.default.show()}));break;case E.a.DOC.create_doc_template.cmd:ge({title:__("自定义模板"),type:d.a.TYPE.DOC,format:d.a.FORMAT.LAKE,tag:"YUQUE_TEMPLATE"});break;case E.a.DOC.create_from_template.cmd:m&&m(),Se();break;case E.a.DOC.create_markdown.cmd:ge({type:"Doc",format:d.a.FORMAT.MARKDOWN,title:i.title,slug:i.slug});break;case E.a.DOC.create_sheet.cmd:ge({type:"Sheet",title:i.title,slug:i.slug});break;case E.a.DOC.create_mind.cmd:case E.a.DOC.create_board.cmd:ge({type:"Board",title:i.title,slug:i.slug});break;case E.a.DOC.create_table.cmd:ge({type:"Table",title:i.title,slug:i.slug});break;case E.a.DOC.create_thread.cmd:window.location.href="/".concat(t.namespace,"/new");break;case E.a.DOC.edit.cmd:var y="/".concat(t.namespace,"/").concat(c.slug,"/edit");F?g.a.pushWebWindow({url:"".concat(window.location.origin).concat(y)}):window.location.href=y;break;case E.a.DOC.manage_table.cmd:case E.a.DOC.manage_doc.cmd:window.location.href="/r/".concat(t.namespace,"/docs");break;case E.a.DOC.modify_toc.cmd:window.location.href="/r/".concat(t.namespace,"/toc?from=").concat(c.slug);break;case E.a.DOC.exit.cmd:window.location.href="/dashboard";break;case E.a.DOC.archive.cmd:l({type:"proxy.web/docs.archive",payload:{data:{id:c.id}}}).then((function(e){o.a.success(__("话题已归档")),f({cmd:E.a.DOC.archive.cmd,result:e})}));break;case E.a.DOC.unarchive.cmd:l({type:"proxy.web/docs.unarchive",payload:{data:{id:c.id}}}).then((function(e){o.a.success(__("已取消归档")),f({cmd:E.a.DOC.unarchive.cmd,result:e})}));break;case E.a.DOC.pin.cmd:l({type:"proxy.web/docs.pin",payload:{data:{id:c.id}}}).then((function(e){o.a.success(__("置顶成功")),f({cmd:E.a.DOC.pin.cmd,result:e})}));break;case E.a.DOC.unpin.cmd:l({type:"proxy.web/docs.unpin",payload:{data:{id:c.id}}}).then((function(e){o.a.success(__("已取消置顶")),f({cmd:E.a.DOC.unpin.cmd,result:e})}));break;case E.a.DOC.send_mail.cmd:z(!0);break;case E.a.DOC.document_layout_select.cmd:case E.a.DOC.document_layout.cmd:!function(e){G("execCommand","layout",e)}(a);break;case E.a.DOC.document_typography.cmd:!function(e){te(e),G("execCommand","typography",e),X()||oe(X(!1))}(a);break;case E.a.DOC.document_fontsize.cmd:pe(a);break;case E.a.DOC.document_paragraph_spacing.cmd:me(a);break;case E.a.DOC.document_auto_spacing.cmd:he(a);break;case E.a.DOC.document_record_setting.cmd:ye(a);break;default:e.onCommandsExecuted({cmd:n})}};return i.a.useEffect((function(){R&&(null==R?void 0:R.cmd)===E.a.DOC.create_from_template.cmd&&_e()}),[R]),i.a.useEffect((function(){window.__execAction=function(t,r){[E.a.DOC.save_published_as_version.cmd,E.a.DOC.save_editing_as_version.cmd].includes(t)&&(xe(t,r),e.onSelect({key:t}))}}),[]),{cmd:R,sendAlimail:V,mailSending:K,typography:ee,defaultFontSize:ne,recordDocSetting:$,paragraphSpacing:ie,autoSpacing:le,reset:ve,doAction:xe,setSendAlimail:z,setMailSending:W,getEditorLayout:function(){return G("queryCommandValue","layout")},getWordCount:function(){return G("queryCommandValue","wordCount")},contextHolder:Oe}}},3711:function(e,t,r){"use strict";r(258);var n=r(135),o=(r(42),r(9)),a=(r(56),r(12)),i=(r(41),r(10)),c=r(0),u=r.n(c),l=r(2),s=r.n(l),f=r(160),d=r.n(f),p=r(51),m=(r(209),r(34)),h=r(491),y=r.n(h),v=r(3548),g=r.n(v),b=r(3414),w=r(302),_=r(490);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=E(Object(c.useState)([]),2),r=t[0],n=t[1];return Object(c.useEffect)((function(){p.a.users.mailHistories({}).then((function(e){n(e)}))}),[e]),{mailHistory:r}},x="RecipientSelector-module_recipient_Ds5UW",j="RecipientSelector-module_mention_5r6oN",k="RecipientSelector-module_userForCheck_a4ZZP",C="RecipientSelector-module_mailHistory_-ft0g",L="RecipientSelector-module_title_-yKJG",P="RecipientSelector-module_users_ZwnLM",T="RecipientSelector-module_info_eM40g",A="RecipientSelector-module_avatar_lGHzI",N="RecipientSelector-module_name_HeaN7",D="RecipientSelector-module_dep_B2T89";function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var I=["alibaba-inc.com","antfin.com","list.alibaba-inc.com","cainiao.com"];function G(e){var t=R(Object(c.useState)(!1),2),r=t[0],n=t[1],o=R(Object(c.useState)(e.defaultValue||[]),2),a=o[0],l=o[1],s=S(window.appData.me).mailHistory,f=R(Object(c.useState)([]),2),d=f[0],h=f[1],v=Object(c.useRef)(),w=null,E=__("最多只能选择100个邮箱地址，建议请使用邮件组"),O=__("收件人有重复，已自动去重"),F=function(t){var r=t.length,o=(t=g()(t,(function(e,t){return e.email&&t.email?e.email===t.email:!(!e.login||!t.login)&&e.login===t.login}))).length;o>100?(i.a.warning(E),t.splice(100)):o!==r&&i.a.warning(O),l(t),e.onChange(t),n(!1),h([]),setTimeout((function(){v&&v.current&&v.current.focus()}),100)};Object(c.useEffect)((function(){return function(){w&&(clearTimeout(w),w=null)}}));var G=y()((function(e){(function(e){e=e.split(";");var t=[];if(e.forEach((function(e){if(b.validator.isEmail(e))t.push({name:e,email:e});else{var r=e.match(/([^<]+)<([^>]+)>/);r&&b.validator.isEmail(r[2])&&t.push({name:r[1],email:r[2]})}})),t.length>0){var r=a.concat(t);return F(r),v.current.blur(),!0}return!1})(e)||function(e){if(-1!==e.indexOf("@")){var t=e.split("@"),r=t[1],n=I.filter((function(e){return e.startsWith(r)})).map((function(e){return{name:"".concat(t[0],"@").concat(e),email:"".concat(t[0],"@").concat(e)}}));return h(n),!0}return!1}(e)||(n(!1),p.a.users.complete({q:e.trim(),include_unconfirmed_corp_account:!0}).then((function(e){h(e),v.current.focus()})))}),300),M=a.map((function(e){return e.name}));return u.a.createElement("div",{className:x},u.a.createElement("span",{className:j,onClick:function(){if(window.__engine&&window.__engine.extractMention){var e=window.__engine.extractMention();if(0===(e=e.filter((function(e){return e.name&&e.name.trim()&&e.login&&e.login.trim()}))).length)return void i.a.warn(__("文档中没有 @ 人"));var t=a.concat(e);F(t)}}},__("添加文档中 @ 的人")),u.a.createElement(m.a,{mode:"multiple",style:{width:"100%"},placeholder:__("请输入花名或邮箱地址"),onChange:function(e){var t=a.filter((function(t){return e.includes(t.name)}));F(t)},onFocus:function(){0===a.length&&n(!0)},onSearch:G,onBlur:function(){w&&clearTimeout(w),w=setTimeout((function(){n(!1),h([])}),500)},allowClear:!0,value:M,notFoundContent:null,ref:v}),d.length>0&&u.a.createElement("div",{className:k},d.map((function(e){return u.a.createElement("p",{key:e.email,onClick:function(){!function(e){if(100!==a.length)if(0===a.filter((function(t){return t.email===e.email})).length){var t=a.concat(e);F(t)}else i.a.warning(O);else i.a.warning(E)}(e)}},e.avatar_url&&u.a.createElement(_.a,{className:A,src:e.avatar_url,size:32}),u.a.createElement("span",{className:N},e.name),e.dep&&u.a.createElement("span",{className:D},e.dep))}))),r&&s&&s.length>0&&u.a.createElement("div",{className:C,"data-testid":"mail-history"},u.a.createElement("div",{className:L},__("历史记录")),u.a.createElement("ul",null,s.map((function(e){return u.a.createElement("li",{onClick:function(){!function(e){F(e.mail_list)}(e)},key:e.id},u.a.createElement("p",{className:P},e.mail_list.map((function(e){return e.name})).join(",")),u.a.createElement("p",null,u.a.createElement("span",{className:T},__("标题："),e.title)))})))))}G.propTypes={onChange:s.a.func.isRequired,defaultValue:s.a.array};var M=Object(w.b)(G,!1),B="DocSendMail-module_sendMail_QBA+O",U="DocSendMail-module_recipient_zqM9E",q="DocSendMail-module_title_Af2FA",Y="DocSendMail-module_submitButton_HEsW-",V="DocSendMail-module_mailResult_AhaV4";function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X(n.key),n)}}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=$(e);if(t){var o=$(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Z(e)}(this,r)}}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function J(e,t,r){return(t=X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e){var t=function(e,t){if("object"!==z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===z(t)?t:String(t)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(s,e);var t,r,c,l=W(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),J(Z(t=l.call(this,e)),"ready",(function(){0!==t.state.receiver.length?"sending"!==t.state.mailStatus&&(t.setState({mailStatus:"sending"},(function(){t.props.onMailSending(),t.startClock(5)})),t.timer=setTimeout(t.sendMail,5e3)):i.a.error(__("请选择收件人"))})),J(Z(t),"startClock",(function(e){t.setState({seconds:e}),0!==e&&"sending"===t.state.mailStatus&&(t.clocker=setTimeout((function(){t.startClock(e-1)}),1e3))})),J(Z(t),"sendMail",(function(){var e=t.state,r=e.receiver,n=e.title,o={id:t.props.doc.id,title:n||t.props.doc.title,content:window.__engine?window.__engine.getDocument("text/html",{mode:"inline"}):""};try{o.mail_list=t.normalizeMail(r)}catch(e){return void i.a.error(e.message)}p.a.docs.sendMail(o,{ignoreGlobalMessage:!0}).then((function(e){t.setState({mailStatus:"success",receiver:[]}),t.props.onMailSended()})).catch((function(e){e.status&&e.status>=400&&e.status<500?t.setState({mailStatus:"block",mailBlockMessage:e.message}):t.setState({mailStatus:"failed"})}))})),J(Z(t),"retry",(function(){t.setState({mailStatus:"normal",mailBlockMessage:""})})),J(Z(t),"normalizeMail",(function(e){return e.map((function(e){return d()(e,["email","login","user_id","name"])}))})),J(Z(t),"onChangeReceiver",(function(e){t.setState({receiver:e})})),J(Z(t),"onChangeTitle",(function(e){t.setState({title:e.target.value})})),J(Z(t),"renderMailSelector",(function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:q},u.a.createElement("h5",null,__("标题")),u.a.createElement(a.a,{onChange:t.onChangeTitle,defaultValue:t.props.doc.title})),u.a.createElement("div",{className:U},u.a.createElement("h5",null,__("收件人")),u.a.createElement(M,{onChange:t.onChangeReceiver,defaultValue:t.state.receiver})),u.a.createElement("div",{className:Y},u.a.createElement(o.a,{onClick:t.ready,type:"primary"},__("发送"))))})),J(Z(t),"cancel",(function(){t.timer&&(clearTimeout(t.timer),t.timer=null),t.clocker&&(clearTimeout(t.clocker),t.clocker=null),t.setState({mailStatus:"normal",mailBlockMessage:""}),i.a.warning(__("已取消发送")),t.props.onMailSended()})),J(Z(t),"renderSending",(function(){return u.a.createElement("div",{className:V},u.a.createElement(n.a,{justify:"block"}),u.a.createElement("p",null,__("邮件即将在 {seconds} 秒后发送，{cancel}",{cancel:u.a.createElement("a",{href:"#",onClick:t.cancel},__("撤销")),seconds:t.state.seconds||0})))})),J(Z(t),"renderSuccess",(function(){return u.a.createElement("div",{className:V},u.a.createElement("span",{className:"larkicon larkicon-check-o"}),u.a.createElement("p",null,__("发送成功")))})),J(Z(t),"renderFailed",(function(){return u.a.createElement("div",{className:V},u.a.createElement("span",{className:"larkicon larkicon-error"}),u.a.createElement("p",null,__("发送失败, 请{retry}",{retry:u.a.createElement("a",{href:"#",onClick:t.retry},__("重新发送"))})))})),J(Z(t),"renderBlock",(function(){return u.a.createElement("div",{className:V},u.a.createElement("span",{className:"larkicon larkicon-error"}),u.a.createElement("p",null,t.state.mailBlockMessage))})),J(Z(t),"renderCanceled",(function(){return u.a.createElement("div",{className:V},u.a.createElement("p",null,__("已取消发送")))})),t.state={receiver:[]},t}return t=s,(r=[{key:"componentDidMount",value:function(){this.setState({mailStatus:"normal",mailBlockMessage:""})}},{key:"render",value:function(){var e;switch(this.state.mailStatus){case"sending":e=this.renderSending();break;case"success":e=this.renderSuccess();break;case"failed":e=this.renderFailed();break;case"block":e=this.renderBlock();break;case"canceled":e=this.renderCanceled();break;default:e=this.renderMailSelector()}return u.a.createElement("div",{className:B,"data-testid":"send-mail-modal"},u.a.createElement("h4",null,__("发送到邮箱")),u.a.createElement("p",null,__("将文档内容发送到指定邮箱")),e)}}])&&H(t.prototype,r),c&&H(t,c),Object.defineProperty(t,"prototype",{writable:!1}),s}(c.PureComponent);Q.defaultProps={},Q.propTypes={onMailSended:s.a.func,onMailSending:s.a.func,doc:s.a.object};t.a=Q},3869:function(e,t,r){"use strict";r.r(t);r(71);var n=r(31),o=(r(489),r(98)),a=r(0),i=r.n(a),c=r(2),u=r.n(c),l=r(65),s=r.n(l),f=r(469),d=r(80),p=r.n(d),m=r(500),h=r(3649),y=r(3643),v=r(3669),g=r(3613),b=r(3648),w=r(1445),_=r(45),E=r(51),O=r(3625),S=r(113),x=r(787),j=r(302),k=r(3590),C=r(951),L=r(1401),P=r(24),T=r(501),A=r(3711),N="DocActionMenu-module_wrap_oZQ06",D="DocActionMenu-module_menuItemContainer_pMpjo",R="DocActionMenu-module_menuTileWrapper_WYEAB",F="DocActionMenu-module_iconContainer_QaDi2",I="DocActionMenu-module_menu_6Bn5J",G=r(3680),M=s()("doc:actionMenu"),B=function(e){var t=Object(G.a)(e),r=t.cmd,a=t.sendAlimail,c=t.mailSending,u=t.reset,l=t.doAction,s=t.contextHolder,f=t.setSendAlimail,d=t.setMailSending,j=e.book,B=e.className,U=e.doc,q=e.commandParams,Y=e.useDynamicShortcutTip;M("render, currect action",r,q);var V,z,H,K=Object(C.b)(),W=Object(O.a)("createNewDoc").shortcut;return i.a.createElement("div",{className:"".concat(N," ").concat(B)},i.a.createElement(o.a,{className:I,selectable:!1,onClick:function(t){var r=t.key;e.onSelect({key:r}),l(r),Object(T.a)("c34619.d69461",{create_type:r})}},(V=e.commands,z=e.disabledCommands,H={},z.forEach((function(e){H[e.cmd]=!0})),V.slice(0).map((function(e,t){if("divide"===e.cmd)return i.a.createElement(o.a.Divider,{key:"".concat(t,"-divider")});var r=e.menuTitle||e.title,n=Y?i.a.createElement("div",{className:R},i.a.createElement("span",null,r),i.a.createElement("span",null,e.cmd===S.a.DOC.create_doc.cmd?W:"")):r;return!K&&P.g&&[S.a.DOC.create_from_template.cmd,S.a.DOC.import_to_book.cmd,S.a.DOC.create_table.cmd,S.a.CATALOG.create_title.cmd,S.a.CATALOG.create_link.cmd].includes(e.cmd)?i.a.createElement(o.a.Item,{key:e.cmd,disabled:!0,className:"doc-action-menu-item-".concat(e.cmd),"data-testid":"doc-action-menu-item-".concat(e.cmd)},i.a.createElement(L.a,{tooltipPlacement:"right"},i.a.createElement("div",{className:D,"data-aspm-click":e.aspm},e.icon&&i.a.createElement(_.b,{className:F,name:e.icon,width:20,height:20}),e.tip_id?i.a.createElement(h.a,{tip_id:e.tip_id},r):r))):e===S.a.DOC.create_doc?i.a.createElement(o.a.Item,{key:e.cmd,disabled:H[e.cmd]||!1,className:"doc-action-menu-item-".concat(e.cmd),"data-testid":"doc-action-menu-item-".concat(e.cmd)},i.a.createElement(k.a,{content:[__("点击「文档」")],placement:"right",taskId:m.TASK_ID.NOVICE_OFFER,stage:m.ACTION.new_doc,step:2,width:146,height:30,borderRadius:8,popWidth:162,action:"click",offsetY:3,offsetX:1,getPopupContainer:function(e){var t;return null===(t=e.parentNode)||void 0===t?void 0:t.parentNode}},i.a.createElement("div",{className:D,"data-aspm-click":e.aspm},e.icon&&i.a.createElement(_.b,{className:F,name:e.icon,width:20,height:20}),e.tip_id?i.a.createElement(h.a,{tip_id:e.tip_id},n):n))):i.a.createElement(o.a.Item,{key:e.cmd,disabled:H[e.cmd]||!1,className:"doc-action-menu-item-".concat(e.cmd),"data-testid":"doc-action-menu-item-".concat(e.cmd)},i.a.createElement("div",{className:D,"data-aspm-click":e.aspm},e.icon&&i.a.createElement(_.b,{className:F,name:e.icon,width:20,height:20}),e.tip_id?i.a.createElement(h.a,{tip_id:e.tip_id},n):n))})))),s,r===S.a.DOC.export_doc.cmd&&i.a.createElement(g.a,{doc:U,bookId:j.id,onCancel:u,exportParams:q,canExportMultiple:q.can_export_multiple}),r===S.a.BOOK.export_book.cmd&&i.a.createElement(w.a,{visible:!0,book:j,exportParams:q,onCancel:u}),r===S.a.DOC.import_to_doc.cmd&&i.a.createElement(b.a,{book:j,formats:x.a.getImportFormats({multi:!1}),importType:p.a.IMPORT_TYPE.PARSE,onCancel:u,onSuccess:function(t){e.onCommandsExecuted({cmd:r,result:t})}}),r===S.a.DOC.import_to_book.cmd&&i.a.createElement(b.a,{book:j,importParams:q,formats:x.a.getImportFormats({multi:!0}),importType:p.a.IMPORT_TYPE.CREATE,onCancel:u,onSuccess:function(t){e.onCommandsExecuted({cmd:r,result:t})},group:window.appData.group}),r===S.a.DOC.save_as_template.cmd&&i.a.createElement(v.a,{visible:r===S.a.DOC.save_as_template.cmd,onCancel:u,modalTitle:__("另存为模板"),book:j,doc:e.doc,group:window.appData.group,organization:window.appData.organization,docletType:e.doc.type,onOpenTemplateSelector:function(){return l(S.a.DOC.create_from_template.cmd)},inEdit:e.inEdit}),r===S.a.DOC.save_published_as_version.cmd&&i.a.createElement(y.a,{doc:U,docDomain:"Doc",type:"published",onCancel:u,docVersionProxy:E.a.docVersions}),i.a.createElement(n.a,{width:500,visible:a,footer:null,closable:!c,maskClosable:!1,onCancel:function(){f(!1)}},a&&i.a.createElement(A.a,{onMailSended:function(){d(!1)},onMailSending:function(){d(!0)},doc:U})))};B.defaultProps={className:"",disabledCommands:[],onSelect:function(){},onCommandsExecuted:function(){},commandParams:{}},B.propTypes={className:u.a.string,group:u.a.object,book:u.a.object.isRequired,doc:u.a.object,commands:u.a.array.isRequired,commandParams:u.a.object,disabledCommands:u.a.array,onSelect:u.a.func,onCommandsExecuted:u.a.func,dispatch:u.a.func,onSelectTemplate:u.a.func,inEdit:u.a.bool,onCreateDoc:u.a.func,menuId:u.a.string,spaMode:u.a.bool,useDynamicShortcutTip:u.a.bool};t.default=Object(f.d)()(Object(j.b)(B))}}]);