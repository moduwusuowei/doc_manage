(window.webpackJsonp=window.webpackJsonp||[]).push([[1285],{4035:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(3663),c=n(2),i=n.n(c),u=function(e){var t,n=e.type,r=void 0===n?"Doc":n,c=e.target,i=e.style;return r&&c&&window.appData.isYuque?((null===(t=window.appData)||void 0===t?void 0:t.settings)||{}).disable_ip_region_model?null:(Object(a.a)()||Object(a.b)())&&("Doc"!==r||c.first_published_at)&&c.region?o.a.createElement("span",{style:i},__("IP 属地"),c.region||__("未知")):null:null};u.propTypes={target:i.a.object.isRequired,type:i.a.string},t.a=u},5765:function(e,t,n){"use strict";n.r(t);n(151);var r=n(66),o=n(2),a=n.n(o),c=n(0),i=n.n(c),u=n(247),l=n.n(u),s=n(469),p=n(14),m=n.n(p),d=n(5),f=n.n(d),b=n(108),y=n(705),w=n(260),h=n(4035),v=n(302),_=n(3820),g=n(787),j=n(3663),E=n(4665),O={wrapper:"ReaderMeta-module_wrapper_GsEmw",readCount:"ReaderMeta-module_readCount_y6mlm",canHover:"ReaderMeta-module_canHover_t0DQC",reportBtn:"ReaderMeta-module_reportBtn_aC9km",viewBtn:"ReaderMeta-module_viewBtn_Vo9dK",readers:"ReaderMeta-module_readers_LNdps"};function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(this,arguments)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var o=T(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}(this,n)}}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function C(e,t,n){return(t=N(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===S(t)?t:String(t)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(c,e);var t,n,o,a=R(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),C(M(t=a.call(this,e)),"handleShowStaticModal",(function(){var e=t.props.showDocStatisticModal;t.canShowModal&&(e(),Object(b.spmClick)("c308305.d320452"))})),C(M(t),"renderReadCountTip",(function(){if(!t.canShowModal){var e=t.props.doc.hits||0;return __("文档浏览次数：{num}",{num:e})}return __("点击查看详情")})),C(M(t),"showReportEntry",(function(){var e=t.props,n=e.doc,r=e.book,o=e.group,a=e.me;return window.appData.isPublicCloud&&n.user_id!==a.id&&(Object(j.a)(o,r,n)||Object(j.b)(window.appData.share,r,n))}));var n=e.pageType,r=e.doc;return t.canShowModal=g.a.canViewReaders(n,{doc:r,group:window.appData.group,isYuque:window.appData.isYuque}),t}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.doc,n=e.book,o=e.showUpdateTime,a=e.litecomment,c=this.props.showAuthor,u=l()(a.commentCount)?" ":a.commentCount;return i.a.createElement("div",{className:"".concat(O.wrapper)},i.a.createElement("div",{className:"meta-left"},i.a.createElement(y.d,{doc:t,showAuthor:c,showType:"doc"}),o&&i.a.createElement("div",{className:"meta-item"},i.a.createElement(r.a,{title:__("更新于 {time}",{time:m()(new Date(t.content_updated_at)).format("YYYY-MM-DD HH:mm:ss")}),placement:"topLeft"},i.a.createElement("span",{className:"larkicon larkicon-clock"}),i.a.createElement("span",{className:"item-text"},i.a.createElement(w.a,{time:t.content_updated_at})))),i.a.createElement(r.a,{title:this.renderReadCountTip(),placement:"topLeft"},i.a.createElement("div",{className:f()("meta-item",O.readCount,C({},O.canHover,this.canShowModal)),onClick:this.handleShowStaticModal},i.a.createElement("span",{className:"larkicon larkicon-read"}),i.a.createElement("span",{className:f()("item-text",O.text)},t.hits||0))),n.enable_comment&&i.a.createElement("div",{className:"meta-item"},i.a.createElement(r.a,{title:__("评论次数：{num}",{num:u||0}),placement:"topLeft"},i.a.createElement("span",{className:"larkicon larkicon-comments"}),i.a.createElement("span",{className:"item-text"},u||0))),i.a.createElement("div",{className:"meta-item"},i.a.createElement(h.a,{target:t,type:"Doc"})),this.showReportEntry()&&i.a.createElement(_.a,{targetId:t.id,targetType:"Doc"},(function(e){return i.a.createElement("div",{className:f()("meta-item",O.reportBtn),style:{marginLeft:12},onClick:e.onShowPanel},i.a.createElement("span",null,__("举报")))}))))}}])&&k(t.prototype,n),o&&k(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(c.PureComponent);B.defaultProps={showAuthor:!0,showUpdateTime:!0,pageType:"read"},B.propTypes={doc:a.a.object,litecomment:a.a.object,book:a.a.object,me:a.a.object,group:a.a.object,showAuthor:a.a.bool,showUpdateTime:a.a.bool,pageType:a.a.oneOf(["read","share"]),showDocStatisticModal:a.a.func};t.default=Object(v.b)(Object(s.d)((function(e){return e}))((function(e){var t=Object(E.useDocStatisticStore)().show;return i.a.createElement(B,D({},e,{showDocStatisticModal:t}))})))}}]);