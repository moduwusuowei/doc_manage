/*! For license information please see c__BookOverview.bbd87b84.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1186,18,229,356,588,802,902,953,1035,1122],{1003:function(t,e,r){var n=r(568),o=r(213),i=r(262),a=r(76),c=r(190),u=r(263),l=r(265),s=r(365),f=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(c(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||s(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(l(t))return!n(t).length;for(var r in t)if(f.call(t,r))return!1;return!0}},1522:function(t,e,r){"use strict";r(716);var n=r(427);r(1538);e.a=n.a},1568:function(t,e,r){"use strict";var n=r(4),o=r(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},a=r(19),c=function(t,e){return o.createElement(a.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:i}))};c.displayName="EditOutlined";e.a=o.forwardRef(c)},1569:function(t,e,r){"use strict";var n=r(4),o=r(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},a=r(19),c=function(t,e){return o.createElement(a.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:i}))};c.displayName="CopyOutlined";e.a=o.forwardRef(c)},1570:function(t,e,r){"use strict";var n=r(4),o=r(0),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},a=r(19),c=function(t,e){return o.createElement(a.a,Object(n.a)(Object(n.a)({},t),{},{ref:e,icon:i}))};c.displayName="EnterOutlined";e.a=o.forwardRef(c)},1617:function(t,e){t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,r=[],n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||r.forEach((function(e){t.addRange(e)})),e&&e.focus()}}},1623:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-arrow-right",t.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M101.005 198.563c-3.834-3.834-3.904-10.008-.21-13.927l.21-.215 48.99-48.99c3.834-3.834 3.904-10.008.21-13.927l-.21-.215-48.99-48.99c-3.905-3.905-3.905-10.237 0-14.142 3.834-3.834 10.008-3.904 13.927-.21l.215.21 48.99 48.99c11.599 11.598 11.715 30.331.348 42.072l-.348.354-48.99 48.99c-3.905 3.905-10.237 3.905-14.142 0Z",fill:"currentColor",fillRule:"nonzero"}))},1724:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 16 17",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-icon-nolable",t.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"m3.779 5.94.884.885-1.177 1.177a1.253 1.253 0 0 0 0 1.77l2.941 2.94.12.106a1.249 1.249 0 0 0 1.6-.061l.012-.01 1.213-1.214.884.884-1.158 1.158-.15.143a2.499 2.499 0 0 1-3.405-.123l-2.94-2.94A2.503 2.503 0 0 1 2.6 7.119l1.178-1.178Zm.078-2.183a.6.6 0 0 1 .849 0l7.637 7.637a.6.6 0 1 1-.849.849L3.857 4.606a.6.6 0 0 1 0-.849Zm5.208-2.044.183.009L12.557 2a1.875 1.875 0 0 1 1.714 1.743l.216 3.23.005.227a2.5 2.5 0 0 1-.731 1.707l-1.244 1.246-.883-.883 1.243-1.246a1.25 1.25 0 0 0 .362-.967l-.216-3.23a.625.625 0 0 0-.57-.582l-3.31-.278-.137-.004a1.25 1.25 0 0 0-.852.366l-1.23 1.232-.883-.884L7.27 2.446a2.5 2.5 0 0 1 1.978-.724Zm1.591 2.662a.969.969 0 1 1 0 1.937.969.969 0 0 1 0-1.937Z",fill:"#585A5A",fillRule:"nonzero"}))},1725:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{className:["larkui-icon","larkui-icon-insert-doc",t.className].filter(Boolean).join(" ")}),n.createElement("defs",null,n.createElement("path",{id:"58591898a",d:"M0 0h256v256H0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("mask",{id:"58591898b",fill:"#fff"},n.createElement("use",{xlinkHref:"#58591898a"})),n.createElement("g",{mask:"url(#58591898b)"},n.createElement("path",{d:"M17 25h222v222H17z"}),n.createElement("path",{d:"M218 212c1.657 0 3.157.672 4.243 1.757A5.981 5.981 0 0 1 224 218a5.981 5.981 0 0 1-1.757 4.243A5.981 5.981 0 0 1 218 224H38a5.981 5.981 0 0 1-4.243-1.757A5.981 5.981 0 0 1 32 218c0-1.657.672-3.157 1.757-4.243A5.981 5.981 0 0 1 38 212ZM129.365 75.746l.312.012a6.967 6.967 0 0 1 4.267 1.79l1.033 1.163a6.986 6.986 0 0 1 1.265 4.456 6.967 6.967 0 0 1-1.861 4.345L99.919 122H218c1.657 0 3.157.672 4.243 1.757A5.981 5.981 0 0 1 224 128a5.981 5.981 0 0 1-1.757 4.243A5.981 5.981 0 0 1 218 134H99.91l34.19 34.201.863.999a6.988 6.988 0 0 1 1.272 4.579 6.97 6.97 0 0 1-2.03 4.426 6.977 6.977 0 0 1-4.848 2.05 6.976 6.976 0 0 1-4.868-1.873l-45.335-45.329-.862-.998a6.986 6.986 0 0 1-1.28-4.477 6.967 6.967 0 0 1 1.862-4.345L124.202 77.9l.998-.862a6.986 6.986 0 0 1 4.477-1.28ZM218 32c1.657 0 3.157.672 4.243 1.757A5.981 5.981 0 0 1 224 38a5.981 5.981 0 0 1-1.757 4.243A5.981 5.981 0 0 1 218 44H38a5.981 5.981 0 0 1-4.243-1.757A5.981 5.981 0 0 1 32 38c0-1.657.672-3.157 1.757-4.243A5.981 5.981 0 0 1 38 32Z",stroke:"#096DD9",strokeWidth:8,fill:"#096DD9"}))))},1731:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-edit-border",t.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M165.426 35.669c10.228-10.225 26.795-10.225 37.012 0l16.94 16.946c9.525 9.512 10.25 24.659 1.46 35.416l-1.45 1.588-120.87 120.819a22.064 22.064 0 0 1-10.12 5.783l-43.65 11.323a14.183 14.183 0 0 1-13.594-3.697 14.175 14.175 0 0 1-3.698-13.59l11.315-43.65a22.3 22.3 0 0 1 5.785-10.119L165.426 35.67ZM153.174 76.73 58.96 170.91a1.8 1.8 0 0 0-.469.82l-8.683 33.457 33.475-8.67.437-.182.384-.287 94.192-94.18-25.144-25.138h.022Zm34.85-26.66a5.797 5.797 0 0 0-8.194 0l-12.54 12.536 25.144 25.138 12.188-12.164.757-.82a5.793 5.793 0 0 0-.405-7.744l-16.95-16.946Z",fill:"currentColor",fillRule:"nonzero"}))},1859:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-new-ellipsis",t.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M227.008 128c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20ZM148 128c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20Zm-78.992 0c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20Z",fill:"currentColor",fillRule:"nonzero"}))},1872:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-rename",t.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M0 0h256v256H0z"}),n.createElement("path",{d:"M121 66c0 5.523-4.477 10-10 10H58c-5.43 0-9.848 4.327-9.996 9.72L48 86v81c0 5.43 4.327 9.848 9.72 9.996L58 177h52.498c5.522 0 9.998 4.476 9.998 9.998 0 5.522-4.476 9.998-9.998 9.999L58 197c-16.403 0-29.731-13.164-29.996-29.504L28 167V86c0-16.403 13.164-29.731 29.504-29.996L58 56h53c5.523 0 10 4.477 10 10Z",fill:"currentColor",fillRule:"nonzero"}),n.createElement("path",{stroke:"currentColor",strokeWidth:20,strokeLinecap:"round",d:"M184.5 47.3v163M218.3 37.5h-67M218.3 217.5h-67"})))},1963:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-list-style",t.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M212 28h-28c-16.569 0-30 13.431-30 30v28c0 16.569 13.431 30 30 30h28c16.569 0 30-13.431 30-30V58c0-16.569-13.431-30-30-30Zm-28 20h28c5.523 0 10 4.477 10 10v28c0 5.523-4.477 10-10 10h-28c-5.523 0-10-4.477-10-10V58c0-5.523 4.477-10 10-10Zm28 92h-28c-16.569 0-30 13.431-30 30v28c0 16.569 13.431 30 30 30h28c16.569 0 30-13.431 30-30v-28c0-16.569-13.431-30-30-30Zm-28 20h28c5.523 0 10 4.477 10 10v28c0 5.523-4.477 10-10 10h-28c-5.523 0-10-4.477-10-10v-28c0-5.523 4.477-10 10-10ZM26.983 41.147l92 .353c5.523.021 9.983 4.516 9.962 10.038-.02 5.43-4.365 9.832-9.758 9.96l-.28.002-92-.354c-5.523-.02-9.983-4.515-9.962-10.038.021-5.43 4.365-9.831 9.759-9.959l.28-.002Zm0 77 92 .353c5.523.021 9.983 4.516 9.962 10.038-.02 5.43-4.365 9.832-9.758 9.96l-.28.002-92-.354c-5.523-.02-9.983-4.515-9.962-10.038.021-5.43 4.365-9.831 9.759-9.959l.28-.002Zm0 81 92 .353c5.523.021 9.983 4.516 9.962 10.038-.02 5.43-4.365 9.832-9.758 9.96l-.28.002-92-.354c-5.523-.02-9.983-4.515-9.962-10.038.021-5.43 4.365-9.831 9.759-9.959l.28-.002Z",fill:"currentColor",fillRule:"nonzero"}))},1964:function(t,e,r){"use strict";r.r(e);var n=r(0);e.default=t=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},t,{className:["larkui-icon","larkui-icon-card-style",t.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M198 24h-28c-16.569 0-30 13.431-30 30v28c0 16.569 13.431 30 30 30h28c16.569 0 30-13.431 30-30V54c0-16.569-13.431-30-30-30Zm-28 20h28c5.523 0 10 4.477 10 10v28c0 5.523-4.477 10-10 10h-28c-5.523 0-10-4.477-10-10V54c0-5.523 4.477-10 10-10Zm28 92h-28c-16.569 0-30 13.431-30 30v28c0 16.569 13.431 30 30 30h28c16.569 0 30-13.431 30-30v-28c0-16.569-13.431-30-30-30Zm-28 20h28c5.523 0 10 4.477 10 10v28c0 5.523-4.477 10-10 10h-28c-5.523 0-10-4.477-10-10v-28c0-5.523 4.477-10 10-10ZM86 24H58c-16.569 0-30 13.431-30 30v28c0 16.569 13.431 30 30 30h28c16.569 0 30-13.431 30-30V54c0-16.569-13.431-30-30-30ZM58 44h28c5.523 0 10 4.477 10 10v28c0 5.523-4.477 10-10 10H58c-5.523 0-10-4.477-10-10V54c0-5.523 4.477-10 10-10Zm28 92H58c-16.569 0-30 13.431-30 30v28c0 16.569 13.431 30 30 30h28c16.569 0 30-13.431 30-30v-28c0-16.569-13.431-30-30-30Zm-28 20h28c5.523 0 10 4.477 10 10v28c0 5.523-4.477 10-10 10H58c-5.523 0-10-4.477-10-10v-28c0-5.523 4.477-10 10-10Z",fill:"currentColor",fillRule:"nonzero"}))},3317:function(t,e,r){"use strict";r.r(e),r.d(e,"isDesktopApp",(function(){return y})),r.d(e,"isYuque",(function(){return v})),r.d(e,"isDev",(function(){return m})),r.d(e,"isWin",(function(){return b})),r.d(e,"myNotesConsts",(function(){return g})),r.d(e,"getFilterBarConfig",(function(){return w})),r.d(e,"downloadFileHandler",(function(){return _}));var n=r(464);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=window,c=a.appData,u=a.navigator,l=c||{},s=l.env,f=l.me,p=void 0===f?{}:f,h="note/pinned/show/".concat(p.id),d="note/order/".concat(p.id),y=c.isDesktopApp,v=c.isYuque,m="local"===s,b="win32"===u.platform.toLowerCase(),g={NOTE_ORDER_KEY:d,NOTE_PINNED_SHOW_KEY:h,NOTE_ITEM_CONTENT_MIN_HEIGHT:214,NOTE_LIST_VIEW_MODES:{lite:"lite",full:"full"},COLLAPSE_BTN_CLASS:"note-item-collapse",SUBMIT_BTN_CLASS:"note-item-submit",NOTE_LIST_ITEM_CLASS:"note-list-item",NOTE_LIST_READ_TAG_ADD_CLASS:"note-list-item-read-tag-add"},w=function(){var t,e;return v?(i(t={},n.FILTER_TYPES.image,__("图片")),i(t,n.FILTER_TYPES.bookmark,__("书签")),i(t,n.FILTER_TYPES.attachment,__("附件")),i(t,n.FILTER_TYPES.wechatRobot,__("来自微信")),i(t,n.FILTER_TYPES.yuqueChromeExtension,__("来自插件")),i(t,n.FILTER_TYPES.share,__("分享中")),t):(i(e={},n.FILTER_TYPES.image,__("图片")),i(e,n.FILTER_TYPES.bookmark,__("书签")),i(e,n.FILTER_TYPES.attachment,__("附件")),i(e,n.FILTER_TYPES.dingTalkRobot,__("来自钉钉")),i(e,n.FILTER_TYPES.share,__("分享中")),e)},_=function(t,e){var r=new URL(t);r.searchParams.append("yuque-desktop-download",""),e&&r.searchParams.append("filename",encodeURIComponent(e)),fetch(r.toString())}},3324:function(t,e,r){"use strict";var n=r(0),o=r.n(n),i=r(65),a=r.n(i),c=r(212),u=r.n(c),l=r(80),s=r.n(l),f=r(3339),p=r.n(f),h=r(3492),d=r(1726),y=r(3196),v=r(108),m=r(3489),b=r.n(m),g=r(3490),w=r.n(g),_=r(3482),O=r.n(_),E=r(3491),k=r(348),j=r(154),x=r(198),S=r(51);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==T(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===T(i)?i:String(i)),n)}var o,i}var L,N=a()("editor:cache"),C=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.key=e}var e,r,n;return e=t,(r=[{key:"retrieve",value:function(){var t={format:null,value:null};N("[retrieve]key: ",this.key);var e=x.a.get(this.key);if(!e)return null;N("[retrieve]find text: ",e);var r=p.a.guessFormat(e);return t.format=r,t.value=e,N("[retrieve]doc: ",t),t}},{key:"put",value:function(t,e){N("[put]content cached: ","".concat(this.key," -> ").concat(t)),x.a.set(this.key,t)}},{key:"clear",value:function(){x.a.remove(this.key)}}])&&P(e.prototype,r),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function R(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function B(){B=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,a)&&(w=O);var E=g.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==A(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(A(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function D(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function F(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){D(i,n,o,a,c,"next",t)}function c(t){D(i,n,o,a,c,"throw",t)}a(void 0)}))}}function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U(n.key),n)}}function G(t,e,r){return(e=U(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U(t){var e=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===A(e)?e:String(e)}var Y=a()("biz:lakex_mini_editor_base"),V=(null===(L=window.appData)||void 0===L?void 0:L.me)||{},z=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),G(this,"getDefaultSuggestions",(function(){return e.options.getDefaultSuggestions?e.options.getDefaultSuggestions():[]})),G(this,"setEngine",(function(t){e._engine=t,e.ocrListenerRemover=y.a.onEditorEngineLoaded(t,e.getType())})),G(this,"getEngine",(function(){return e._engine})),G(this,"setValue",(function(t){var r=t;t?t.startsWith("<")?(r={type:"lake",value:t},e._engine.setDocument(r)):"string"==typeof t&&(r={type:"json",value:JSON.parse(t)},e._engine.setDocument(r)):e._engine.setDocument()})),G(this,"getValue",(function(){return e._engine?e._engine.getPureContent():e.getDefaultValue()})),G(this,"isEmpty",(function(){return!e._engine||e._engine.isEmpty()})),G(this,"getSafetyValue",F(B().mark((function t(){return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.contentReady();case 2:return t.abrupt("return",e.getValue());case 3:case"end":return t.stop()}}),t)})))),G(this,"getHtml",(function(){return e._engine?e._engine.getPureHtml():null})),G(this,"focus",(function(t){if(!e._engine)return null;e._engine.focus(t)})),G(this,"contentReady",F(B().mark((function t(){var r,n;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._engine){t.next=2;break}return t.abrupt("return",null);case 2:return r=0,n=function t(n,o){e._engine.canGetDocument()?n():r>10?o():(r++,setTimeout((function(){t(n,o)}),1e3))},t.abrupt("return",new Promise(n));case 5:case"end":return t.stop()}}),t)})))),G(this,"saveAll",(function(){if(!e.options.disableCache){var t={format:s.a.FORMAT.LAKE,value:e.getValue(),html:e.getHtml()};e.saveToCache(t)}})),this.options=r,this.from=r.from||"reply",this.targetType=r.targetType,this.belong=r.belong,this.belongType=r.belongType,this.group=r.group,this.target=r.target,this.attachType=r.attachType,this.isEditMode=!!r.target,this.type=this.getType(),this.ctoken=Object(k.a)(window);var n=this.getCacheKey();this.cacheKeys={title:"".concat(n,"/title"),content:"".concat(n,"/content")},r.disableCache||(this.editorCache=new C(this.cacheKeys.content)),this.uuid=this.getUuid(),this._engine=null,this.ocrListenerRemover=null,this.initialDocument=null,this.init()}var e,r,n;return e=t,r=[{key:"init",value:function(){this.initialDocument=this.getInitialDocument(),Y("init use: ",this.initialDocument)}},{key:"buildOptions",value:function(t){var e=this,r={translate:{supportTranslate:w()()},hideVipIcon:Object(E.a)(),board:{boardWebProxyParams:{webProxy:S.a,userId:null==V?void 0:V.id,spm:v,appData:window.appData}},image:{supportImgOCR:O()(),uploadFileURL:function(){return y.a.adaptOcrImageUploadUrl(e.getImageUploadUrl())},accept:Object(d.getImageAcceptArr)()},file:{hideEmbedButton:b()(),uploadFileURL:this.getFileUploadUrl(),accept:Object(d.getFileAcceptArr)(),localdocAccept:Object(d.getLocalDocAcceptArr)(),embedButtonStatus:Object(d.getIsDiabledPreviewAndEmbed)()},transfer:{transferFilesURL:this.getTransferUrl()},localdoc:{uploadFileURL:this.getFileUploadUrl(),accept:Object(d.getLocalDocAcceptArr)()},mention:{mentionURL:j.a.patchGroupIdToUrl(this.getMentionActionUrl()),defaultList:this.getDefaultSuggestions()},lockedtext:{action:this.getCryptoUrl()},placeholder:(null==t?void 0:t.placeholder)||this.getPlaceholder(),link:{autoCompleteLink:null==t?void 0:t.autoCompleteLink},video:{uploadAction:this.getMediaUploadUrl("video"),queryAction:"/api/video",accept:Object(d.getVideoAcceptArr)()},audio:{uploadFileURL:this.getMediaUploadUrl("audio"),queryURL:"/api/video",accept:Object(d.getAudioAcceptArr)()},vote:{allowVote:!0,queryDetailUrl:"api/votes",queryCheckUrl:"api/votes/mine",voteUrl:"api/votes"},yuque:{disableEmbedView:this.getDisableYuqueCardEmbedView()},materialLibrary:{component:o.a.createElement(h.a,{storage:x.a,webProxy:S.a})},fullscreen:{enable:this.getEnableFullEditor()}},n=[],i=this.getBlockedCards();return i&&i.length>1&&(n=Array.from(new Set([].concat(R(n),R(i))))),r.disabledPlugins=n,r}},{key:"getProps",value:function(){return{format:this.getFormat(),defaultValue:this.getDefaultValue(),autoFocus:this.getAutoFocus(),isMiniSize:this.isMiniSize()}}},{key:"getType",value:function(){return this.options.type||"unknown"}},{key:"getAutoFocus",value:function(){var t=this.options.autoFocus;return null!=t?t:!!this.options.useMiniGuide}},{key:"isMiniSize",value:function(){return!1}},{key:"getEnableFullEditor",value:function(){return!0}},{key:"getBlockedCards",value:function(){return["video","checkIn","vote","audio"]}},{key:"getUuid",value:function(){var t=this.cacheKeys.uuid,e=x.a.get(t);return e||(e=u()(32)+u()(32),x.a.set(t,e)),e}},{key:"getDefaultFormat",value:function(){return s.a.FORMAT.LAKE}},{key:"getFormat",value:function(){var t=this.options.format;return t||this.initialDocument.format}},{key:"getPlaceholder",value:function(){return this.options.placeholder}},{key:"getInitialDocument",value:function(){if(this.initialDocument)return this.initialDocument;var t=this.loadFromCache();if(Y("cached document:",t),this.isEditMode){var e=this.getContentObject();return Y("adapted content: ",e),t&&(Y("merge with cached content",t),e.format=t.format||e.format,e.title=t.title||e.title,e.value=t.value||e.value),e}if(t)return t.format=t.format||this.getDefaultFormat(),t;var r=this.loadFromUrl();return r||{format:this.getDefaultFormat(),title:null,value:null}}},{key:"getContentObject",value:function(t){return{format:(t=t||this.target||{}).format||this.getDefaultFormat(),title:t.title||t.name||"",value:t.value||t.body_asl||t.content}}},{key:"getDefaultValue",value:function(){var t=this.options.defaultValue;return t||this.initialDocument.value}},{key:"getFullUrl",value:function(t){return this.isEditMode&&!this.options.useBelongAttach?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):null}},{key:"getTransferUrl",value:function(){return this.getFullUrl("/api/upload/copy?type=attachment")}},{key:"getFileUploadUrl",value:function(){var t="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.getFullUrl(t)}},{key:"getMediaUploadUrl",value:function(t){var e="/api/video?ctoken=".concat(this.ctoken,"&format=").concat(t);return this.getFullUrl(e)}},{key:"getImageUploadUrl",value:function(){var t=this.getFileUploadUrl();return t?t.replace("&type=attachment","&type=image"):null}},{key:"getMentionActionUrl",value:function(){var t="";return this.isEditMode&&!this.options.useBelongAttach?t="/api/users/complete?target_type=".concat(this.attachType,"&target_id=").concat(this.target.id):this.belong&&(t="/api/users/complete?target_type=".concat(this.attachType,"&target_id=").concat(this.belong.id)),t}},{key:"getCryptoUrl",value:function(){return"/api/services/crypto"}},{key:"getDisableYuqueCardEmbedView",value:function(){return this.options.disableYuqueCardEmbedView}},{key:"saveToCache",value:function(t){var e;Y("save to cache:",t),t.format&&(t.title&&x.a.set(this.cacheKeys.title,t.title),this.needCacheContent(t)?null===(e=this.editorCache)||void 0===e||e.put(t.value,t.format):Y("value is empty or the same as origin, ignore cache"))}},{key:"needCacheContent",value:function(t){if(this.options.disableCache)return!1;if(!t.value)return!1;var e;if(p.a.isBlank(t))return null===(e=this.editorCache)||void 0===e||e.clear(),!1;if(!this.target)return!0;var r=this.getContentObject();return!p.a.isContentSame(t.format,r.value,t.value)}},{key:"reset",value:function(){Y("reset editor"),this.clearCache(),this._engine&&this._engine.setDocument()}},{key:"isContentChanged",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!t){var e=this.loadFromCache();e&&(t=e.value)}if(!this.target)return!0;var r="<cursor />";return this.target.body_asl.trim().replace(r,"")!==t.trim().replace(r,"")}},{key:"clearCache",value:function(){var t=this;Y("clear cache"),Object.keys(this.cacheKeys).forEach((function(e){x.a.remove(t.cacheKeys[e])}))}},{key:"getCacheKey",value:function(){return this.isEditMode&&this.target&&this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(this.target.id,"/edit"):this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/new"):"autosave/".concat(this.type)}},{key:"loadFromUrl",value:function(){}},{key:"loadFromCache",value:function(){if(this.options.disableCache)return null;var t=!1,e={format:null,title:null,value:null},r=this.editorCache.retrieve();if(r&&(t=!0,e.format=r.format,e.value=r.value),this.cacheKeys.title){var n=x.a.get(this.cacheKeys.title);n&&(t=!0,e.title=n)}return t?e:null}},{key:"destroy",value:function(){var t;null===(t=this.ocrListenerRemover)||void 0===t||t.call(this)}}],n=[{key:"getEmptyDocument",value:function(){return{format:s.a.FORMAT.LAKE,value:null}}}],r&&M(e.prototype,r),n&&M(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.a=z},3340:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var a=r(3317).myNotesConsts,c=r(491),u=r(1378),l=i((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)})),s=a.COLLAPSE_BTN_CLASS,f=a.SUBMIT_BTN_CLASS;function p(t){var e=document.querySelectorAll(".".concat(t));if(e&&e.length){var r=document.body.getBoundingClientRect().height;e.forEach((function(e){var n=e.getBoundingClientRect().top,o=e.closest(".note-list-item").querySelector(".right-tool-".concat(t));o&&(o.style.display=n-r>10?"flex":"none")}))}}l.scrollToTop=c((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.querySelector("#mynote-container .note-list-scroll"),r={top:0,left:0};t.silent||(r.behavior="smooth"),e.scrollTo(r)}),100),l.scrollToElem=c((function(t){var e=t.id,r=document.querySelector("#note-".concat(e));if(r){var n=r.offsetTop;document.querySelector("#mynote-container .note-list-scroll").scrollTo({top:n,left:0,behavior:"smooth"})}}),100),l.fixListContainerHeight=function(){var t=document.querySelector(".material-library-view"),e=document.querySelector(".note-list-container .note-list");if(t&&e){var r=t.getBoundingClientRect().height-82,n=document.querySelector(".note-tag-container");n&&(r-=n.getBoundingClientRect().height),e.style.height="".concat(r,"px")}},l.fixNoteViewer=c((function(t){var e=t.id,r=document.querySelector("#note-".concat(e)),n=document.querySelector("#mynote-container .note-list-scroll");if(r&&n&&r.offsetTop>=0&&r.offsetTop+10<n.scrollTop){var o=r.offsetTop;n.scrollTo({top:o,left:0,behavior:"smooth"})}}),100),l.checkSubmitBtnShow=function(){return p(f)},l.checkCollapseBtnShow=function(){return p(s)};var h=u((function(){l.checkSubmitBtnShow(),l.checkCollapseBtnShow()}),500);l.handleListScroll=function(){var t=document.querySelector("#mynote-container .note-list-scroll");t&&(t.removeEventListener("scroll",h),t.addEventListener("scroll",h))},t.exports=l},3341:function(t,e,r){"use strict";var n=r(3503),o={};e.a=window.isDesktopOfflineApp?o:n.a},3375:function(t,e,r){t.exports=r(464)},3387:function(t,e,r){"use strict";var n=r(67);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,a=void 0,a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},a.apply(this,arguments)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=l(t);if(e){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,t);var e,r,o,s=u(f);function f(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),s.apply(this,arguments)}return e=f,(r=[{key:"buildOptions",value:function(t){var e=a(l(f.prototype),"buildOptions",this).call(this,t);return e.disabledPlugins.push("mobile"),n.ua.mobile&&e.disabledPlugins.push("placeholder","slash"),e}},{key:"getBlockedCards",value:function(){return["video","audio","checkIn"]}}])&&i(e.prototype,r),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),f}(r(3324).a);e.a=s},3394:function(t,e,r){"use strict";var n={};r.r(n),r.d(n,"initList",(function(){return y})),r.d(n,"syncList",(function(){return m})),r.d(n,"createMirror",(function(){return g}));var o={};r.r(o),r.d(o,"lock",(function(){return j})),r.d(o,"unlock",(function(){return S})),r.d(o,"versionList",(function(){return P})),r.d(o,"versionDetail",(function(){return N})),r.d(o,"saveVersion",(function(){return A}));var i={};r.r(i),r.d(i,"show",(function(){return M})),r.d(i,"index",(function(){return U})),r.d(i,"update",(function(){return V})),r.d(i,"status",(function(){return H})),r.d(i,"mirror",(function(){return Z})),r.d(i,"create",(function(){return W})),r.d(i,"createNewMirror",(function(){return J}));var a={};r.r(a),r.d(a,"batchArchive",(function(){return nt})),r.d(a,"batchDelete",(function(){return it})),r.d(a,"batchPin",(function(){return ct})),r.d(a,"batchUnPin",(function(){return lt})),r.d(a,"updatePublic",(function(){return ft})),r.d(a,"shareToGarden",(function(){return ht}));var c={};r.r(c),r.d(c,"index",(function(){return gt})),r.d(c,"create",(function(){return _t})),r.d(c,"del",(function(){return Et})),r.d(c,"count",(function(){return jt})),r.d(c,"generateTags",(function(){return St}));var u={};r.r(u),r.d(u,"initList",(function(){return At})),r.d(u,"syncList",(function(){return It}));var l={};r.r(l),r.d(l,"index",(function(){return Ut})),r.d(l,"create",(function(){return Vt})),r.d(l,"del",(function(){return Ht})),r.d(l,"update",(function(){return Zt})),r.d(l,"pin",(function(){return Wt}));var s=r(1);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(){p=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:T(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var d="suspendedStart",y="suspendedYield",v="executing",m="completed",b={};function g(){}function w(){}function _(){}var O={};l(O,a,(function(){return this}));var E=Object.getPrototypeOf,k=E&&E(E(A([])));k&&k!==r&&n.call(k,a)&&(O=k);var j=_.prototype=g.prototype=Object.create(O);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=h(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==f(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=d;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var l=h(e,r,n);if("normal"===l.type){if(o=n.done?m:y,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(f(e)+" is not iterable")}return w.prototype=_,o(j,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=l(_,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(j),l(j,u,"Generator"),l(j,a,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function h(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){h(i,n,o,a,c,"next",t)}function c(t){h(i,n,o,a,c,"throw",t)}a(void 0)}))}}function y(t){return v.apply(this,arguments)}function v(){return v=d(p().mark((function t(e){var r,n=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteAppController/initList",t.abrupt("return",s.get("/api/modules/note/notes/NoteAppController/initList",e,r));case 3:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function m(t){return b.apply(this,arguments)}function b(){return b=d(p().mark((function t(e){var r,n=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteAppController/syncList",t.abrupt("return",s.get("/api/modules/note/notes/NoteAppController/syncList",e,r));case 3:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function g(t){return w.apply(this,arguments)}function w(){return w=d(p().mark((function t(e){var r,n=arguments;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteAppController/createMirror",t.abrupt("return",s.get("/api/modules/note/notes/NoteAppController/createMirror",e,r));case 3:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)}function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function O(){O=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:T(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var E=Object.getPrototypeOf,k=E&&E(E(A([])));k&&k!==r&&n.call(k,a)&&(w=k);var j=g.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==_(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function T(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(_(e)+" is not iterable")}return b.prototype=g,o(j,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},x(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(j),l(j,u,"Generator"),l(j,a,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function E(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function k(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){E(i,n,o,a,c,"next",t)}function c(t){E(i,n,o,a,c,"throw",t)}a(void 0)}))}}function j(t){return x.apply(this,arguments)}function x(){return x=k(O().mark((function t(e){var r,n=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/lock",t.abrupt("return",s.put("/api/modules/note/notes/NoteContentController/lock",e,r));case 3:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}function S(t){return T.apply(this,arguments)}function T(){return T=k(O().mark((function t(e){var r,n=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/unlock",t.abrupt("return",s.delete("/api/modules/note/notes/NoteContentController/unlock",e,r));case 3:case"end":return t.stop()}}),t)}))),T.apply(this,arguments)}function P(t){return L.apply(this,arguments)}function L(){return L=k(O().mark((function t(e){var r,n=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/versionList",t.abrupt("return",s.get("/api/modules/note/notes/NoteContentController/versionList",e,r));case 3:case"end":return t.stop()}}),t)}))),L.apply(this,arguments)}function N(t){return C.apply(this,arguments)}function C(){return C=k(O().mark((function t(e){var r,n=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/versionDetail",t.abrupt("return",s.get("/api/modules/note/notes/NoteContentController/versionDetail",e,r));case 3:case"end":return t.stop()}}),t)}))),C.apply(this,arguments)}function A(t){return R.apply(this,arguments)}function R(){return R=k(O().mark((function t(e){var r,n=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteContentController/saveVersion",t.abrupt("return",s.post("/api/modules/note/notes/NoteContentController/saveVersion",e,r));case 3:case"end":return t.stop()}}),t)}))),R.apply(this,arguments)}function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function B(){B=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,a)&&(w=O);var E=g.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==I(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(I(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function D(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function F(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){D(i,n,o,a,c,"next",t)}function c(t){D(i,n,o,a,c,"throw",t)}a(void 0)}))}}function M(t){return G.apply(this,arguments)}function G(){return G=F(B().mark((function t(e){var r,n=arguments;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/show",t.abrupt("return",s.get("/api/modules/note/notes/NoteController/show",e,r));case 3:case"end":return t.stop()}}),t)}))),G.apply(this,arguments)}function U(t){return Y.apply(this,arguments)}function Y(){return Y=F(B().mark((function t(e){var r,n=arguments;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/index",t.abrupt("return",s.get("/api/modules/note/notes/NoteController/index",e,r));case 3:case"end":return t.stop()}}),t)}))),Y.apply(this,arguments)}function V(t){return z.apply(this,arguments)}function z(){return z=F(B().mark((function t(e){var r,n=arguments;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/update",t.abrupt("return",s.put("/api/modules/note/notes/NoteController/update",e,r));case 3:case"end":return t.stop()}}),t)}))),z.apply(this,arguments)}function H(t){return q.apply(this,arguments)}function q(){return q=F(B().mark((function t(e){var r,n=arguments;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/status",t.abrupt("return",s.get("/api/modules/note/notes/NoteController/status",e,r));case 3:case"end":return t.stop()}}),t)}))),q.apply(this,arguments)}function Z(t){return K.apply(this,arguments)}function K(){return K=F(B().mark((function t(e){var r,n=arguments;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/mirror",t.abrupt("return",s.get("/api/modules/note/notes/NoteController/mirror",e,r));case 3:case"end":return t.stop()}}),t)}))),K.apply(this,arguments)}function W(t){return Q.apply(this,arguments)}function Q(){return Q=F(B().mark((function t(e){var r,n=arguments;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/create",t.abrupt("return",s.post("/api/modules/note/notes/NoteController/create",e,r));case 3:case"end":return t.stop()}}),t)}))),Q.apply(this,arguments)}function J(t){return $.apply(this,arguments)}function $(){return $=F(B().mark((function t(e){var r,n=arguments;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteController/createNewMirror",t.abrupt("return",s.post("/api/modules/note/notes/NoteController/createNewMirror",e,r));case 3:case"end":return t.stop()}}),t)}))),$.apply(this,arguments)}function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function tt(){tt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,a)&&(w=O);var E=g.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==X(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(X(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function et(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function rt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){et(i,n,o,a,c,"next",t)}function c(t){et(i,n,o,a,c,"throw",t)}a(void 0)}))}}function nt(t){return ot.apply(this,arguments)}function ot(){return ot=rt(tt().mark((function t(e){var r,n=arguments;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/batchArchive",t.abrupt("return",s.put("/api/modules/note/notes/NoteOperateController/batchArchive",e,r));case 3:case"end":return t.stop()}}),t)}))),ot.apply(this,arguments)}function it(t){return at.apply(this,arguments)}function at(){return at=rt(tt().mark((function t(e){var r,n=arguments;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/batchDelete",t.abrupt("return",s.delete("/api/modules/note/notes/NoteOperateController/batchDelete",e,r));case 3:case"end":return t.stop()}}),t)}))),at.apply(this,arguments)}function ct(t){return ut.apply(this,arguments)}function ut(){return ut=rt(tt().mark((function t(e){var r,n=arguments;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/batchPin",t.abrupt("return",s.put("/api/modules/note/notes/NoteOperateController/batchPin",e,r));case 3:case"end":return t.stop()}}),t)}))),ut.apply(this,arguments)}function lt(t){return st.apply(this,arguments)}function st(){return st=rt(tt().mark((function t(e){var r,n=arguments;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/batchUnPin",t.abrupt("return",s.put("/api/modules/note/notes/NoteOperateController/batchUnPin",e,r));case 3:case"end":return t.stop()}}),t)}))),st.apply(this,arguments)}function ft(t){return pt.apply(this,arguments)}function pt(){return pt=rt(tt().mark((function t(e){var r,n=arguments;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/updatePublic",t.abrupt("return",s.put("/api/modules/note/notes/NoteOperateController/updatePublic",e,r));case 3:case"end":return t.stop()}}),t)}))),pt.apply(this,arguments)}function ht(t){return dt.apply(this,arguments)}function dt(){return dt=rt(tt().mark((function t(e){var r,n=arguments;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteOperateController/shareToGarden",t.abrupt("return",s.post("/api/modules/note/notes/NoteOperateController/shareToGarden",e,r));case 3:case"end":return t.stop()}}),t)}))),dt.apply(this,arguments)}function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function vt(){vt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,a)&&(w=O);var E=g.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==yt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(yt(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function mt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function bt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){mt(i,n,o,a,c,"next",t)}function c(t){mt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function gt(t){return wt.apply(this,arguments)}function wt(){return wt=bt(vt().mark((function t(e){var r,n=arguments;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/index",t.abrupt("return",s.get("/api/modules/note/notes/NoteTagController/index",e,r));case 3:case"end":return t.stop()}}),t)}))),wt.apply(this,arguments)}function _t(t){return Ot.apply(this,arguments)}function Ot(){return Ot=bt(vt().mark((function t(e){var r,n=arguments;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/create",t.abrupt("return",s.post("/api/modules/note/notes/NoteTagController/create",e,r));case 3:case"end":return t.stop()}}),t)}))),Ot.apply(this,arguments)}function Et(t){return kt.apply(this,arguments)}function kt(){return kt=bt(vt().mark((function t(e){var r,n=arguments;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/del",t.abrupt("return",s.delete("/api/modules/note/notes/NoteTagController/del",e,r));case 3:case"end":return t.stop()}}),t)}))),kt.apply(this,arguments)}function jt(t){return xt.apply(this,arguments)}function xt(){return xt=bt(vt().mark((function t(e){var r,n=arguments;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/count",t.abrupt("return",s.get("/api/modules/note/notes/NoteTagController/count",e,r));case 3:case"end":return t.stop()}}),t)}))),xt.apply(this,arguments)}function St(t){return Tt.apply(this,arguments)}function Tt(){return Tt=bt(vt().mark((function t(e){var r,n=arguments;return vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/notes/NoteTagController/generateTags",t.abrupt("return",s.post("/api/modules/note/notes/NoteTagController/generateTags",e,r));case 3:case"end":return t.stop()}}),t)}))),Tt.apply(this,arguments)}function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function Lt(){Lt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,a)&&(w=O);var E=g.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Pt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Pt(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Nt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ct(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Nt(i,n,o,a,c,"next",t)}function c(t){Nt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function At(t){return Rt.apply(this,arguments)}function Rt(){return Rt=Ct(Lt().mark((function t(e){var r,n=arguments;return Lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagAppController/initList",t.abrupt("return",s.get("/api/modules/note/tags/TagAppController/initList",e,r));case 3:case"end":return t.stop()}}),t)}))),Rt.apply(this,arguments)}function It(t){return Bt.apply(this,arguments)}function Bt(){return Bt=Ct(Lt().mark((function t(e){var r,n=arguments;return Lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagAppController/syncList",t.abrupt("return",s.get("/api/modules/note/tags/TagAppController/syncList",e,r));case 3:case"end":return t.stop()}}),t)}))),Bt.apply(this,arguments)}function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Ft(){Ft=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,a)&&(w=O);var E=g.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Dt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Dt(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Mt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Gt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Mt(i,n,o,a,c,"next",t)}function c(t){Mt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ut(t){return Yt.apply(this,arguments)}function Yt(){return Yt=Gt(Ft().mark((function t(e){var r,n=arguments;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/index",t.abrupt("return",s.get("/api/modules/note/tags/TagController/index",e,r));case 3:case"end":return t.stop()}}),t)}))),Yt.apply(this,arguments)}function Vt(t){return zt.apply(this,arguments)}function zt(){return zt=Gt(Ft().mark((function t(e){var r,n=arguments;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/create",t.abrupt("return",s.post("/api/modules/note/tags/TagController/create",e,r));case 3:case"end":return t.stop()}}),t)}))),zt.apply(this,arguments)}function Ht(t){return qt.apply(this,arguments)}function qt(){return qt=Gt(Ft().mark((function t(e){var r,n=arguments;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/del",t.abrupt("return",s.delete("/api/modules/note/tags/TagController/del",e,r));case 3:case"end":return t.stop()}}),t)}))),qt.apply(this,arguments)}function Zt(t){return Kt.apply(this,arguments)}function Kt(){return Kt=Gt(Ft().mark((function t(e){var r,n=arguments;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/update",t.abrupt("return",s.put("/api/modules/note/tags/TagController/update",e,r));case 3:case"end":return t.stop()}}),t)}))),Kt.apply(this,arguments)}function Wt(t){return Qt.apply(this,arguments)}function Qt(){return Qt=Gt(Ft().mark((function t(e){var r,n=arguments;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},"/api/modules/note/tags/TagController/pin",t.abrupt("return",s.put("/api/modules/note/tags/TagController/pin",e,r));case 3:case"end":return t.stop()}}),t)}))),Qt.apply(this,arguments)}e.a={NoteAppCtlImpl:n,NoteContentCtlImpl:o,NoteCtlImpl:i,NoteOperateCtlImpl:a,NoteTagCtlImpl:c,TagAppCtlImpl:u,TagCtlImpl:l}},3411:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return i}));var n=function(t){return t.content_updated_at="content_updated_at",t.first_published_at="first_published_at",t}({}),o=function(t){return t.all="all",t.archive="archive",t.image="image",t.bookmark="bookmark",t.attachment="attachment",t.archived="archived",t.share="share",t.dingTalkRobot="dingTalkRobot",t.wechatRobot="wechatRobot",t.yuqueChromeExtension="yuqueChromeExtension",t}({}),i=function(t){return t[t.unarchived=0]="unarchived",t[t.archived=9]="archived",t}({})},3415:function(t,e,r){"use strict";var n=r(80),o=r.n(n),i={_bookGrayscaleConfig:null,getDefaultDocumentFormat:function(t,e,r){return e=e||"",r=r||{},o.a.DOC_DEFAULT_FORMAT[t]||o.a.FORMAT.LAKE}};e.a=i},3482:function(t,e,r){var n=r(953).getInterest,o=r(53).INTEREST_CODE;t.exports=function(){return n().interests[o.open_ocr]}},3489:function(t,e){t.exports=function(){var t=window.appData||{},e=t.isYuque,r=t.organization,n=t.group,o=void 0===n?{}:n,i=r&&r.id;return!!e&&(!("Group"!==(null==o?void 0:o.type)||i)||!(!r||r.isPremium))}},3490:function(t,e,r){var n=r(585).isPaidCheckAll;t.exports=function(){return!(window.appData||{}).isYuque||!!n()}},3491:function(t,e,r){"use strict";var n=r(585).isPaidCheckAll;e.a=function(){if(!(window.appData||{}).isYuque)return!0;var t=window.appData,e=t.organization,r=t.group,o=void 0===r?{}:r;return!(!e||!n())||!e&&"Group"===(null==o?void 0:o.type)}},3492:function(t,e,r){"use strict";r.d(e,"a",(function(){return Je}));r(790);var n=r(281),o=r(0),i=r.n(o),a=r(2),c=r.n(a),u=(r(41),r(10)),l=(r(258),r(135)),s=r(5),f=r.n(s),p=r(1003),h=r.n(p),d=r(1210),y=r(1208),v=r.n(y),m=r(45),b=r(461),g=r(3497),w=r(464),_=r(164),O=r.n(_),E=r(3375),k=r(3317),j=r(1198),x="note-status-module_dev_g73YZ",S="note-status-module_text_ZLRRs",T=function(t){var e=t.item,r=t.orderBy,n=e.published_at,o=e.content.updated_at,a=r===E.ORDER_BY.content_updated_at,c=a?o:n,u=new Date(o).getFullYear()!==(new Date).getFullYear();return i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:S},a?__("更新于"):__("创建于")," ",j.default.format(c,{onlyDate:u,disableYear:!1})),function(t){if(!k.isDev)return null;var e=null===o;return i.a.createElement("span",{className:x},t.id," ",e?"mirror":""," ",O()(t.content_updated_at).format("YYYY-MM-DD HH:mm:ss"))}(e))},P=r(3340),L=(r(75),r(33)),N=r(1402),C=r(251),A=(r(151),r(66)),R=r(1378),I=r.n(R),B=r(1623),D=r(586),F=r(1724),M="TagList-module_list_g-vtQ",G="TagList-module_item_bUgF8",U="TagList-module_active_EPfJt",Y="TagList-module_delete_NtLM0",V="TagList-module_wrapper_wAu1a",z="TagList-module_hideMore_2Kx5n",H="TagList-module_expand_J-EtW",q="TagList-module_expandForMini_G9K8m",Z="TagList-module_line_pgNjs",K="TagList-module_addTag_P9XTi",W="TagList-module_rightSide_65+zS",Q="TagList-module_noTag_XGuDy",J="TagList-module_canSelect_XVnT1",$="TagList-module_name_-HZCJ",X="TagList-module_highLight_Fx+g3",tt="TagList-module_count_JG6aO",et="TagList-module_listForMini_n1Fjy",rt="TagList-module_expandBtn_kA52P",nt="TagList-module_expanded_tVFvP",ot="TagList-module_icon_zLTbc";function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(t,e,r){return e=function(t){var e=function(t,e){if("object"!==it(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===it(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ut(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ut(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var lt=function(t){var e,r,n=t.data,a=t.onDelete,c=t.renderFirstItem,u=t.showCount,l=t.hideMore,s=t.storageKey,p=t.localStorage,h=t.currentTagId,d=t.onSelect,y=t.renderRightSide,v=t.query,m=t.isFilter,b=t.expandForMini,g=n||[];v&&(g=g.filter((function(t){return null==t?void 0:t.name.includes(v)})));var w=!1;s&&p&&p.get(s)&&(w=!0);var _=ct(Object(o.useState)(w),2),O=_[0],k=_[1],j=ct(Object(o.useState)(!1),2),x=j[0],S=j[1],T=Object(o.useRef)(null),P=function(){if(l&&T&&T.current){var t=T.current.children;if(!t||t.length<=2)S(!1);else{var e=t[1],r=t[t.length-1],n=e.getBoundingClientRect().top!==r.getBoundingClientRect().top;S(n)}}};function L(t){if(!v)return i.a.createElement("span",{className:$},t);var e=t.indexOf(v);return e<0?i.a.createElement("span",{className:$},t):i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:$},t.slice(0,e)),i.a.createElement("span",{className:f()($,X)},v),i.a.createElement("span",{className:$},t.slice(e+v.length)))}return Object(o.useEffect)((function(){P()}),[n,v]),Object(o.useEffect)((function(){p&&s&&(O?p.set(s,"true"):p.remove(s))}),[O]),Object(o.useEffect)((function(){var t=I()(P,200);return l&&window.addEventListener("resize",t,!1),function(){window.removeEventListener("resize",t,!1)}}),[]),i.a.createElement("div",{"data-testid":"note-tag-list-wrapper",className:f()(V,(e={},at(e,H,O),at(e,z,l),at(e,q,b),e),"note-tag-list")},i.a.createElement("div",{className:f()(M,"tag-list",at({},et,b)),ref:T},c&&i.a.createElement("div",{className:K},c()),y||x?i.a.createElement("div",{className:W},x&&i.a.createElement("div",{className:f()(rt,"tag-list-expand",at({},nt,O)),onClick:function(t){t.stopPropagation(),k(!O)}},i.a.createElement(B.default,{className:ot})),!v&&y&&y()):null,g.map((function(t){var e,r=null==t?void 0:t.name;if(!r)return null;var n=r.length>20,o=n?"".concat(r.slice(0,20),"..."):r,c=h===t.id;return i.a.createElement(A.a,{title:n?r:null},i.a.createElement("div",{"data-testid":"note-tag-list-item",className:f()(G,(e={},at(e,U,c),at(e,J,!!d),e)),key:null==t?void 0:t.name,onClick:function(){d&&d(t.id)}},L(o),function(t){return u&&void 0!==t.count?i.a.createElement("span",{className:tt},"(",t.count,")"):null}(t),a&&i.a.createElement("span",{"data-testid":"note-tag-list-delete",className:Y,onClick:function(){return a(t)}},i.a.createElement(D.default,null))))})),g.length>0&&!v&&m&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Z}),i.a.createElement("div",{"data-testid":"note-tag-list-item",className:f()(G,Q,(r={},at(r,U,h===E.FILTER_TAGS.noTag),at(r,J,!!d),r)),onClick:function(){d&&d(E.FILTER_TAGS.noTag)}},i.a.createElement(F.default,{width:16,height:16}),L(__("无标签"))))))},st={toolBarBtn:"index-module_toolBarBtn_kG8Cd",wrapper:"index-module_wrapper_8ethE",noteItem:"index-module_noteItem_dVp5J",note:"index-module_note_geZ56",viewBlank:"index-module_viewBlank_ecM7l",tagPinned:"index-module_tagPinned_--NI2",descMoreIcon:"index-module_descMoreIcon_wlBa3",tab:"index-module_tab_zkK5m",arrowUp:"index-module_arrowUp_lRGKc",arrowDown:"index-module_arrowDown_3-EN3",tabNote:"index-module_tabNote_8V7gj",hidden:"index-module_hidden_M8z9j",tagPinnedContainer:"index-module_tagPinnedContainer_hB8jT",selected:"index-module_selected_aA0w-",rightToolBar:"index-module_rightToolBar_e1gvN",noteItemExpand:"index-module_noteItemExpand_PjrCj",leftToolBar:"index-module_leftToolBar_JMyy5",content:"index-module_content_Yf3Cm",loading:"index-module_loading_uVMCS",mask:"index-module_mask_-nOYf",reading:"index-module_reading_dfUvx",isTemplate:"index-module_isTemplate_7o8Q-",viewMore:"index-module_viewMore_gsQbm",searchMode:"index-module_searchMode_jG3fm",meta:"index-module_meta_B+ClL",radio:"index-module_radio_2HGaM",contentExpanded:"index-module_contentExpanded_lWgEI",editing:"index-module_editing_nW8gJ",hasTag:"index-module_hasTag_wtzsZ",viewMoreShow:"index-module_viewMoreShow_pN6H7",images:"index-module_images_fAoGp",date:"index-module_date_095hy",imagesContent:"index-module_imagesContent_t0q35",item:"index-module_item_2FEiU",bookmark:"index-module_bookmark_-+dy+",title:"index-module_title_6RJyp",desc:"index-module_desc_WTwbK",belong:"index-module_belong_Csy5b",text:"index-module_text_bro5m",left:"index-module_left_s-MXM",right:"index-module_right_RJVuX",attachment:"index-module_attachment_H4LKm",file:"index-module_file_e9W5F",name:"index-module_name_fKT1c",size:"index-module_size_xQNXJ",empty:"index-module_empty_cBT2k",loadMoreBtn:"index-module_loadMoreBtn_t6j9W",theEndTips:"index-module_theEndTips_tq+NY",blank:"index-module_blank_2HJdh",desktop:"index-module_desktop_oahLD",toolbarStyle:"index-module_toolbarStyle_cNHWw",batchProcess:"index-module_batchProcess_BqhA4",checkBox:"index-module_checkBox_mz+g+",rightToolBarCollapse:"index-module_rightToolBarCollapse_cPTfb",rightToolBarSave:"index-module_rightToolBarSave_vhDcz",tagContainer:"index-module_tagContainer_nVqVt"};function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function pt(){return pt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pt.apply(this,arguments)}function ht(t,e,r){return e=function(t){var e=function(t,e){if("object"!==ft(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ft(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dt(){dt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,a)&&(w=O);var E=g.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==ft(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ft(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function yt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=gt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function vt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function mt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){vt(i,n,o,a,c,"next",t)}function c(t){vt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function bt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||gt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(t,e){if(t){if("string"==typeof t)return wt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wt(t,e):void 0}}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _t=Object(C.b)((function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(0),r.e(1238)]).then(r.bind(null,5710))}),{suspense:!0}),Ot=k.myNotesConsts.COLLAPSE_BTN_CLASS,Et=function(t){var e,r,n=t.note,a=t.noteTags,c=t.enableDynamicTaskList,u=t.onLoadNote,l=t.onCollapseNote,s=t.renderEditor,p=t.onChangeNote,h=t.onUpdateContentUpdatedAt,d=n.id,y=n.content,v=y.updated_at,b=y.abstract,g=y.source,_=y.doc_dynamic_data,O=n.tags,E=void 0===O?[]:O,j=n.content_show_at,x=n.expanded_at,S=n.changed_at,T=n.save_from,C=bt(Object(o.useState)(!g),2),A=C[0],R=C[1],I=bt(Object(o.useState)(!!g),2),B=I[0],D=I[1],F=bt(Object(o.useState)(!g),2),M=F[0],G=F[1],U=bt(Object(o.useState)(!!g),2),Y=U[0],V=U[1],z=Object(o.useRef)(null),H=Object(o.useRef)(null),q=Object(o.useRef)(null);Object(o.useEffect)((function(){j&&(R(!1),D(!0),G(!1),V(!0))}),[j]);var Z=n.editing,K=n.loading,W=null===v;if(!k.isDev&&W)return null;var Q="item-".concat(n.id,"-").concat(v),J={};k.isDesktopApp&&(J.downloadFileHandler=k.downloadFileHandler);var $=E&&E.map((function(t){var e=a&&a.find((function(e){return e.id===t.id}));return e||null})).filter((function(t){return!!t})),X=function(){var t=mt(dt().mark((function t(e){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var r=setInterval((function(){var n=e.querySelectorAll('ne-card[data-card-name="image"] img');if(0===n.length)return clearInterval(r),t();var o,i=[],a=yt(n);try{for(a.s();!(o=a.n()).done;){var c=o.value;c.complete||i.push(c)}}catch(t){a.e(t)}finally{a.f()}0===i.length&&(clearInterval(r),setTimeout((function(){t()}),100))}),10);setTimeout((function(){clearInterval(r),t()}),800)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tt=function(){var t=mt(dt().mark((function t(e){var r;return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=13;break}if(V(!0),D(!1),H){t.next=5;break}return t.abrupt("return");case 5:return r=H.current,t.next=8,X(r);case 8:R(!1),G(!1),D(!0),t.next=16;break;case 13:G(!0),R(!1),setTimeout(mt(dt().mark((function t(){var e,r;return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=z.current){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,X(e);case 5:R(!0),V(!0),D(!1),null==(r=document.getElementById("doclet-viewmore-".concat(d)))||r.scrollIntoView(!1);case 10:case"end":return t.stop()}}),t)}))),30);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),et=!Z&&$&&!!$.length,rt=T&&[w.SAVE_FROM_TYPE.TEMPLATE_NOTE,w.SAVE_FROM_TYPE.TEMPLATE_TODO].includes(T);if(n.editing)return i.a.createElement("div",{className:f()(st.content,ht({},st.contentExpanded,x),st.editing)},s(n));function nt(){null==p||p(n),null==h||h(n.id)}return i.a.createElement(L.a,{className:f()(st.content,"note-item-normal",(e={},ht(e,st.contentExpanded,!!rt||x),ht(e,st.reading,!Z),ht(e,st.hasTag,et),ht(e,st.isTemplate,rt),e))},i.a.createElement("div",null,M&&i.a.createElement("div",{style:{display:A?"relative":"absolute",zIndex:A?3:-1,left:0,top:0,overflow:B?"hidden":"none"},ref:z},i.a.createElement(_t,pt({docId:d,key:"".concat(Q,"-description-").concat(n.updated_at),content:b,onDynamicDataChange:nt,enableDynamicTaskList:c,dynamicData:_},J))),Y&&i.a.createElement("div",{style:{position:B?"relative":"absolute",zIndex:B?3:-1,left:0,top:0,overflow:B?"hidden":"none"},ref:H},i.a.createElement(_t,pt({docId:d,key:"".concat(Q,"-doclet-").concat(d,"-").concat(v),content:g,onDynamicDataChange:nt,enableDynamicTaskList:c,dynamicData:_},J)))),et&&i.a.createElement(lt,{data:$}),i.a.createElement("div",{className:f()(st.viewBlank,"view-blank"),onClick:function(t){var e=t.currentTarget;e&&"pointer"===e.style.cursor&&e.nextSibling&&e.nextSibling.click()}}),i.a.createElement("div",{ref:q,key:"doclet-viewmore-".concat(d),id:"doclet-viewmore-".concat(d),className:f()(st.viewMore,(r={},ht(r,st.viewMoreShow,x),ht(r,st.expanded,x),r),"view-more"),onClick:function(){var t=mt(dt().mark((function t(e){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stopPropagation(),!x){t.next=14;break}if(!S){t.next=10;break}return t.next=5,u(n);case 5:return l(n),t.next=8,tt(!1);case 8:t.next=12;break;case 10:l(n),tt(!1);case 12:t.next=19;break;case 14:return t.next=16,u(n);case 16:return t.next=18,tt(!0);case 18:setTimeout((function(){Object(P.checkCollapseBtnShow)()}),100);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},(null==b?void 0:b.includes(w.VIEW_MORE_TAG))&&(x?i.a.createElement("span",{className:f()(Ot,st.descMoreIcon)},i.a.createElement(m.b,{name:"arrow-up",size:14,className:st.descMoreIcon}),__("收起")):i.a.createElement("span",{className:f()(Ot,st.descMoreIcon)},i.a.createElement(m.b,{name:"arrow-down",size:14,className:st.descMoreIcon}),__("展开")))),K&&i.a.createElement("div",{className:st.loading},i.a.createElement(N.default,null)))};function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function jt(t,e,r){return e=function(t){var e=function(t,e){if("object"!==kt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===kt(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return St(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return St(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Tt=k.myNotesConsts.NOTE_LIST_ITEM_CLASS,Pt=k.myNotesConsts.NOTE_LIST_READ_TAG_ADD_CLASS,Lt=function(t){var e,r=t.state,n=r.hasMore,a=r.listData,c=r.pinnedListData,u=r.listLoading,l=r.searchValue,s=r.orderBy,p=r.filterTab,d=r.currentTagId,y=r.noteTags,_=r.noteStatus,O=r.showPinned,E=t.getNotes,j=t.onSelectNote,x=t.onLoadNote,S=t.setLoadRef,L=t.renderToolBar,N=t.isAlipayWebApp,C=p===w.FILTER_TYPES.all,A=Object(b.a)().isDarkMode;function R(){if(!d||l)return null;var t=y.find((function(t){var e;return(null===(e=t.tag_meta)||void 0===e?void 0:e.id)===d}));if(!t||!t.count)return null;var e=a&&a.length;c&&c.length>0&&(e+=c.length);var r=t.count-e;return!r||r<0?null:__("{num} 篇小记不包含{text}",{num:r,text:Object(k.getFilterBarConfig)()[p]})}Object(o.useEffect)((function(){if(C){var t=document.querySelector("#mynote-container .note-list");if(t){var e=t.querySelectorAll(".yuque-doc-content");setTimeout((function(){var t,r=xt(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;l?(n.searchPad||(n.searchPad=new g.a({target:n,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}}})),n.searchPad.find(l.trim())):n.searchPad&&n.searchPad.clear()}}catch(t){r.e(t)}finally{r.f()}}),100),Object(P.handleListScroll)()}}}),[a]),Object(o.useEffect)((function(){var t=v.a.parse(window.location.search).scroll_to;setTimeout((function(){Object(P.scrollToElem)({id:t})}),200)}),[]);var I=function(e){var r="item-".concat(e.id,"-").concat(e.content_updated_at),n={note:e,filterTab:p,noteTags:y,isAlipayWebApp:N,orderBy:s,onSelectNote:j,renderToolBar:L,enableDynamicTaskList:t.enableDynamicTaskList,onLoadNote:x};return i.a.createElement("div",{id:"note-".concat(e.id),key:r,className:f()(st.note,Tt),onDoubleClick:function(t){var r;null!=t&&null!==(r=t.target)&&void 0!==r&&r.closest(".share-note-button")||j(e)}},i.a.createElement("div",{className:f()(st.noteItem,"note-item")},e.pinned_at&&i.a.createElement("div",{className:st.tagPinnedContainer},i.a.createElement(m.b,{name:"IconTop",size:14,className:st.tagPinned})),i.a.createElement("div",{className:st.meta},i.a.createElement(T,{item:e,orderBy:s}),L(e)),i.a.createElement(Et,n),i.a.createElement("div",{className:f()(st.tagContainer,Pt)})))};return h()(null==c?void 0:c.concat(a))?i.a.createElement("div",{"data-testid":"note-list-empty",className:f()(st.wrapper,st.empty,jt({},st.desktop,k.isDesktopApp),"note-list-empty")},function(){if(u)return null;if(l)return i.a.createElement("div",{className:st.blank},__("未能找到相关{type}",{type:__("小记")}));var t=R(),e=__("灵光乍现，小记一下");return _===w.STATUS.archived&&(e=__("不再使用的小记可归档于此")),i.a.createElement(i.a.Fragment,null,i.a.createElement("img",{src:A?"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*HSmhT7fKgwMAAAAAAAAAAAAAARQnAQ":"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*HshzTKOlvckAAAAAAAAAAAAAARQnAQ"}),i.a.createElement("p",null,t||e))}()):i.a.createElement("div",{className:f()(st.wrapper,(e={},jt(e,st.desktop,k.isDesktopApp),jt(e,st.win,k.isWin),jt(e,st.searchMode,l),e),"note-list"),"data-testid":"note-list"},i.a.createElement("div",{className:f()(jt({},st.hidden,!O))},function(t){if(w.NEED_PINNED_TYPE.includes(p))return t.map(I)}(c)),w.NEED_PINNED_TYPE.includes(p)&&O&&c.length>0&&a.length>0&&i.a.createElement("span",{className:f()(st.tab,st.tabNote)},__("小记")),a.sort((function(t,e){return new Date(e[s]).getTime()-new Date(t[s]).getTime()})).map(I),function(){if(n)return i.a.createElement("div",{className:st.loadMoreBtn,onClick:E,ref:function(t){return S(t)}},__("点击加载更多"));var t=R();return t?i.a.createElement("div",{className:st.theEndTips},t):a&&a.length>9?i.a.createElement("div",{className:st.theEndTips},__("我是有底线的")):void 0}())};Lt.propTypes={isAlipayWebApp:c.a.bool,setLoadRef:c.a.func,state:c.a.object,getNotes:c.a.func,onLoadNote:c.a.func,onSelectNote:c.a.func,onInsertToLakeEditor:c.a.func,renderToolBar:c.a.func,renderResourceIcon:c.a.func,enableDynamicTaskList:c.a.bool,setToDocList:c.a.func,setBatchProcess:c.a.func};var Nt=Lt,Ct=(r(56),r(12)),At=r(1624),Rt={wrapper:"search-module_wrapper_S445p",searchBar:"search-module_searchBar_x3Krl",active:"search-module_active_eYHT+",isLiteMode:"search-module_isLiteMode_C4hZN",searchMini:"search-module_searchMini_V+K7h",searchMiniShow:"search-module_searchMiniShow_xFcgm"};function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Bt(t,e,r){return e=function(t){var e=function(t,e){if("object"!==It(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===It(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ft(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Mt=function(t){var e,r,n,a=t.activeMode,c=t.isDesktopApp,u=t.searchValue,l=t.searchActive,s=t.setSearchActive,p=t.isLiteMode,h=t.onSearchNote,d=t.onSearchReset,y=Dt(Object(o.useState)(null),2),v=y[0],m=y[1],b=Object(o.useRef)(null);Object(o.useEffect)((function(){u||(m(null),s(!1))}),[u]);var g={ref:b,value:v,prefix:i.a.createElement(At.default,null),placeholder:__("搜索"),autoComplete:"nope",allowClear:!0,onSearch:h,onBlur:function(t){t.target.value||(s(!1),d())},onChange:function(t){var e=t.target.value;m(e)},onClear:function(){m(null)}};return"dark"!==(null===(e=window.yuqueThemeManager)||void 0===e?void 0:e.current)&&(g.style={borderColor:"#e8e8e8"}),i.a.createElement("div",{"data-testid":"note-search",className:f()(Rt.wrapper,"note-search")},i.a.createElement("div",{className:f()(Rt.searchBar,(r={},Bt(r,Rt.active,a||l),Bt(r,Rt.isLiteMode,p),r))},i.a.createElement(Ct.a.Search,g)),!a&&i.a.createElement("div",{className:f()(Rt.searchMini,(n={},Bt(n,Rt.searchMiniShow,!l),Bt(n,Rt.desktop,c),n)),onClick:function(){s(!0),b&&b.current&&b.current.focus()}},i.a.createElement(At.default,{width:16,height:16,style:{color:"#262626"}})))};Mt.defaultProps={activeMode:!1,isDesktopApp:!1},Mt.propTypes={searchValue:c.a.string,searchActive:c.a.bool,isDesktopApp:c.a.bool,onSearchNote:c.a.func,onSearchReset:c.a.func,setSearchActive:c.a.func,activeMode:c.a.bool};var Gt=Mt,Ut=r(1725),Yt="sidebar-toolbar-module_wrapper_oE4lW",Vt="sidebar-toolbar-module_insertBtn_RY-1c",zt=f()(Yt,"note-list-toolbar"),Ht=function(t){var e=t.item,r=t.onInsertToLakeEditor;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:zt,"data-testid":"note-list-toolbar"},i.a.createElement("span",{className:Vt,onClick:function(){return r(e)}},i.a.createElement(Ut.default,{width:14,height:14}),__("插入文档"))))};Ht.defaultProps={onInsertToLakeEditor:function(){}},Ht.propTypes={item:c.a.object,onInsertToLakeEditor:c.a.func};var qt=Ht,Zt=r(3341);function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Wt(){Wt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,a)&&(w=O);var E=g.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Kt(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Kt(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Qt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Jt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $t(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $t(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Xt=function(t){var e,r=t.getNotes,n=t.listData,i=t.isDesktopApp,a=Jt(Object(o.useState)(null),2),c=a[0],l=a[1];function s(){var t;return t=Wt().mark((function t(e){return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e[0].isIntersecting&&r({noLoading:!0});case 1:case"end":return t.stop()}}),t)})),s=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Qt(i,n,o,a,c,"next",t)}function c(t){Qt(i,n,o,a,c,"throw",t)}a(void 0)}))},s.apply(this,arguments)}return i&&u.a.config({top:80,duration:1.5}),Object(o.useEffect)((function(){var t=document.querySelector("#siteTipGuide");return t&&(t.style.display="none"),i&&u.a.config({top:80,duration:1.5}),function(){var t=document.querySelector("#siteTipGuide");t&&(t.style.display="block")}}),[]),window.IntersectionObserver&&(e=new IntersectionObserver((function(t){return s.apply(this,arguments)}),{threshold:.1})),Object(o.useEffect)((function(){if(c&&e)return e.observe(c),function(){e.unobserve(c)}}),[c,n]),{setLoadRef:l}},te=r(198),ee=r(3411);function re(t){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},re(t)}function ne(){ne=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,a)&&(w=O);var E=g.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==re(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(re(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function oe(t){return function(t){if(Array.isArray(t))return pe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||fe(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ae(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ie(i,n,o,a,c,"next",t)}function c(t){ie(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ue(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(r),!0).forEach((function(e){le(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function le(t,e,r){return e=function(t){var e=function(t,e){if("object"!==re(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===re(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||fe(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(t,e){if(t){if("string"==typeof t)return pe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pe(t,e):void 0}}function pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var he=k.myNotesConsts.NOTE_ORDER_KEY,de={status:w.STATUS.unarchived,filterTab:ee.a.all,orderBy:ee.b.content_updated_at,currentTagId:null,search:""},ye=function(t){var e=t.currentUuid,r=t.refreshBatchProcess,n=se(Object(o.useState)([]),2),i=n[0],a=n[1],c=se(Object(o.useState)([]),2),l=c[0],s=c[1],f=se(Object(o.useState)(!1),2),p=f[0],h=f[1],d=se(Object(o.useState)(!0),2),y=d[0],v=d[1],m=se(Object(o.useState)([]),2),b=m[0],g=m[1],_=se(Object(o.useState)(ue(ue({},de),{},{orderBy:te.a.get(he)||ee.b.content_updated_at})),2),O=_[0],E=_[1],k=Object(o.useCallback)((function(t){s([]),a([]),E(ue(ue({},O),t))}),[O]),j=Object(o.useCallback)((function(t){return l.find((function(e){return e.id===t}))?[l,s]:[i,a]}),[i,l]),x=Object(o.useCallback)(ae(ne().mark((function t(){var e,r,n,o,c,u,l=arguments;return ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=l.length>0&&void 0!==l[0]?l[0]:{}).noLoading||h(!0),r={offset:i.length,q:O.search,filter_type:O.filterTab,status:O.status,merge_dynamic_data:0,order:O.orderBy,with_pinned_notes:!0},O.currentTagId&&(r.tag=O.currentTagId),w.NEED_PINNED_TYPE.includes(O.filterTab)||delete r.with_pinned_notes,e.fromQuery&&(r.offset=0),r.q&&(r.order=ee.b.first_published_at),w.DEFAULT_TYPE.includes(r.filter_type)||(r.include_body=!0,r.order=ee.b.first_published_at),t.prev=8,t.next=11,Zt.a.NoteCtlImpl.index(r,{useOriginResp:!0});case 11:n=t.sent,o=n.has_more,c=n.notes,u=n.pin_notes,v(o),0===r.offset?w.NEED_PINNED_TYPE.includes(O.filterTab)?(s(u),a(c)):a(c):a([].concat(oe(i),oe(c)));case 17:return t.prev=17,h(!1),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[8,,17,20]])}))),[O,i]),S=Object(o.useCallback)(ae(ne().mark((function t(){var e,r;return ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt.a.NoteTagCtlImpl.count({status:O.status,filter_type:O.filterTab});case 2:e=t.sent,(r=e.data)&&(g(r),O.currentTagId&&!r.some((function(t){return t.id===O.currentTagId}))&&O.currentTagId!==w.FILTER_TAGS.noTag&&k({currentTagId:null}));case 5:case"end":return t.stop()}}),t)}))),[O]);var T=Object(o.useCallback)((function(t){return Zt.a.NoteOperateCtlImpl.batchDelete({ids:t,latest_update_user_uuid:e}).then((function(){null==r||r();var e=i.slice().filter((function(e){return!t.includes(e.id)}));a(e);var n=l.slice().filter((function(e){return!t.includes(e.id)}));s(n),!e.length&&y&&x(),S(),u.a.success(__("小记已移至回收站"))})).catch((function(){u.a.error(__("删除失败"))}))}),[j,e]),P=function(){var t=ae(ne().mark((function t(e){var r;return ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt.a.NoteOperateCtlImpl.batchPin({ids:[e.id]});case 2:e.pinned_at=new Date,r=i.filter((function(t){return t.id!==e.id})),l.unshift(e),a(r),s(l),u.a.success(__("小记置顶成功"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=ae(ne().mark((function t(e){var r;return ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zt.a.NoteOperateCtlImpl.batchUnPin({ids:[e.id]});case 2:e.pinned_at=null,r=l.filter((function(t){return t.id!==e.id})),i.unshift(e),a(i),s(r),u.a.success(__("取消置顶成功"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){x(),S()}),[O]),{state:{listData:i,listLoading:p,hasMore:y,noteTags:b,noteFilterParams:O,pinnedListData:l},setListData:a,getNotes:x,getNoteTags:S,onChangeFilterParams:k,onReset:function(){s([]),E(de)},onRemoveNote:function(t){var e=t.id;T([e])},setPinnedListData:s,getListData:j,pinnedNote:P,deletePinnedNote:L,onRemoveNotes:T}};function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function me(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function be(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?me(Object(r),!0).forEach((function(e){ge(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ge(t,e,r){return e=function(t){var e=function(t,e){if("object"!==ve(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ve(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function we(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _e(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _e(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Oe=function(){var t=we(Object(o.useState)(!1),2),e=t[0],r=t[1],n=we(Object(o.useState)(!0),2),i=n[0],a=n[1],c=ye({}),l=c.state,s=l.listData,f=l.listLoading,p=l.hasMore,h=l.noteTags,d=l.noteFilterParams,y=l.pinnedListData,v=c.getListData,m=c.getNotes,b=c.getNoteTags,g=c.onChangeFilterParams,w=c.onReset,_=c.onRemoveNote,O=c.onRemoveNotes,E=Xt({listData:s,getNotes:m,isDesktopApp:k.isDesktopApp}).setLoadRef,j=Object(o.useCallback)((function(){d.search&&w()}),[d]),x=Object(o.useCallback)((function(t){t!==d.currentTagId?g({currentTagId:t}):g({currentTagId:null})}),[d]);return{state:{listData:s,pinnedListData:y,listLoading:f,orderBy:d.orderBy,hasMore:p,searchValue:d.search,searchActive:e,filterTab:d.filterTab,noteTags:h,currentTagId:d.currentTagId,noteStatus:d.status,toDocList:[],showPinned:i},getNotes:m,onLoadNote:function(t){var e=t.id,r=we(v(e),2),n=r[0],o=r[1],i=n.slice(),a=i.findIndex((function(t){return t.id===e}));return i[a].loading=!0,o(i),Zt.a.NoteCtlImpl.show({id:e,merge_dynamic_data:0}).then((function(t){var e=n.slice();e[a]=be(be({},t),{},{expanded_at:new Date}),o(e)})).catch((function(){var t=n.slice();i[a].loading=!1,o(t),u.a.error(__("获取内容失败，请再试一次"))}))},onCollapseNote:function(t){var e=t.id,r=we(v(e),2),n=r[0],o=r[1],i=n.slice(),a=i.findIndex((function(t){return t.id===e}));delete i[a].expanded_at,delete i[a].changed_at,delete i[a].loading,o(i)},onRemoveNote:_,onRemoveNotes:O,onSearchNote:function(t){g({search:t})},onSearchReset:j,setSearchActive:r,getNoteTags:b,onSelectTag:x,onChangeFilterParams:g,onReset:w,setLoadRef:E,setShowPinned:a}},Ee="index-module_wrapper_kkqhF",ke="index-module_tagContainer_TFFU4",je="index-module_show_oAR0z",xe="index-module_tagContainerExpand_7mxch",Se="index-module_tagTipBar_g7usD",Te="index-module_icon_nCjEV",Pe="index-module_notesList_xu6a8",Le="index-module_liteWrapper_fYo2B";function Ne(t){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne(t)}function Ce(){return Ce=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ce.apply(this,arguments)}function Ae(t,e,r){return e=function(t){var e=function(t,e){if("object"!==Ne(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ne(e)?e:String(e)}(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Re(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ie(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ie(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Be=function(t){var e,r=Oe(t),n=t.storage,a=Re(Object(o.useState)(!1),2),c=a[0],u=a[1],s=r.state,p=s.listLoading,y=s.noteTags,v=s.currentTagId,m=r.onSelectTag,b=r.setSearchActive,g=r.onSearchReset,w=r.onSearchNote;Object(o.useEffect)((function(){Object(P.fixListContainerHeight)()}),[c]);var _=!h()(y);return i.a.createElement("div",{"data-testid":"mynote-list-container",id:"mynote-container",className:Ee},i.a.createElement(Gt,{searchValue:r.state.searchValue,searchActive:r.state.searchActive,setSearchActive:b,onSearchReset:g,onSearchNote:w,activeMode:!0,isDesktopApp:k.isDesktopApp,isLiteMode:!0}),i.a.createElement("div",{className:f()(ke,(e={},Ae(e,xe,c),Ae(e,je,_),e),"note-tag-container")},i.a.createElement("div",{onClick:function(){return u(!c)},className:Se},i.a.createElement("span",null,c?__("收起所有标签"):__("展开所有标签")),i.a.createElement(d.default,{className:Te,width:16})),i.a.createElement("div",{className:Le},i.a.createElement(lt,{hideMore:!1,showCount:!0,currentTagId:v,onSelect:m,localStorage:n,storageKey:"NOTE_LIST_TAG_MANAGER",data:y}))),i.a.createElement(l.a,{spinning:p},i.a.createElement("div",{className:f()(Pe,"note-list-container")},i.a.createElement(Nt,Ce({},r,{isMobile:!0,isLiteMode:!0,renderToolBar:function(e){return i.a.createElement(qt,{item:e,showFeather:!r.state.searchValue,onInsertToLakeEditor:t.onInsertToLakeEditor})}})))))};Be.fetchData=function(t){return Zt.a.NoteCtlImpl.show({id:t.id})},Be.defaultProps={onInsertToLakeEditor:function(){}},Be.propTypes={webProxy:a.PropTypes.object,storage:a.PropTypes.object,onInsertToLakeEditor:a.PropTypes.func};var De=Be;function Fe(t){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe(t)}function Me(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ze(n.key),n)}}function Ge(t,e){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ge(t,e)}function Ue(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ve(t);if(e){var o=Ve(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Fe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ye(t)}(this,r)}}function Ye(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ve(t){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ve(t)}function ze(t){var e=function(t,e){if("object"!==Fe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Fe(e)?e:String(e)}var He=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ge(t,e)}(a,t);var e,r,n,o=Ue(a);function a(){var t,e,r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return t=o.call.apply(o,[this].concat(c)),e=Ye(t),n=function(e){De.fetchData(e).then((function(e){t.props.onInsertDocument("text/lake",e.content.source)})).catch((function(){u.a.error(__("小记插入失败"))}))},(r=ze(r="onInsertToLakeEditor"))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t}return e=a,(r=[{key:"render",value:function(){var t=this.props.storage;return i.a.createElement("div",{className:"material-library-note"},i.a.createElement(De,{storage:t,onInsertToLakeEditor:this.onInsertToLakeEditor}))}}])&&Me(e.prototype,r),n&&Me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function qe(){return qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qe.apply(this,arguments)}He.propTypes={storage:c.a.object,onInsertDocument:c.a.func};var Ze=n.a.TabPane,Ke="storage/sidebar-tab-key",We={note:"note"},Qe=function(t){var e=t.storage;return{tabKey:e.get(Ke)||We.note,onTabChange:function(t){e.set(Ke,t)}}};function Je(t){var e=Qe(t),r=t.storage;return i.a.createElement("div",{className:"material-library-view"},i.a.createElement(n.a,{defaultActiveKey:e.tabKey,onChange:e.onTabChange},i.a.createElement(Ze,{tab:__("插入小记"),key:We.note},i.a.createElement(He,qe({},t.note,{storage:r})))))}Je.propTypes={storage:c.a.object,webProxy:c.a.object,note:c.a.object}},3497:function(t,e,r){"use strict";var n=r(72),o=r.n(n),i=r(191),a={}.toString,c=function(t,e){return a.call(t)==="[object "+e+"]"};function u(t){return null==t}function l(t,e,r){try{return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]}catch(t){return u(r)?null:r}}function s(t,e){var r=[];if(t){if(e&&!e(t))return r;for(var n=t.childNodes,o=0;o<n.length;o++){var i=n[o],a=i.nodeType;3===a?r.push(i):1!==a&&9!==a&&11!==a||(r=r.concat(s(i,e)))}}return r}function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===f(e)?e:String(e)}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(a,t);var e,r,n,o=b(a);function a(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=o.call(this,t),!t.target)throw new Error("please set a dom element as target!");return e.options=h({target:null,style:{highlight:{fill:"rgba(255, 230, 0, 0.5)"},select:{fill:"rgba(255, 140, 0, 0.5)"}},filter:null},t),e.ranges=[],e._initTarget(),e._createCanvas(),e}return e=a,(r=[{key:"_initTarget",value:function(){var t=this.options.target;"static"===l(t,"position")&&(t.style.position="relative")}},{key:"_createCanvas",value:function(){var t=this.options.target,e=document.createElement("div");e.style.position="absolute",e.style.top=0,e.style.left=0,e.style["pointer-events"]="none",e.style["z-index"]=99,t.appendChild(e);var r=new i.TinyCanvas({container:e});this.container=e,this.canvas=r}},{key:"_resizeCanvas",value:function(){var t=this.options.target,e=this.canvas,r=function(t,e){var r=l(t,"width",e);return"auto"===r&&(r=t.offsetWidth),parseFloat(r)}(t),n=function(t,e){var r=l(t,"height",e);return"auto"===r&&(r=t.offsetHeight),parseFloat(r)}(t);e.resize(r,n)}},{key:"_getRelativeRect",value:function(t){var e=this.container,r=t.getBoundingClientRect(),n=e.getBoundingClientRect();return{x:r.left-n.left,y:r.top-n.top,width:r.right-r.left,height:r.bottom-r.top}}},{key:"_cacheRange",value:function(t){return{startOffset:t.startOffset,endOffset:t.endOffset,startContainer:t.startContainer,endContainer:t.endContainer,commonAncestorContainer:t.commonAncestorContainer}}},{key:"_isRangeWrap",value:function(t){var e=this._cacheRange(t);t.setEnd(e.startContainer,e.startOffset+1);var r=t.getBoundingClientRect();t.setEnd(e.startContainer,e.endOffset-1),t.setStart(e.endContainer,e.endOffset);var n=t.getBoundingClientRect();return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),r.bottom!==n.bottom}},{key:"_drawOneByOne",value:function(t,e){for(var r=this._cacheRange(t),n=this.canvas,o=r.startOffset;o<r.endOffset;){t.setStart(r.commonAncestorContainer,o),t.setEnd(r.commonAncestorContainer,o+1);var i=this._getRelativeRect(t);n.clearRect(i),n.draw("Rect",h(h({},i),e)),o++}t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset)}},{key:"_drawRangeBackground",value:function(t,e){var r=this.canvas;if(this._isRangeWrap(t))return this._drawOneByOne(t,e);var n=this._getRelativeRect(t);r.clearRect(n),r.draw("Rect",h(h({},n),e))}},{key:"_highlightRanges",value:function(t){var e=this;t.forEach((function(t){e._highlightRange(t)}))}},{key:"_clearRange",value:function(t){var e=this.canvas,r=this._getRelativeRect(t);e.clearRect(r)}},{key:"_highlightRange",value:function(t){var e=this.options.style.highlight;this._drawRangeBackground(t,e)}},{key:"_selectRange",value:function(t){var e=this.options.style.select;this._drawRangeBackground(t,e)}},{key:"_clearCanvas",value:function(){this.canvas.clear()}},{key:"_move",value:function(t){var e=this.selectedRange,r=this.ranges;if(e){var n=r.indexOf(e),o=r[n+t];o||(o=t>0?r[t-1]:r[r.length+t]),this._highlightRange(e),this.select(o),this.scrollIntoView()}}},{key:"_replace",value:function(t,e){var r=t.commonAncestorContainer.parentNode,n=document.createTextNode(e);"A"===r.tagName&&r.getAttribute("href")===r.innerText&&r.setAttribute("href",e),t.deleteContents(),t.insertNode(n)}},{key:"replace",value:function(t){if(!u(t)){var e=this.selectedRange;if(this.ranges.length>0){var r={range:e};this.emit("before:replace",r),this._replace(e,t),this._clearRange(e),this.emit("after:replace",r)}}}},{key:"replaceAll",value:function(t){var e=this;if(!u(t)){var r=this.ranges,n={ranges:r};this.emit("before:replaceAll",n),r.forEach((function(r){e._replace(r,t)})),this.emit("after:replaceAll",n),r.forEach((function(t){e._saveCardValue(t)})),this.clear()}}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"find",value:function(t,e){var r=[];if(this.clear(),t&&c(t,"String")&&t.length>0){e=function(t){return c(t,"Function")}(e)?e:function(){return!0},this._resizeCanvas();var n=s(this.options.target,(function(t){return"none"!==t.style.display&&e(t)}));n.length>0&&(r=function(t,e){var r=[];return t.forEach((function(t){var n=t.nodeValue,o=e.length,i=function(t,e){for(var r=[],n=e.length,o=t.indexOf(e);o>-1;)r.push(o),o=t.indexOf(e,o+n);return r}((n||"").toLowerCase(),(e||"").toLowerCase());i.forEach((function(e){var n=document.createRange();n.setStart(t,e),n.setEnd(t,e+o),r.push(n)}))})),r}(n,t),this._highlightRanges(r),this.ranges=r,this.keyword=t)}return this.ranges=r,r}},{key:"reFind",value:function(){var t=this.selectedRangeIndex,e=this.find(this.keyword);if(e.length>0&&!u(t)){var r=e[t]?e[t]:e[0];this.select(r)}return e}},{key:"scrollIntoView",value:function(){if(this.selectedRange){var t=this.selectedRange.commonAncestorContainer.parentElement;(e=t.getBoundingClientRect()).top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)||(t.scrollIntoView({block:"center"}),document.documentElement.scrollTop=0,document.body.scrollTop=0)}var e}},{key:"select",value:function(t){if(!u(t)){var e=this.ranges,r=t;c(t,"Number")&&(r=e[t]);var n={range:r};this.emit("before:select",n),this._selectRange(r),this.selectedRange=r,this.selectedRangeIndex=e.indexOf(r),this.emit("after:select",n)}}},{key:"next",value:function(){this._move(1)}},{key:"prev",value:function(){this._move(-1)}},{key:"findIndex",value:function(t){this._move(t)}},{key:"clear",value:function(){this._clearCanvas(),this.selectedRange=void 0,this.ranges=[],this.keyword=void 0}},{key:"count",value:function(){var t=this.ranges;if(0===t.length)return 0;var e=this.selectedRange;return[t.indexOf(e)+1,t.length]}},{key:"destroy",value:function(){var t=this.container;this.options=null,t.parentElement.removeChild(t)}}])&&y(e.prototype,r),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.a);e.a=w},3503:function(t,e,r){"use strict";var n=r(3394);e.a=n.a},3542:function(t,e,r){"use strict";r.d(e,"c",(function(){return h})),r.d(e,"a",(function(){return w})),r.d(e,"m",(function(){return T})),r.d(e,"k",(function(){return Y})),r.d(e,"i",(function(){return W})),r.d(e,"j",(function(){return rt})),r.d(e,"l",(function(){return lt})),r.d(e,"h",(function(){return vt})),r.d(e,"f",(function(){return Ot})),r.d(e,"d",(function(){return Tt})),r.d(e,"e",(function(){return Rt})),r.d(e,"g",(function(){return Ut})),r.d(e,"b",(function(){return Kt}));var n=r(80),o=r.n(n),i=r(3415),a=r(3324);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===c(i)?i:String(i)),n)}var o,i}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(c,t);var e,r,n,a=s(c);function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return e=c,n=[{key:"getEmptyDocument",value:function(){return{format:o.a.FORMAT.LAKE,value:null}}}],(r=[{key:"getType",value:function(){var t=this.options.targetType;return t?"".concat(t,"_comment").toLowerCase():"comment"}},{key:"getCacheKey",value:function(){var t=this.options.replyId;return this.isEditMode&&this.target&&this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(this.target.id,"/edit"):this.belong?"autosave/".concat(this.type,"/").concat(this.belong.id,"/").concat(t,"/new"):"autosave/".concat(this.type)}},{key:"isMiniSize",value:function(){return this.options.useMiniGuide||this.options.isMiniSize||window.h5}},{key:"getDefaultFormat",value:function(){return i.a.getDefaultDocumentFormat()}},{key:"getEnableFullEditor",value:function(){return"Artboard"!==this.targetType}}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(a.a),h=p;function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===d(i)?i:String(i)),n)}var o,i}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b(t);if(e){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(i,t);var e,r,n,o=m(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="Resource",t.useBelongAttach=!0,t.from="reply",o.call(this,t)}return e=i,(r=[{key:"getType",value:function(){return"area_comment"}},{key:"getAutoFocus",value:function(){return!0}},{key:"isMiniSize",value:function(){return!0}}])&&y(e.prototype,r),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(h),w=g;function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===_(i)?i:String(i)),n)}var o,i}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},E.apply(this,arguments)}function k(t,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(t,e)}function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=x(t);if(e){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(i,t);var e,r,n,o=j(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="Doc",t.useBelongAttach=!0,t.from="reply",o.call(this,t)}return e=i,(r=[{key:"buildOptions",value:function(t){var e,r=E(x(i.prototype),"buildOptions",this).call(this,t);return r.image.showMiniToolbarWhen="never",null===(e=r.disabledPlugins)||void 0===e||e.push("slash"),r}},{key:"getType",value:function(){return"word_comment"}},{key:"getAutoFocus",value:function(){return!1}},{key:"isMiniSize",value:function(){return!0}},{key:"getEnableFullEditor",value:function(){return!1}}])&&O(e.prototype,r),n&&O(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(h),T=S,P=r(14),L=r.n(P),N=r(3387);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t,e,r){return(e=B(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,B(n.key),n)}}function B(t){var e=function(t,e){if("object"!==C(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===C(e)?e:String(e)}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=M(t);if(e){var o=M(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}var G={daily:{title:"#prefix# #day# 日报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>建议 TL 每天组织日会，将一天的重点事项安排于此</p><p>每位同学下班前，在此提交日报</p><p><br /></p><p>日报不要记流水账，尽量在 200 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的日报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},weekly:{title:"#prefix# #day# 周报汇总",content:'<!doctype lake><meta name="doc-version" content="1" /><p>将一周的工作总结回复于此</p><p><br /></p><p>不要记流水账，尽量在 800 字以内</p><p>重点项目或工作要及时总结和提报，尤其风险点要及时提报</p><p>可以写写思考和感想</p><p><br /></p><p>写完自己的周报，也看看大家的</p><p>每一位同学的努力，都值得认真阅读与交流</p><p><br /></p><p><span style="color: #FA541C;"><span>注意不要提及保密项目和敏感数据</span></span></p>'},vote:{title:"一起来投票吧",content:'<!doctype lake><meta name="doc-version" content="1" /><card type="block" name="vote" value="data:%7B%22margin%22%3Atrue%2C%22id%22%3A%22jTHWG%22%2C%22type%22%3A%22single%22%7D"></card><p><br /><cursor /></p>'},default:{title:"",content:"<!doctype lake><p></p>"}},U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(i,t);var e,r,n,o=F(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,n=[{key:"getTemplate",value:function(t,e){var r=G[t];if(!r)return{title:null,content:null};var n=L()(new Date).format("YYYY-MM-DD"),o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach((function(e){R(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},r);return o.title=o.title.replace("#prefix#",e),o.title=o.title.replace("#day#",n),o}}],(r=[{key:"getType",value:function(){return"thread"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var t="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(t,"&attachable_type=").concat(this.belongType||"Book","&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):this.group?"".concat(t,"&attachable_type=User&attachable_id=").concat(this.group.id,"&from=").concat(this.from):null}},{key:"getFileCopyUrl",value:function(){return this.isEditMode?"".concat("/api/upload/copy?type=attachment","&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):null}}])&&I(e.prototype,r),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(N.a),Y=U;function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==V(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===V(i)?i:String(i)),n)}var o,i}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H(t,e)}function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Z(t);if(e){var o=Z(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(i,t);var e,r,n,o=q(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getType",value:function(){return"thread_board"}},{key:"getAutoFocus",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"getFileUploadUrl",value:function(){var t="/api/upload/attach?ctoken=".concat(this.ctoken,"&type=attachment");return this.isEditMode&&!this.options.useBelongAttach?"".concat(t,"&attachable_type=").concat(this.attachType,"&attachable_id=").concat(this.target.id,"&from=").concat(this.from):this.belong?"".concat(t,"&attachable_type=").concat(this.belongType,"&attachable_id=").concat(this.belong.id,"&from=").concat(this.from):null}}])&&z(e.prototype,r),n&&z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a),W=K;function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Q(i)?i:String(i)),n)}var o,i}function $(t,e){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$(t,e)}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=tt(t);if(e){var o=tt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function tt(t){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tt(t)}var et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(i,t);var e,r,n,o=X(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"getType",value:function(){return"thread_comment"}}])&&J(e.prototype,r),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(h),rt=et;function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==nt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===nt(i)?i:String(i)),n)}var o,i}function it(){return it="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ut(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},it.apply(this,arguments)}function at(t,e){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},at(t,e)}function ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=ut(t);if(e){var o=ut(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ut(t){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ut(t)}var lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&at(t,e)}(i,t);var e,r,n,o=ct(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="User",t.useBelongAttach=!0,o.call(this,t)}return e=i,(r=[{key:"buildOptions",value:function(t){var e=it(ut(i.prototype),"buildOptions",this).call(this,t);return e.typography={mustTypography:"classic",typography:"classic",paragraphSpacing:"default"},e}},{key:"getType",value:function(){return"user_readme"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&ot(e.prototype,r),n&&ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a);function st(t){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},st(t)}function ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==st(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===st(i)?i:String(i)),n)}var o,i}function pt(){return pt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},pt.apply(this,arguments)}function ht(t,e){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ht(t,e)}function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yt(t);if(e){var o=yt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===st(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yt(t){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yt(t)}var vt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ht(t,e)}(i,t);var e,r,n,o=dt(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="Doc",t.useBelongAttach=!0,t.disableCache=!0,t.from="table",o.call(this,t)}return e=i,(r=[{key:"buildOptions",value:function(t){var e=pt(yt(i.prototype),"buildOptions",this).call(this,t);return e.typography={mustTypography:"classic",typography:"classic",paragraphSpacing:"default"},this.options.scrollNode&&(e.scrollNode=this.options.scrollNode),e}},{key:"getType",value:function(){return"table_record_desc"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!1}},{key:"getInitialDocument",value:function(){return{format:this.getDefaultFormat(),title:null,value:null}}}])&&ft(e.prototype,r),n&&ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a);function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==mt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===mt(i)?i:String(i)),n)}var o,i}function gt(t,e){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gt(t,e)}function wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=_t(t);if(e){var o=_t(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===mt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _t(t){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_t(t)}var Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gt(t,e)}(i,t);var e,r,n,o=wt(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.from="group_custom",t.attachType="User",t.useBelongAttach=!0,o.call(this,t)}return e=i,(r=[{key:"getType",value:function(){return"group_custom"}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete?target_type=Group&target_id=".concat(this.group.id)}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&bt(e.prototype,r),n&&bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a);function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function kt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Et(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Et(i)?i:String(i)),n)}var o,i}function jt(t,e){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jt(t,e)}function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=St(t);if(e){var o=St(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function St(t){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},St(t)}var Tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jt(t,e)}(i,t);var e,r,n,o=xt(i);function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var e=t.feedback;return t.attachType="User",t.useBelongAttach=!0,t.from="feedback",t.placeholder={tip:e&&e.abilities.manage?"你将要代表语雀回复用户，请使用官方口吻，慎重填写":"",emptyParagraphTip:""},o.call(this,t)}return e=i,(r=[{key:"getType",value:function(){return"feedback_comment"}},{key:"getCacheKey",value:function(){var t=this.getType();if(this.target)return"autosave/".concat(t,"/").concat(this.target.id,"/edit");var e=this.options.feedback;return e?"autosave/".concat(t,"/").concat(e.id,"/new"):"autosave/".concat(t)}},{key:"getContentObject",value:function(){var t=this.target.content||{source:"",format:"lake"};return{format:t.format,value:t.source||""}}},{key:"isMiniSize",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"getAutoFocus",value:function(){return!0}}])&&kt(e.prototype,r),n&&kt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(N.a);function Pt(t){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}function Lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Pt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Pt(i)?i:String(i)),n)}var o,i}function Nt(t,e){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nt(t,e)}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=At(t);if(e){var o=At(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function At(t){return At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},At(t)}var Rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nt(t,e)}(i,t);var e,r,n,o=Ct(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="User",t.useBelongAttach=!0,t.placeholder={tip:"",emptyParagraphTip:""},t.from="feedback",o.call(this,t)}return e=i,(r=[{key:"getType",value:function(){return"feedback_remark"}},{key:"getContentObject",value:function(){return{format:"lake",value:this.target.remark||""}}},{key:"getCacheKey",value:function(){return this.target?"autosave/".concat(this.type,"/").concat(this.target.id):"autosave/".concat(this.type)}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"getAutoFocus",value:function(){return!0}},{key:"isMiniSize",value:function(){return!0}}])&&Lt(e.prototype,r),n&&Lt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(N.a);function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==It(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===It(i)?i:String(i)),n)}var o,i}function Dt(){return Dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Dt.apply(this,arguments)}function Ft(t,e){return Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ft(t,e)}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Gt(t);if(e){var o=Gt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===It(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Gt(t){return Gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gt(t)}var Ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ft(t,e)}(i,t);var e,r,n,o=Mt(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.target&&(t.attachType="Doclet"),o.call(this,t)}return e=i,(r=[{key:"getCards",value:function(){return this.options.target?Dt(Gt(i.prototype),"getCards",this).call(this):["label"]}},{key:"getFullCards",value:function(){return this.options.target?Dt(Gt(i.prototype),"getFullCards",this).call(this):["label"]}},{key:"getType",value:function(){return"org_board"}},{key:"getAutoFocus",value:function(){return!0}},{key:"getMentionActionUrl",value:function(){return"/api/users/complete"}},{key:"isMiniSize",value:function(){return!1}}])&&Bt(e.prototype,r),n&&Bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a);function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function Vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=n.key,i=void 0,i=function(t,e){if("object"!==Yt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Yt(i)?i:String(i)),n)}var o,i}function zt(){return zt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},zt.apply(this,arguments)}function Ht(t,e){return Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ht(t,e)}function qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Zt(t);if(e){var o=Zt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Zt(t){return Zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zt(t)}var Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ht(t,e)}(i,t);var e,r,n,o=qt(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.attachType="Doclet",o.call(this,t)}return e=i,(r=[{key:"buildOptions",value:function(t){var e=zt(Zt(i.prototype),"buildOptions",this).call(this,t);return e.disabledPlugins=["collaboration","vote","checkIn","toc","dataTable","materialLibrary","okr"],e.typography={typography:"classic",paragraphSpacing:"relax"},e}},{key:"getType",value:function(){return"book_overview"}},{key:"isMiniSize",value:function(){return this.options.small}},{key:"getAutoFocus",value:function(){return!0}}])&&Vt(e.prototype,r),n&&Vt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(a.a)},3759:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}));var n="https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*Aj06T7NnHngAAAAAAAAAAAAADvuFAQ/original",o="https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*wPMVTriBo40AAAAAAAAAAAAAARQnAQ"},4965:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return o}));var n=function(t){return t.Toc="toc",t.CreatedAt="created_at",t.UpdatedAt="updated_at",t}({}),o=function(t){return t.Book="Book",t.Card="Card",t.Column="Column",t.Custom="Custom",t}({})},4966:function(t,e,r){"use strict";e.a={containerWrapper:"BookOverview-module_containerWrapper_DgnNE",offlineWrapper:"BookOverview-module_offlineWrapper_fCrBE",offlineImg:"BookOverview-module_offlineImg_q0zZC",offlineTip:"BookOverview-module_offlineTip_g7cmN",upload:"BookOverview-module_upload_oDqT-",container:"BookOverview-module_container_1XOeO",bookHead:"BookOverview-module_bookHead_+4tu8",bookTitle:"BookOverview-module_bookTitle_dJHa-",bookIcon:"BookOverview-module_bookIcon_wlbhc",editable:"BookOverview-module_editable_qciTg",bookName:"BookOverview-module_bookName_+UPrt",bookNameInput:"BookOverview-module_bookNameInput_mnrNe",action:"BookOverview-module_action_Syxj1",bookAction:"BookOverview-module_bookAction_ROIf-",bookActionItem:"BookOverview-module_bookActionItem_sbPH8",needSave:"BookOverview-module_needSave_pVuxm",update:"BookOverview-module_update_HbybS",star:"BookOverview-module_star_uvjUk",share:"BookOverview-module_share_gT2zn",statistics:"BookOverview-module_statistics_uHBns",docCount:"BookOverview-module_docCount_rTm77",wordCount:"BookOverview-module_wordCount_-Mcic",count:"BookOverview-module_count_4RxbQ",bookContributor:"BookOverview-module_bookContributor_yQxOn",editor:"BookOverview-module_editor_T56aC",viewer:"BookOverview-module_viewer_wHZhn",none:"BookOverview-module_none_Ec8cF",togglePanel:"BookOverview-module_togglePanel_mPWOh",title:"BookOverview-module_title_ok4h8",desc:"BookOverview-module_desc_mHhnV",toggleItem:"BookOverview-module_toggleItem_c4bNf",catalogHeaderTitle:"BookOverview-module_catalogHeaderTitle_6yl+P",tocContainer:"BookOverview-module_tocContainer_GR86Z",headerSwitch:"BookOverview-module_headerSwitch_xlCUf",switchBtnBg:"BookOverview-module_switchBtnBg_Gj+Gg",treeSelected:"BookOverview-module_treeSelected_tqaat",cardSelected:"BookOverview-module_cardSelected_S9EbS",columnSelected:"BookOverview-module_columnSelected_5Qn-T",switchButtons:"BookOverview-module_switchButtons_tH51-",switchBtn:"BookOverview-module_switchBtn_IVGhh",switchIcon:"BookOverview-module_switchIcon_5iInw",switchBtnSelected:"BookOverview-module_switchBtnSelected_IfORb",catalogModule:"BookOverview-module_catalogModule_xPRJ4",catalogMoreIcon:"BookOverview-module_catalogMoreIcon_tV7z9",empty:"BookOverview-module_empty_CmmT6",mt_26:"BookOverview-module_mt_26_iuvqB",selectPanel:"BookOverview-module_selectPanel_iQlU8",selectTitle:"BookOverview-module_selectTitle_nHGBR",selectItem:"BookOverview-module_selectItem_kWvPj",divider:"BookOverview-module_divider_FyGF3",offlineButton:"BookOverview-module_offlineButton_uIywo"}},5689:function(t,e,r){"use strict";r.r(e),r.d(e,"BookOverview",(function(){return pt})),r.d(e,"default",(function(){return ht}));r(1538);var n=r(1522),o=(r(1241),r(598)),i=(r(151),r(66)),a=(r(1392),r(1397)),c=(r(489),r(98)),u=(r(782),r(379)),l=(r(1001),r(583)),s=(r(42),r(9)),f=(r(56),r(12)),p=(r(41),r(10)),h=(r(303),r(94)),d=r(0),y=r.n(d),v=r(35),m=r(259),b=r(469),g=r(1213),w=r(1870),_=r(1872),O=r(1731),E=r(1922),k=r(1964),j=r(1963),x=r(1859),S=r(5),T=r.n(S),P=r(5690),L=r.n(P),N=r(145),C=r(426),A=r(11),R=r(3759),I=r(251),B=r(198),D=r(117),F=r(3610),M=r(3542),G=r(951),U=r(24),Y=r(4965),V=r(4966),z=r(1516);function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){X(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function K(){K=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new L(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p="suspendedStart",h="suspendedYield",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};l(w,a,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(N([])));O&&O!==r&&n.call(O,a)&&(w=O);var E=g.prototype=m.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==H(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function x(e,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?y:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=y,n.method="throw",n.arg=l.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(H(e)+" is not iterable")}return b.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},k(j.prototype),l(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function W(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Q(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){W(i,n,o,a,c,"next",t)}function c(t){W(i,n,o,a,c,"throw",t)}a(void 0)}))}}function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function X(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==H(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===H(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var tt=Object(I.b)((function(){return Promise.resolve().then(r.bind(null,4778))}),{suspense:!0}),et=Object(I.b)((function(){return Promise.all([r.e(1),r.e(10),r.e(1192)]).then(r.bind(null,5700))}),{suspense:!0}),rt=Object(I.b)((function(){return r.e(1183).then(r.bind(null,3988))}),{suspense:!0}),nt=Object(I.b)((function(){return r.e(1184).then(r.bind(null,3868))}),{suspense:!0}),ot=Object(I.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(8),r.e(1294)]).then(r.bind(null,3723)).then((function(t){return t.ShareButton}))}),{suspense:!0}),it=Object(I.b)((function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(0),r.e(1236)]).then(r.bind(null,3863))}),{suspense:!0}),at=Object(I.b)((function(){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(0),r.e(1241)]).then(r.bind(null,2948))}),{suspense:!0}),ct=Object(I.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(8),r.e(10),r.e(1188)]).then(r.bind(null,5693))}),{suspense:!0}),ut=function(t){var e=t.sections;return y.a.createElement("div",{className:V.a.selectPanel},e.map((function(t,r){return y.a.createElement("div",{key:r},e.length>1&&r>0&&r<e.length&&y.a.createElement(h.a,{className:V.a.divider}),y.a.createElement("div",{className:V.a.selectSection},t.title&&y.a.createElement("div",{className:V.a.selectTitle},t.title),t.content))})))},lt=function(t){var e=t.order,r=t.onChangeOrder;return y.a.createElement(ut,{sections:[{title:__("排序"),content:y.a.createElement("div",{className:V.a.selectList},[{name:__("按目录顺序"),value:Y.b.Toc},{name:__("按创建时间"),value:Y.b.CreatedAt},{name:__("按更新时间"),value:Y.b.UpdatedAt}].map((function(t){return y.a.createElement("div",{className:V.a.selectItem,onClick:function(){return r(t.value)},key:t.value},y.a.createElement("span",null,t.name),e===t.value&&y.a.createElement(g.default,null))})))}]})},st=function(t){var e,r=t.layout,n=t.maxLevel,o=t.displayValue,i=t.onChangeLevel,a=t.tailType,c=t.onChangeTailType,u=t.onChangeOrder,l=t.order;return(e={},X(e,Y.a.Book,y.a.createElement(ut,{sections:[{title:__("默认展示"),content:y.a.createElement("div",{className:V.a.selectList},[{name:__("全部层级"),value:"all"}].concat(Array.from({length:n},(function(t,e){return{name:__("第 {level} 级",{level:e+1}),value:e.toString()}}))).map((function(t){return y.a.createElement("div",{className:V.a.selectItem,onClick:function(){return i(t.value)},key:t.value},y.a.createElement("span",null,t.name),o===t.value&&y.a.createElement(g.default,null))})))},{title:__("显示"),content:y.a.createElement("div",{className:V.a.selectList},[{name:__("创建时间"),value:N.TOC_TAIL_TYPES.CREATED_AT},{name:__("更新时间"),value:N.TOC_TAIL_TYPES.UPDATED_AT},{name:__("作者"),value:N.TOC_TAIL_TYPES.AUTHOR},{name:__("文档路径"),value:N.TOC_TAIL_TYPES.SLUG}].map((function(t){return y.a.createElement("div",{className:V.a.selectItem,onClick:function(){return c(t.value)},key:t.value},y.a.createElement("span",null,t.name),a===t.value&&y.a.createElement(g.default,null))})))}]})),X(e,Y.a.Card,y.a.createElement(lt,{order:l,onChangeOrder:u})),X(e,Y.a.Column,y.a.createElement(lt,{order:l,onChangeOrder:u})),e)[r]},ft=function(t){var e=t.enable,r=t.editable,n=t.editComponent,o=t.viewComponent,i=t.className;if(!e)return null;var a=r?n:o;return y.a.createElement("div",{className:i},a)};function pt(){var t,e,r,h,v,g,S,P,N=Object(b.e)(),I=Object(b.f)((function(t){return{book:t.book,me:t.me,group:t.group}})),U=I.book,z=I.me,H=I.group,q=Object(d.useRef)(null),W=Object(d.useRef)(null),$="bookOverview/doclet/".concat(U.id),ut=J(Object(d.useState)(!0),2),lt=ut[0],pt=ut[1],ht=J(Object(d.useState)(!0),2),dt=ht[0],yt=ht[1],vt=J(Object(d.useState)(!1),2),mt=vt[0],bt=vt[1],gt=J(Object(d.useState)(null),2),wt=gt[0],_t=gt[1],Ot=J(Object(d.useState)(""),2),Et=Ot[0],kt=Ot[1],jt=J(Object(d.useState)(!1),2),xt=jt[0],St=jt[1],Tt=J(Object(d.useState)(Y.a.Book),2),Pt=Tt[0],Lt=Tt[1],Nt=J(Object(d.useState)(!1),2),Ct=Nt[0],At=Nt[1],Rt=J(Object(d.useState)(!1),2),It=Rt[0],Bt=Rt[1],Dt=J(Object(d.useState)(!1),2),Ft=Dt[0],Mt=Dt[1],Gt=J(Object(d.useState)(U.name),2),Ut=Gt[0],Yt=Gt[1],Vt=J(Object(d.useState)(!1),2),zt=Vt[0],Ht=Vt[1],qt=J(Object(d.useState)({wordCount:0,enableCustomBody:!0,enableCatalog:!0,order:Y.b.Toc}),2),Zt=qt[0],Kt=qt[1],Wt=Zt.wordCount,Qt=Zt.enableCustomBody,Jt=Zt.enableCatalog,$t=Zt.order,Xt=J(Object(d.useState)([]),2),te=Xt[0],ee=Xt[1],re={order:$t,book:U,inTocDocs:te,catalogLoading:dt,layout:Pt,group:H,isEdit:xt};Object(d.useLayoutEffect)((function(){pt(!0),yt(!0),Q(K().mark((function t(){var e,r,n,o,i,a,c,u,l,s;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.webProxy.books.getOverviewInfo({id:U.id});case 2:return e=t.sent,r=e.wordCount,n=e.contributors,o=e.enableCustomBody,i=e.enableCatalog,a=e.layout,c=e.customIndex,u=e.order,l=e.enableUserFeed,window.appData.enableUserFeed=l,Kt({wordCount:r,enableCustomBody:o,enableCatalog:i,order:u}),a===Y.a.Custom?Lt(Y.a.Book):Lt(a),_t(c),kt(c.body_asl),q.current=new M.b({defaultValue:c.body_asl,target:c}),N({type:"book/update",payload:{contributors:n}}),a===Y.a.Book&&(pt(!1),yt(!1)),t.next=21,D.webProxy.docs.find({book_id:U.id});case 21:s=t.sent,N({type:"book/update",payload:{docs:s}}),ee(pe(s.filter((function(t){return!Object(C.isDocNotInToc)(t,U.toc)})).filter(Boolean),u)),pt(!1),yt(!1);case 26:case"end":return t.stop()}}),t)})))()}),[U.id]),Object(G.a)((function(){Q(K().mark((function t(){var e,r;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=null,!z.id){t.next=6;break}return t.next=4,D.webProxy.mine.marks.findOne({target_type:"Book",id:U.id});case 4:r=t.sent,e=r.markAction;case 6:N({type:"book/update",payload:{mark:e}});case 7:case"end":return t.stop()}}),t)})))()}),[]);var ne=Object(d.useMemo)((function(){var t,e=U.catalog_display_level||10,r=1;return null===(t=U.toc)||void 0===t||t.forEach((function(t){r=Math.max(r,t.level)})),r<2&&(r=Math.max(r,2)),"all"!==e&&(r=Math.max(e,r)),r}),[U.toc,U.catalog_display_level]),oe=function(){var t=Q(K().mark((function t(){var e;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=q&&q.current){t.next=2;break}return t.abrupt("return");case 2:B.a.set($,null==q||null===(e=q.current)||void 0===e?void 0:e.getValue()),Bt(!0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ie=function(){var t=Q(K().mark((function t(){var e,r;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(wt){t.next=2;break}return t.abrupt("return");case 2:if(B.a.remove($),q.current){t.next=5;break}return t.abrupt("return");case 5:if((e=q.current.getValue())!==Et){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,D.webProxy.doclets.updateContent({id:null==wt?void 0:wt.id,body_asl:e,format:"lake",draft_version:null==wt?void 0:wt.draft_version});case 10:return t.next=12,D.webProxy.doclets.publish({id:wt.id});case 12:return t.next=14,D.webProxy.doclets.findOne({id:wt.id});case 14:r=t.sent,kt(r.body_asl),_t(r),q.current=new M.b({defaultValue:r.body_asl,target:r});case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ae=function(){var t=Q(K().mark((function t(){var e,r;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=q&&q.current){t.next=2;break}return t.abrupt("return");case 2:e=B.a.get($),r=e||Et,q.current.setValue(r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ce=function(){var t=Q(K().mark((function t(){return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ie().finally((function(){St(!1),Bt(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ue=function(){var t=Q(K().mark((function t(e){var r;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.webProxy.books.update({id:U.id,cover:e});case 2:return Mt(!1),t.next=5,D.webProxy.books.findOne({id:U.id,find_by_id:!0});case 5:r=t.sent,N({type:"book/update",payload:{cover:r.cover}});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),le=function(){var t=Q(K().mark((function t(e){return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return N({type:"book/updateSettingProps",payload:{book_icon:e}}),t.next=3,D.webProxy.books.update({id:U.id,book_icon:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),se=function(){var t=Q(K().mark((function t(e){return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return At(!1),N({type:"book/update",payload:Z(Z({},U),{},{catalog_display_level:e})}),t.next=4,D.webProxy.catalogNodes.updateSettings({book_id:U.id,catalog_display_level:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fe=function(){var t=Q(K().mark((function t(e){return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return At(!1),N({type:"book/update",payload:Z(Z({},U),{},{catalog_tail_type:e})}),t.next=4,D.webProxy.catalogNodes.updateSettings({book_id:U.id,catalog_tail_type:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),pe=function(t,e){if(Y.b.Toc===e){var r,n=L()(t.map((function(t){return[t.id,t]})));return null===(r=U.toc)||void 0===r?void 0:r.filter((function(t){return"DOC"===t.type})).map((function(t){return n[t.doc_id]})).filter(Boolean)}return Y.b.CreatedAt===e?t.sort((function(t,e){return new Date(e.created_at).getTime()-new Date(t.created_at).getTime()})):Y.b.UpdatedAt===e?t.sort((function(t,e){return new Date(e.content_updated_at).getTime()-new Date(t.content_updated_at).getTime()})):[]},he=function(){var t=Q(K().mark((function t(e){return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return At(!1),Kt(Z(Z({},Zt),{},{order:e})),ee(pe(te,e)),t.next=5,D.webProxy.books.updateSettings({id:U.id,order:e});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),de=function(){var t=Q(K().mark((function t(e){return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Kt(Z(Z({},Zt),{},{enableCustomBody:e})),t.next=3,D.webProxy.books.updateSettings({id:U.id,enable_custom_body:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ye=function(){var t=Q(K().mark((function t(e){return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Kt(Z(Z({},Zt),{},{enableCatalog:e})),t.next=3,D.webProxy.books.updateSettings({id:U.id,enable_catalog:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ve=function(){var t=Q(K().mark((function t(e){return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Lt(e),t.next=3,D.webProxy.books.updateSettings({id:U.id,layout:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),me=function(){var t=Q(K().mark((function t(e){var r;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.webProxy.books.update(e,{ignoreGlobalMessage:!0});case 2:return r=t.sent,N({type:"book/update",payload:{public:r.public,password:r.password,indexed_level:r.indexed_level}}),Object.keys(e).includes("public")&&(r.public===A.PRIVACY.private?p.a.success(__("已关闭分享知识库里的所有内容")):p.a.success(__("已对知识库里所有内容生效"))),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),be=function(){var t=Q(K().mark((function t(e,r){var n;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.webProxy.books.update({id:e.id,name:r});case 2:return n=t.sent,N({type:"book/update",payload:{name:r}}),p.a.success(__("操作成功"),3),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),ge=function(){var t=Q(K().mark((function t(){var e;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Ut&&Ut.trim()||__("无标题"),t.next=3,be(U,e);case 3:Ht(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(G.b)()?y.a.createElement("div",{className:V.a.containerWrapper},xt&&y.a.createElement("div",{className:V.a.upload,onClick:function(){return Mt(!0)}},y.a.createElement("span",null,__("替换背景"))),y.a.createElement("div",{className:V.a.container},y.a.createElement(a.a,{avatar:{shape:"square",size:36},title:{width:200},paragraph:{rows:2},active:!0,loading:lt},y.a.createElement("div",{className:V.a.bookHead},y.a.createElement("div",{className:V.a.bookTitle},xt?y.a.createElement(F.b,{key:U.id,className:T()(V.a.bookIcon,V.a.editable),value:U.book_icon,updateIcon:le,width:38,height:38,disabled:!xt}):y.a.createElement(F.a,{key:U.id,className:V.a.bookIcon,value:U.book_icon,width:38,height:38}),zt?y.a.createElement(f.a,{className:V.a.bookNameInput,autoFocus:!0,type:"text",size:"large",value:Ut,onChange:function(t){return Yt(t.target.value)},onFocus:function(t){return zt&&t.target.select()},onBlur:ge,onPressEnter:ge}):y.a.createElement("span",{className:V.a.bookName},U.name)),y.a.createElement("div",{className:V.a.action},y.a.createElement("div",{className:V.a.bookAction},!xt&&y.a.createElement(nt,{className:T()(V.a.bookActionItem,V.a.star),iconSize:16,book:U}),((null===(t=U.abilities)||void 0===t?void 0:t.share)||(null===(e=U.abilities)||void 0===e?void 0:e.create_collaborator))&&!xt&&y.a.createElement(ot,{shareViewType:"BOOK",key:"share-book-".concat(U.id),targetResource:U,onChangeShare:me,organization:window.appData.organization,book:U,group:H,me:z,canShare:null===(r=U.abilities)||void 0===r?void 0:r.share,canCollaborator:null===(h=U.abilities)||void 0===h?void 0:h.create_collaborator},y.a.createElement(s.a,{className:T()(V.a.bookActionItem,V.a.share)},y.a.createElement("span",null,__("分享")))),xt&&y.a.createElement(u.a,{trigger:"click",placement:"bottomRight",content:y.a.createElement("div",{className:V.a.togglePanel},y.a.createElement("div",{className:V.a.title},__("页面设置")),y.a.createElement("p",{className:V.a.desc},__("选择是否显示以下模块，打开即为显示")),y.a.createElement("div",{className:V.a.toggleItem},y.a.createElement("span",null,__("自定义模块")),y.a.createElement(l.a,{checked:Qt,onChange:de})),y.a.createElement("div",{className:V.a.toggleItem},y.a.createElement("span",null,__("目录模块")),y.a.createElement(l.a,{checked:Jt,onChange:ye})))},y.a.createElement("div",{className:T()(V.a.bookActionItem,V.a.setting)},y.a.createElement(w.default,{width:18,height:18}))),(null===(v=U.abilities)||void 0===v?void 0:v.create_doc)&&!xt&&y.a.createElement(tt,{book:U,group:H,placement:"bottomRight",className:V.a.bookActionItem,prepend:(null===(g=U.abilities)||void 0===g?void 0:g.modify_setting)&&y.a.createElement(y.a.Fragment,null,y.a.createElement(c.a.Item,{key:"rename",onClick:function(){Yt(U.name),Ht(!0)},icon:y.a.createElement(_.default,{width:16,height:16})},__("重命名")),y.a.createElement(c.a.Item,{key:"edit",onClick:function(){return St(!0)},icon:y.a.createElement(O.default,{width:16,height:16})},__("编辑首页"))),showBasicSettings:!1,showDelete:!0}),xt&&y.a.createElement("div",{className:T()(V.a.bookActionItem,V.a.update,It?V.a.needSave:""),onClick:ce},__("更新"))))),y.a.createElement("div",{className:V.a.statistics},y.a.createElement("span",{className:V.a.docCount},y.a.createElement("b",{className:V.a.count},te.length||0)," ",__("文档")),y.a.createElement("span",{className:V.a.wordCount},y.a.createElement("b",{className:V.a.count},Wt)," ",__("字"))),y.a.createElement(rt,{className:V.a.bookContributor,users:U.contributors,canEdit:(null===(S=U.abilities)||void 0===S?void 0:S.modify_setting)&&xt,bookId:U.id})),y.a.createElement(ft,{editable:(null==q?void 0:q.current)&&xt,enable:Qt,editComponent:y.a.createElement("div",{className:V.a.editor},y.a.createElement(it,{editor:q.current,tplDoc:{type:"repoHomePage"},placeholder:{tip:__("直接输入正文，也可选择一个模板："),emptyParagraphTip:__("输入 / 唤起更多")},needCreateGuide:!0,onChange:oe,onSubmit:ie,onLoad:ae})),viewComponent:y.a.createElement(a.a,{className:V.a.viewer,title:!1,paragraph:{rows:3},active:!0,loading:lt},y.a.createElement("div",{className:T()(V.a.viewer,X({},V.a.none,mt))},y.a.createElement(at,{forwardedRef:W,content:Et,genOutline:!1,genAnchor:!1,simpleUI:!0,onReady:function(){var t,e,r;xt&&bt(null==q||null===(r=q.current)||void 0===r?void 0:r.isEmpty());bt((null==W||null===(t=W.current)||void 0===t||null===(e=t.viewer)||void 0===e?void 0:e.queryCommandValue("isEmpty"))||!1)},docType:"Doclet",doc:wt})))}),y.a.createElement(ft,{className:V.a.catalogModule,editable:xt,enable:Jt,editComponent:y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:V.a.headerSwitch},y.a.createElement("div",{className:T()(V.a.switchBtnBg,(P={},X(P,V.a.treeSelected,Pt===Y.a.Book),X(P,V.a.cardSelected,Pt===Y.a.Card),X(P,V.a.columnSelected,Pt===Y.a.Column),P))}),y.a.createElement("div",{className:V.a.switchButtons},y.a.createElement(i.a,{placement:"bottom",title:__("目录视图")},y.a.createElement("div",{className:T()(V.a.switchBtn,X({},V.a.switchBtnSelected,Pt===Y.a.Book)),onClick:function(){return ve(Y.a.Book)}},y.a.createElement(E.default,{className:V.a.switchIcon}))),y.a.createElement(i.a,{placement:"bottom",title:__("卡片视图")},y.a.createElement("div",{className:T()(V.a.switchBtn,X({},V.a.switchBtnSelected,Pt===Y.a.Card)),onClick:function(){return ve(Y.a.Card)}},y.a.createElement(k.default,{className:V.a.switchIcon}))),y.a.createElement(i.a,{placement:"bottom",title:__("专栏视图")},y.a.createElement("div",{className:T()(V.a.switchBtn,X({},V.a.switchBtnSelected,Pt===Y.a.Column)),onClick:function(){return ve(Y.a.Column)}},y.a.createElement(j.default,{className:V.a.switchIcon}))))),y.a.createElement(u.a,{trigger:"click",placement:"bottomRight",visible:Ct,onVisibleChange:function(t){return At(t)},content:y.a.createElement(st,{layout:Pt,maxLevel:ne,displayValue:U.catalog_display_level,onChangeLevel:se,tailType:U.catalog_tail_type,onChangeTailType:fe,order:$t,onChangeOrder:he})},y.a.createElement("div",{className:V.a.catalogMoreIcon,onClick:function(){return At(!0)}},y.a.createElement(x.default,{width:16,height:16})," "))),viewComponent:y.a.createElement("div",{className:V.a.catalogHeaderTitle})}),y.a.createElement(ft,{enable:Jt,viewComponent:y.a.createElement(ct,re)}),xt||Qt||Jt?null:y.a.createElement(n.a,{className:V.a.empty,image:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*wPMVTriBo40AAAAAAAAAAAAAARQnAQ",description:y.a.createElement(o.a,null,__("暂无内容"))})),Ft&&y.a.createElement(et,{cover:U.cover,bookId:U.id,visible:Ft,onCancel:function(){return Mt(!1)},onSubmit:ue})):y.a.createElement("div",{className:V.a.containerWrapper},y.a.createElement("div",{className:V.a.container},y.a.createElement("div",{className:V.a.offlineWrapper},y.a.createElement(m.a,{src:R.a,darkAlpha:.7,className:V.a.offlineImg}),y.a.createElement("span",{className:V.a.offlineTip},__("离线状态下暂不支持展示知识库首页")))))}function ht(){var t=Object(v.useParams)(),e=t.group,r=t.book,n=J(Object(d.useState)(""),2),o=n[0],i=n[1];return Object(d.useEffect)((function(){U.g&&i(Object(z.a)("get","".concat(e,"/").concat(r)))}),[e,r]),o?y.a.createElement(v.Redirect,{to:"/".concat(e,"/").concat(r,"/").concat(o)}):y.a.createElement(pt,null)}},5690:function(t,e){t.exports=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var o=t[e];n[o[0]]=o[1]}return n}},583:function(t,e,r){"use strict";r(2904);var n=r(1228);r(1001);e.a=n.a},598:function(t,e,r){"use strict";r(2951);var n=r(1256);r(1241);e.a=n.a},958:function(t,e,r){"use strict";var n=r(1617),o={"text/plain":"Text","text/html":"Url",default:"Text"};t.exports=function(t,e){var r,i,a,c,u,l,s=!1;e||(e={}),r=e.debug||!1;try{if(a=n(),c=document.createRange(),u=document.getSelection(),(l=document.createElement("span")).textContent=t,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(n){if(n.stopPropagation(),e.format)if(n.preventDefault(),void 0===n.clipboardData){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=o[e.format]||o.default;window.clipboardData.setData(i,t)}else n.clipboardData.clearData(),n.clipboardData.setData(e.format,t);e.onCopy&&(n.preventDefault(),e.onCopy(n.clipboardData))})),document.body.appendChild(l),c.selectNodeContents(l),u.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");s=!0}catch(n){r&&console.error("unable to copy using execCommand: ",n),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),s=!0}catch(n){r&&console.error("unable to copy using clipboardData: ",n),r&&console.error("falling back to prompt"),i=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,t)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(c):u.removeAllRanges()),l&&document.body.removeChild(l),a()}return s}}}]);